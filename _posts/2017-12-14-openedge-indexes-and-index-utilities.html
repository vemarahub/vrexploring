---
layout: post
title: OpenEdge Indexes and Index Utilities
date: '2017-12-14T04:00:00.000-08:00'
categories: [Databases,Progress]
author: Rajesh Nair
tags:
- utilities
- idxactivate
- idxdeactivate
- idxbuild
- index
modified_time: '2020-02-05T12:07:24.307-08:00'
blogger_id: tag:blogger.com,1999:blog-8827475125741824309.post-6160398869926074627
blogger_orig_url: https://csrepo.blogspot.com/2017/12/openedge-indexes-and-index-utilities.html
---


<div dir="ltr" style="text-align: left;" trbidi="on"><br /><br /><br /><h3 style="text-align: left;">What is an index ?</h3><div><br /></div><div><div>&nbsp;Database index works like a book index. To look up a topic, you scan the book index, locate the topic, and turn to the pages where the information resides. The index itself does not contain the information; it only contains page numbers that direct you to the pages where the information resides. Without an index, you would have to search the entire book, scanning each page sequentially.</div><div><br /></div><div>Similarly, if you ask for specific data from a database, the database engine uses an index to find the data. An index contains two pieces of information—the index key and a row pointer that points to the corresponding row in the main table.&nbsp;</div></div><div><br /></div><div><br /></div><div><div>Index table entries are always sorted in numerical, alphabetical, or chronological order.&nbsp;</div><div>Using the pointers, the system can then access data rows directly, and in the sort order specified by the index.</div><div>Every table should have at least one index, the primary index.</div><div><br /></div><div>&nbsp;When you create the first index on any table, OpenEdge assumes it is the primary index and sets the Primary flag accordingly.</div></div><div><br /></div><div><br /></div><div><h3>Advantages of an index:</h3></div><div><br /></div><div><div>*Direct access and rapid retrieval of rows.</div><div><br /></div><div><br /></div><div>*Automatic ordering of rows.</div><div><br /></div><div><br /></div><div>*Enforced uniqueness.</div><div><br /></div><div><br /></div><div>*Rapid processing of inter-table relationships.</div></div><div><br /></div><div><br /></div><div><h3>Disadvantages of an index:</h3></div><div><br /></div><div><div>*Indexes take up disk space.(See the Calculating index size).</div><div><br /></div><div><br /></div><div>*Indexes can slow down other processes. When the user updates an indexed column, OpenEdge updates all related indexes as well, and when the user creates or deletes a row, OpenEdge changes all the indexes for that table.</div></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><h3>How index works:</h3></div><div><br /></div><div>An index is a list of index values and row IDs (ROWIDs). ROWIDs are physical pointers to the database tables that give you the fastest access to rows. ROWIDs do not change during the life of a row—they only change when you dump and reload a database.</div><div><br /></div><div>&nbsp;If you delete a row and create a new identical row, it might have a different ROWID. The database blocks of an index are <b>organized into a tree structure</b> for fast access.&nbsp;</div><div>OpenEdge locates rows within an index by traversing the index tree. Once a row is located, the ROWID accesses the data.&nbsp;</div><div><br /></div><div>OpenEdge does not lock the whole index tree while it looks for the row, it only locks the block that contains the row. Therefore, other users can simultaneously access rows in the same database.</div><div><br /></div><div><br /><br /><h3>Index Utilities:</h3><div><br /></div><div>To perform various operations on the indexes , openedge provides various utilities .Below are few:</div><div><br /></div><div><u><br /></u></div><div><b><u>Index check (PROUTIL IDXCHECK)</u></b></div><div><b><br /></b></div><div><b><br /></b></div>Index Check identifies possible errors, but does not ever alter index entries. IDXCHECK can be run online or offline. If an IDXCHECK operation is interrupted or crashes, it does not cause data corruption. IDXCHECK works by:<br /><br />1. Checking that all index entries associated with each record can be found.<br /><br />2. Verifying that each value in the index is in the associated record.<br /><br />3. Undertaking a validation of all index blocks and reporting an associated error as appropriate.<br />IDXCHECK is designed to detect index corruption as sensitively as possible. Because this requires many reads to take place during the process, it may take significant time to complete.</div><div><br /><b>proutil &lt;dbname&gt; -C idxcheck</b></div><div><br /><br /><br /><b><u>Index fix (PROUTIL IDXFIX )</u></b><br /><b><br /></b><br />Checks database records and indexes to determine whether an index is corrupt or a record has a missing or incorrect index. IDXFIX will also repair corrupted indexes.<br /><br /><span style="font-weight: bold;">proutil &lt;dbname&gt; -C idxfix</span><br /><span style="font-weight: bold;"><br /></span><span style="font-weight: bold;"><br /></span><span style="font-weight: bold;"><br /></span><span style="font-weight: bold;"><u><br /></u></span><u><span style="font-weight: bold;">Index Active (</span><b>PROUTIL IDXACTIVATE</b><span style="font-weight: bold;">)</span></u><br /><u><span style="font-weight: bold;"><br /></span></u><u><span style="font-weight: bold;"><br /></span></u>Activates an inactive index. IDXACTIVATE works for both online and offline databases.<br /><br /><b>proutil db-name -C idxactivate&nbsp;table-name.index-name</b><br /><b><br /></b><b><br /></b><b><br /></b><b><br /></b><u><span style="font-weight: bold;">Index De-Active (</span><b>PROUTIL IDXDEACTIVATE</b><span style="font-weight: bold;">)</span></u><br /><br />Deactivates an active index or indexes for databases<br /><br /><br /><b>proutil db-name -C idxdeactivate&nbsp;table-name.index-name</b><br /><b><br /></b><b><br /></b><b><br /></b><u><span style="font-weight: bold;">Index Build &nbsp;(</span><b>PROUTIL IDXBUILD</b><span style="font-weight: bold;">)</span></u><br /><div><u><span style="font-weight: bold;"><br /></span></u></div><u><span style="font-weight: bold;"><br /></span></u>Rebuilds an index, packing or consolidating index records to use disk space as efficiently as possible.<br /><br /><br />In addition to rebuilding an index, IDXBUILD also:<br /><br />*Compresses index blocks to minimize space usage<br /><br />*Activates deactivated indexes in the database.<br /><br />*Repairs corrupted indexes in the database (index corruption is typically signaled by error messages)<br /><br /><br />You can either perform idx build using menu option by simply using<br /><br /><b>proutil &lt;db-name&gt; -C idxbuild</b><br /><b><br /></b>Following menu option will come<br /><br /><span style="color: #666666; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: 14px; white-space: pre;">&nbsp;Index Rebuild Utility</span><br /><span style="color: #666666; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: 14px; white-space: pre;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=====================</span><br /><br style="color: #666666; font-family: &quot;Courier New&quot;, Courier, monospace; font-size: 14px; white-space: pre;" /><span style="color: #666666; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: 14px; white-space: pre;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Select one of the following:</span><br /><span style="color: #666666; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: 14px; white-space: pre;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;All           (a/A) - Rebuild all the indexes </span><br /><span style="color: #666666; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: 14px; white-space: pre;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Some          (s/S) - Rebuild only some of the indexes </span><br /><span style="color: #666666; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: 14px; white-space: pre;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;By Area       (r/R) - Rebuild indexes in selected areas</span><br /><span style="color: #666666; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: 14px; white-space: pre;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;By Schema     (c/C) - Rebuild indexes  by schema owners</span><br /><span style="color: #666666; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: 14px; white-space: pre;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;By Table      (t/T) - Rebuild indexes in selected tables </span><br /><span style="color: #666666; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: 14px; white-space: pre;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;By Partition  (p/P) - Choose indexes in selected table partitions</span><br /><span style="color: #666666; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: 14px; white-space: pre;">      By Activation (v/V) - Rebuild selected active or inactive indexes</span><br /><span style="color: #666666; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: 14px; white-space: pre;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-------------------</span><br /><span style="color: #666666; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: 14px; white-space: pre;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Multi-Tenancy (m/M) - Choose tenants or groups</span><br /><span style="color: #666666; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: 14px; white-space: pre;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-------------------</span><br /><span style="color: #666666; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: 14px; white-space: pre;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Quit     (q/Q) - Quit, do not rebuild </span><br /><br style="color: #666666; font-family: &quot;Courier New&quot;, Courier, monospace; font-size: 14px; white-space: pre;" /><span style="color: #666666; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: 14px; white-space: pre;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Enter your selection:</span><br /><span style="color: #666666; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: 14px; white-space: pre;"><br /></span><span style="color: #666666; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: 14px; white-space: pre;"><br /></span><span style="color: #666666; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: 14px; white-space: pre;"><br /></span>You can select desired option and perform the idx build,<br /><br /><br />We can also perform the idx build as a background process and with specific parameters to improve the performance of idxbuild and providing a faster result<br /><br />Eg:<br /><br /><b>(proutil &lt;dbname&gt; -C idxbuild -B 100000 -T &lt;temp-path&gt; -SG 48 -TB 64 -TM 64 -TMB 512 -TF 50 -thread 1 -threadnum 10 -datascanthreads 60 -mergethreads 10 &lt; input.txt&gt; ouput.txt &amp;)</b><br /><br /><br />The input file(input.txt) in the example should be of below format<br /><br />S<br />&lt;table-name&gt;<br />&lt;index-name&gt;<br />&lt;table-name&gt;<br />&lt;index-name&gt;<br />!<br />y<br />y<br /><br /><br /></div></div>