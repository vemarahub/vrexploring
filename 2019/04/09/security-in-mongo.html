<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Security in Mongo | VR Exploring</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Security in Mongo" />
<meta name="author" content="Rajesh Nair" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Below table would give in various security features provided by Mongo: Authentication Authentication default mechanism used is SCRAM( Salted Challenge Response Mechanism),&nbsp; basically password security. Community version has x.509 , which uses certification for authentication Enterprise includes two additional authentication mechanism LDAP &amp; KERBEROS. Mongodb also supports cluster authentication mechanism for communcation between clusters. Authorization Mongo db uses role based access control for a high level of responsibility isolation for operational tasks. We can enable authorization for a mongo instance if we use -auth parameter in the startup of mongod deamon. $ mongod --dbpath ~/db_loc --logpath ~/sec.log --fork --auth --port 27227 Or we can also set&nbsp;authorization: &quot;enabled&quot; in the config file. Once started with -auth parameter we will not be able to do read/write over the databases/collection unless we have the required privileges: &gt; db.foo.insert({x:1}) WriteResult({ &nbsp; &nbsp; &nbsp; &nbsp; &quot;writeError&quot; : { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;code&quot; : 13, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;errmsg&quot; : &quot;not authorized on test to execute command { insert: \&quot;foo\&quot;, ordered: true, $db: \&quot;test\&quot; }&quot; &nbsp; &nbsp; &nbsp; &nbsp; } }) So before starting the database in -auth mode, we need to create a super user who would be the db admin for the mongo instance and would do the role management, administrative actions ,etc. So to enable security features in mongo follow the below steps: 1. Start the mongo database without any auth parameter. 2. Login to mongo shell and create a super user account $mongo &gt;use admin &gt;db.createUser({ user:&quot;sr&quot;, pwd:&quot;sr123&quot;, roles:[{ role:&quot;root&quot;,db:&quot;admin&quot; }]}) &gt;exit 3.Restart the mongo server with -auth parameter &gt;db.shutdownServer() $mongod --auth 4.Login using the new super user created mongo -u sr -p sr123 --authenticationDatabase admin By using this login session we can run admin commands such as: listDatabases dbStats listIndexes listCollections viewUsers We can create a normal user with read write privilege to a particular database by : 1. $mongo -u sr -p sr123 --authenticationDatabase admin 2. use accounts 3.db.createUser({ user: &quot;gal&quot; pwd:&quot;galer&quot;, roles:[&quot;readWrite&quot;] }) 4. Now we can login to a new mongo shell with the new user pass and do read write operations on the accounts database $mongo -u gal -p galer --authenticationDatabase accounts * We can switch to another user while being in the mongo shell by using &gt; db.auth(&#39;sr&#39;,&#39;sr123&#39;) * To logout from the session we can use: &gt;db.logout() * To change the password for a user we can use: &gt;db.changeUserPassword(&quot;user&quot;,&quot;pass&quot;) We can create var me = { user: &quot;raj&quot; , pwd : &quot;raj123&quot; , roles :[ &quot;userAdminAnyDatabase&quot;]} var me = { user: &quot;raj&quot; , pwd : &quot;raj123&quot; , roles :[ &quot;dbAdminAnyDatabase&quot;]} var w = { user: &quot;nair&quot; , pwd : &quot;raj123&quot; , roles :[ &quot;readWriteAnyDatabase&quot;]} &gt; use test var a = { user: &quot;maya&quot; , pwd : &quot;raj123&quot; , roles :[ &quot;readWrite&quot;]}&nbsp; - for access only to test database(create using user var- me) db.createUser( &nbsp; { &nbsp; &nbsp; user: &quot;reportsUser&quot;, &nbsp; &nbsp; pwd: &quot;12345678&quot;, &nbsp; &nbsp; roles: [ &nbsp; &nbsp; &nbsp; &nbsp;{ role: &quot;read&quot;, db: &quot;reporting&quot; }, &nbsp; &nbsp; &nbsp; &nbsp;{ role: &quot;read&quot;, db: &quot;products&quot; }, &nbsp; &nbsp; &nbsp; &nbsp;{ role: &quot;read&quot;, db: &quot;sales&quot; }, &nbsp; &nbsp; &nbsp; &nbsp;{ role: &quot;readWrite&quot;, db: &quot;accounts&quot; } &nbsp; &nbsp; ] &nbsp; } ) &gt; db.createUser(me) Successfully added user: { &quot;user&quot; : &quot;raj&quot;, &quot;roles&quot; : [ &quot;userAdminAnyDatabase&quot; ] } $ mongo localhost:27227/admin&nbsp; -u raj –p Roles: --keyFile &lt;fname&gt; - to tell mongodb clusters to communicate among themselves using shared secret key. To provide authorization &gt; db.auth(&quot;raj&quot;,&quot;raj123&quot;) Users – • Admin User –can do administration, created in admin database,can access all databases • Regular User – access specific database,read/write or read only SSL and KeyFiles Key File – ensures members of clusters are legitimate. Auth – authentication and authorization for client. Scons –ssl – for encrypted data between client and shard servers and between shard servers. Intra-Cluster Security $mongod --dbpath /home/azureuser/data2 --port 27002 --auth --replSet z --keyFile /home/azureuser/data/keyfile --logpath /home/azureuser/data2/data.log –fork" />
<meta property="og:description" content="Below table would give in various security features provided by Mongo: Authentication Authentication default mechanism used is SCRAM( Salted Challenge Response Mechanism),&nbsp; basically password security. Community version has x.509 , which uses certification for authentication Enterprise includes two additional authentication mechanism LDAP &amp; KERBEROS. Mongodb also supports cluster authentication mechanism for communcation between clusters. Authorization Mongo db uses role based access control for a high level of responsibility isolation for operational tasks. We can enable authorization for a mongo instance if we use -auth parameter in the startup of mongod deamon. $ mongod --dbpath ~/db_loc --logpath ~/sec.log --fork --auth --port 27227 Or we can also set&nbsp;authorization: &quot;enabled&quot; in the config file. Once started with -auth parameter we will not be able to do read/write over the databases/collection unless we have the required privileges: &gt; db.foo.insert({x:1}) WriteResult({ &nbsp; &nbsp; &nbsp; &nbsp; &quot;writeError&quot; : { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;code&quot; : 13, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;errmsg&quot; : &quot;not authorized on test to execute command { insert: \&quot;foo\&quot;, ordered: true, $db: \&quot;test\&quot; }&quot; &nbsp; &nbsp; &nbsp; &nbsp; } }) So before starting the database in -auth mode, we need to create a super user who would be the db admin for the mongo instance and would do the role management, administrative actions ,etc. So to enable security features in mongo follow the below steps: 1. Start the mongo database without any auth parameter. 2. Login to mongo shell and create a super user account $mongo &gt;use admin &gt;db.createUser({ user:&quot;sr&quot;, pwd:&quot;sr123&quot;, roles:[{ role:&quot;root&quot;,db:&quot;admin&quot; }]}) &gt;exit 3.Restart the mongo server with -auth parameter &gt;db.shutdownServer() $mongod --auth 4.Login using the new super user created mongo -u sr -p sr123 --authenticationDatabase admin By using this login session we can run admin commands such as: listDatabases dbStats listIndexes listCollections viewUsers We can create a normal user with read write privilege to a particular database by : 1. $mongo -u sr -p sr123 --authenticationDatabase admin 2. use accounts 3.db.createUser({ user: &quot;gal&quot; pwd:&quot;galer&quot;, roles:[&quot;readWrite&quot;] }) 4. Now we can login to a new mongo shell with the new user pass and do read write operations on the accounts database $mongo -u gal -p galer --authenticationDatabase accounts * We can switch to another user while being in the mongo shell by using &gt; db.auth(&#39;sr&#39;,&#39;sr123&#39;) * To logout from the session we can use: &gt;db.logout() * To change the password for a user we can use: &gt;db.changeUserPassword(&quot;user&quot;,&quot;pass&quot;) We can create var me = { user: &quot;raj&quot; , pwd : &quot;raj123&quot; , roles :[ &quot;userAdminAnyDatabase&quot;]} var me = { user: &quot;raj&quot; , pwd : &quot;raj123&quot; , roles :[ &quot;dbAdminAnyDatabase&quot;]} var w = { user: &quot;nair&quot; , pwd : &quot;raj123&quot; , roles :[ &quot;readWriteAnyDatabase&quot;]} &gt; use test var a = { user: &quot;maya&quot; , pwd : &quot;raj123&quot; , roles :[ &quot;readWrite&quot;]}&nbsp; - for access only to test database(create using user var- me) db.createUser( &nbsp; { &nbsp; &nbsp; user: &quot;reportsUser&quot;, &nbsp; &nbsp; pwd: &quot;12345678&quot;, &nbsp; &nbsp; roles: [ &nbsp; &nbsp; &nbsp; &nbsp;{ role: &quot;read&quot;, db: &quot;reporting&quot; }, &nbsp; &nbsp; &nbsp; &nbsp;{ role: &quot;read&quot;, db: &quot;products&quot; }, &nbsp; &nbsp; &nbsp; &nbsp;{ role: &quot;read&quot;, db: &quot;sales&quot; }, &nbsp; &nbsp; &nbsp; &nbsp;{ role: &quot;readWrite&quot;, db: &quot;accounts&quot; } &nbsp; &nbsp; ] &nbsp; } ) &gt; db.createUser(me) Successfully added user: { &quot;user&quot; : &quot;raj&quot;, &quot;roles&quot; : [ &quot;userAdminAnyDatabase&quot; ] } $ mongo localhost:27227/admin&nbsp; -u raj –p Roles: --keyFile &lt;fname&gt; - to tell mongodb clusters to communicate among themselves using shared secret key. To provide authorization &gt; db.auth(&quot;raj&quot;,&quot;raj123&quot;) Users – • Admin User –can do administration, created in admin database,can access all databases • Regular User – access specific database,read/write or read only SSL and KeyFiles Key File – ensures members of clusters are legitimate. Auth – authentication and authorization for client. Scons –ssl – for encrypted data between client and shard servers and between shard servers. Intra-Cluster Security $mongod --dbpath /home/azureuser/data2 --port 27002 --auth --replSet z --keyFile /home/azureuser/data/keyfile --logpath /home/azureuser/data2/data.log –fork" />
<link rel="canonical" href="https://vemarahub.github.io/vrexploring/2019/04/09/security-in-mongo.html" />
<meta property="og:url" content="https://vemarahub.github.io/vrexploring/2019/04/09/security-in-mongo.html" />
<meta property="og:site_name" content="VR Exploring" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-04-09T05:25:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Security in Mongo" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Rajesh Nair"},"dateModified":"2019-04-09T05:25:00+00:00","datePublished":"2019-04-09T05:25:00+00:00","description":"Below table would give in various security features provided by Mongo: Authentication Authentication default mechanism used is SCRAM( Salted Challenge Response Mechanism),&nbsp; basically password security. Community version has x.509 , which uses certification for authentication Enterprise includes two additional authentication mechanism LDAP &amp; KERBEROS. Mongodb also supports cluster authentication mechanism for communcation between clusters. Authorization Mongo db uses role based access control for a high level of responsibility isolation for operational tasks. We can enable authorization for a mongo instance if we use -auth parameter in the startup of mongod deamon. $ mongod --dbpath ~/db_loc --logpath ~/sec.log --fork --auth --port 27227 Or we can also set&nbsp;authorization: &quot;enabled&quot; in the config file. Once started with -auth parameter we will not be able to do read/write over the databases/collection unless we have the required privileges: &gt; db.foo.insert({x:1}) WriteResult({ &nbsp; &nbsp; &nbsp; &nbsp; &quot;writeError&quot; : { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;code&quot; : 13, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;errmsg&quot; : &quot;not authorized on test to execute command { insert: \\&quot;foo\\&quot;, ordered: true, $db: \\&quot;test\\&quot; }&quot; &nbsp; &nbsp; &nbsp; &nbsp; } }) So before starting the database in -auth mode, we need to create a super user who would be the db admin for the mongo instance and would do the role management, administrative actions ,etc. So to enable security features in mongo follow the below steps: 1. Start the mongo database without any auth parameter. 2. Login to mongo shell and create a super user account $mongo &gt;use admin &gt;db.createUser({ user:&quot;sr&quot;, pwd:&quot;sr123&quot;, roles:[{ role:&quot;root&quot;,db:&quot;admin&quot; }]}) &gt;exit 3.Restart the mongo server with -auth parameter &gt;db.shutdownServer() $mongod --auth 4.Login using the new super user created mongo -u sr -p sr123 --authenticationDatabase admin By using this login session we can run admin commands such as: listDatabases dbStats listIndexes listCollections viewUsers We can create a normal user with read write privilege to a particular database by : 1. $mongo -u sr -p sr123 --authenticationDatabase admin 2. use accounts 3.db.createUser({ user: &quot;gal&quot; pwd:&quot;galer&quot;, roles:[&quot;readWrite&quot;] }) 4. Now we can login to a new mongo shell with the new user pass and do read write operations on the accounts database $mongo -u gal -p galer --authenticationDatabase accounts * We can switch to another user while being in the mongo shell by using &gt; db.auth(&#39;sr&#39;,&#39;sr123&#39;) * To logout from the session we can use: &gt;db.logout() * To change the password for a user we can use: &gt;db.changeUserPassword(&quot;user&quot;,&quot;pass&quot;) We can create var me = { user: &quot;raj&quot; , pwd : &quot;raj123&quot; , roles :[ &quot;userAdminAnyDatabase&quot;]} var me = { user: &quot;raj&quot; , pwd : &quot;raj123&quot; , roles :[ &quot;dbAdminAnyDatabase&quot;]} var w = { user: &quot;nair&quot; , pwd : &quot;raj123&quot; , roles :[ &quot;readWriteAnyDatabase&quot;]} &gt; use test var a = { user: &quot;maya&quot; , pwd : &quot;raj123&quot; , roles :[ &quot;readWrite&quot;]}&nbsp; - for access only to test database(create using user var- me) db.createUser( &nbsp; { &nbsp; &nbsp; user: &quot;reportsUser&quot;, &nbsp; &nbsp; pwd: &quot;12345678&quot;, &nbsp; &nbsp; roles: [ &nbsp; &nbsp; &nbsp; &nbsp;{ role: &quot;read&quot;, db: &quot;reporting&quot; }, &nbsp; &nbsp; &nbsp; &nbsp;{ role: &quot;read&quot;, db: &quot;products&quot; }, &nbsp; &nbsp; &nbsp; &nbsp;{ role: &quot;read&quot;, db: &quot;sales&quot; }, &nbsp; &nbsp; &nbsp; &nbsp;{ role: &quot;readWrite&quot;, db: &quot;accounts&quot; } &nbsp; &nbsp; ] &nbsp; } ) &gt; db.createUser(me) Successfully added user: { &quot;user&quot; : &quot;raj&quot;, &quot;roles&quot; : [ &quot;userAdminAnyDatabase&quot; ] } $ mongo localhost:27227/admin&nbsp; -u raj –p Roles: --keyFile &lt;fname&gt; - to tell mongodb clusters to communicate among themselves using shared secret key. To provide authorization &gt; db.auth(&quot;raj&quot;,&quot;raj123&quot;) Users – • Admin User –can do administration, created in admin database,can access all databases • Regular User – access specific database,read/write or read only SSL and KeyFiles Key File – ensures members of clusters are legitimate. Auth – authentication and authorization for client. Scons –ssl – for encrypted data between client and shard servers and between shard servers. Intra-Cluster Security $mongod --dbpath /home/azureuser/data2 --port 27002 --auth --replSet z --keyFile /home/azureuser/data/keyfile --logpath /home/azureuser/data2/data.log –fork","headline":"Security in Mongo","mainEntityOfPage":{"@type":"WebPage","@id":"https://vemarahub.github.io/vrexploring/2019/04/09/security-in-mongo.html"},"url":"https://vemarahub.github.io/vrexploring/2019/04/09/security-in-mongo.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/vrexploring/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://vemarahub.github.io/vrexploring/feed.xml" title="VR Exploring" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/vrexploring/">VR Exploring</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/vrexploring/about/">About</a><a class="page-link" href="/vrexploring/">Home</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Security in Mongo</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2019-04-09T05:25:00+00:00" itemprop="datePublished">Apr 9, 2019
      </time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Rajesh Nair</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <div dir="ltr" style="text-align: left;" trbidi="on">
Below table would give in various security features provided by Mongo:<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg9VQYXE4LVcb2kWxQojdsJjv6EwtrQT_wIskDVTZnRHr3ooNQ5rpCKTNi_33T4I334ymrV0eJ7HQTzPDi5jWzFCqC3zVyIhWzcOz9giHdTzqH86q_Ntrv62-b-xEX6LW2mxSW5xvlOYoU/s1600/we.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="258" data-original-width="991" height="166" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg9VQYXE4LVcb2kWxQojdsJjv6EwtrQT_wIskDVTZnRHr3ooNQ5rpCKTNi_33T4I334ymrV0eJ7HQTzPDi5jWzFCqC3zVyIhWzcOz9giHdTzqH86q_Ntrv62-b-xEX6LW2mxSW5xvlOYoU/s640/we.png" width="640" /></a></div>
<br />
<h3 style="text-align: left;">
<b>Authentication</b></h3>
<div style="text-align: left;">
Authentication default mechanism used is SCRAM( Salted Challenge Response Mechanism),&nbsp;</div>
<div style="text-align: left;">
basically password security.</div>
<div style="text-align: left;">
Community version has x.509 , which uses certification for authentication</div>
<div style="text-align: left;">
<br /></div>
<div style="text-align: left;">
Enterprise includes two additional authentication mechanism LDAP &amp; KERBEROS.</div>
<div style="text-align: left;">
<br /></div>
<div style="text-align: left;">
Mongodb also supports cluster authentication mechanism for communcation between clusters.</div>
<div style="text-align: left;">
<br /></div>
<h3>
<span style="font-size: 18.72px;">Authorization</span></h3>
<div>
Mongo db uses role based access control for a high level of responsibility isolation for operational tasks.</div>
<br />
We can enable authorization for a mongo instance if we use <b>-auth</b> parameter in the startup of mongod deamon.<br />
<br />
$ <b>mongod --dbpath ~/db_loc --logpath ~/sec.log --fork --auth --port 27227</b><br />
<b><br /></b>
Or we can also set&nbsp;authorization: "enabled" in the config file.<br />
<br />
Once started with -auth parameter we will not be able to do read/write over the databases/collection unless we have the required privileges:<br />
<br />
&gt; <b>db.foo.insert({x:1})</b><br />
<i>WriteResult({</i><br />
<i>&nbsp; &nbsp; &nbsp; &nbsp; "writeError" : {</i><br />
<i>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "code" : 13,</i><br />
<i>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "errmsg" : "not authorized on test to execute command { insert: \"foo\", ordered: true, $db: \"test\" }"</i><br />
<i>&nbsp; &nbsp; &nbsp; &nbsp; }</i><br />
<i>})</i><br />
<i><br /></i>
<i><br /></i>
So before starting the database in -auth mode, we need to create a super user who would be the db admin for the mongo instance and would do the role management, administrative actions ,etc.<br />
<br />
So to enable security features in mongo follow the below steps:<br />
<br />
1. Start the mongo database without any auth parameter.<br />
<br />
2. Login to mongo shell and create a super user account<br />
<i>$mongo</i><br />
<i>&gt;use admin</i><br />
<i>&gt;db.createUser({</i><br />
<i>user:"sr",</i><br />
<i>pwd:"sr123",</i><br />
<i>roles:[{</i><br />
<i>role:"root",db:"admin"</i><br />
<i>}]})</i><br />
<i>&gt;exit</i><br />
<br />
3.Restart the mongo server with -auth parameter<br />
<i>&gt;db.shutdownServer()</i><br />
<i>$mongod --auth</i><br />
<i><br /></i>
4.Login using the new super user created<br />
<i>mongo -u sr -p sr123 --authenticationDatabase admin</i><br />
<br />
By using this login session we can run admin commands such as:<br />
<i>listDatabases</i><br />
<i>dbStats</i><br />
<i>listIndexes</i><br />
<i>listCollections</i><br />
<i>viewUsers</i><br />
<br />
We can create a normal user with read write privilege to a particular database by :<br />
<br />
1. $<i>mongo -u sr -p sr123 --authenticationDatabase admin</i><br />
<br />
2. use accounts<br />
<br />
3.<i>db.createUser({</i><br />
<i>user: "gal"</i><br />
<i>pwd:"galer",</i><br />
<i>roles:["readWrite"]</i><br />
<i>})</i><br />
<i><br /></i>
4. Now we can login to a new mongo shell with the new user pass and do read write operations on the accounts database<br />
<i>$mongo -u gal -p galer --authenticationDatabase accounts</i><br />
<br />
* We can switch to another user while being in the mongo shell by using<br />
<i>&gt; db.auth('sr','sr123')</i><br />
<br />
* To logout from the session we can use:<br />
<i>&gt;db.logout()</i><br />
<br />
* To change the password for a user we can use:<br />
<i>&gt;db.changeUserPassword("user","pass")</i><br />
<br />
<br />
<br />
<br />
We can create<br />
var me = { user: "raj" , pwd : "raj123" , roles :[ "userAdminAnyDatabase"]}<br />
var me = { user: "raj" , pwd : "raj123" , roles :[ "dbAdminAnyDatabase"]}<br />
var w = { user: "nair" , pwd : "raj123" , roles :[ "readWriteAnyDatabase"]}<br />
&gt; use test<br />
var a = { user: "maya" , pwd : "raj123" , roles :[ "readWrite"]}&nbsp; - for access only to test database(create using user var- me)<br />
<br />
db.createUser(<br />
&nbsp; {<br />
&nbsp; &nbsp; user: "reportsUser",<br />
&nbsp; &nbsp; pwd: "12345678",<br />
&nbsp; &nbsp; roles: [<br />
&nbsp; &nbsp; &nbsp; &nbsp;{ role: "read", db: "reporting" },<br />
&nbsp; &nbsp; &nbsp; &nbsp;{ role: "read", db: "products" },<br />
&nbsp; &nbsp; &nbsp; &nbsp;{ role: "read", db: "sales" },<br />
&nbsp; &nbsp; &nbsp; &nbsp;{ role: "readWrite", db: "accounts" }<br />
&nbsp; &nbsp; ]<br />
&nbsp; }<br />
)<br />
<br />
<br />
&gt; db.createUser(me)<br />
Successfully added user: { "user" : "raj", "roles" : [ "userAdminAnyDatabase" ] }<br />
<br />
$ mongo localhost:27227/admin&nbsp; -u raj –p<br />
<br />
<b>Roles:</b><br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhRiF2nKxmcMvAQnxVc2b1fH97gAiGJVTXO2gwm6obmyykz1gDTwpBmd81DQ78x26BT0gqCOBD3q3kQz9JJB5oONTttiBUe0ZHKCdPkUO6F5F16oDb7NadpSbOCCMHjHRPJVC7QCW7aoM0/s1600/Capture.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="423" data-original-width="1059" height="254" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhRiF2nKxmcMvAQnxVc2b1fH97gAiGJVTXO2gwm6obmyykz1gDTwpBmd81DQ78x26BT0gqCOBD3q3kQz9JJB5oONTttiBUe0ZHKCdPkUO6F5F16oDb7NadpSbOCCMHjHRPJVC7QCW7aoM0/s640/Capture.JPG" width="640" /></a></div>
<br />
<br />
<b>--keyFile &lt;fname&gt;</b> - to tell mongodb clusters to communicate among themselves using shared secret key.<br />
<br />
To provide authorization<br />
&gt; db.auth("raj","raj123")<br />
Users –<br />
•<span style="white-space: pre;"> </span>Admin User –can do administration, created in admin database,can access all databases<br />
•<span style="white-space: pre;"> </span>Regular User – access specific database,read/write or read only<br />
<br />
<br />
<b>SSL and KeyFiles</b><br />
<br />
Key File – ensures members of clusters are legitimate.<br />
Auth – authentication and authorization for client.<br />
Scons –ssl – for encrypted data between client and shard servers and between shard servers.<br />
<br />
<b>Intra-Cluster Security</b><br />
<br />
$mongod --dbpath /home/azureuser/data2 --port 27002 --auth --replSet z --keyFile /home/azureuser/data/keyfile --logpath /home/azureuser/data2/data.log –fork<br />
<div>
<br /></div>
</div>

  </div><a class="u-url" href="/vrexploring/2019/04/09/security-in-mongo.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/vrexploring/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">VR Exploring</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">VR Exploring</li><li><a class="u-email" href="mailto:vrexploring@gmail.com">vrexploring@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/vemarahub"><svg class="svg-icon"><use xlink:href="/vrexploring/assets/minima-social-icons.svg#github"></use></svg> <span class="username">vemarahub</span></a></li><li><a href="https://www.twitter.com/vrexploring"><svg class="svg-icon"><use xlink:href="/vrexploring/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">vrexploring</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>A space where i share my thoughts and experiences about technology , science, life, family and everything in between.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
