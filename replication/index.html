<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Replication | VR Exploring</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Replication" />
<meta name="author" content="Rajesh Nair" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Follow the below steps to configure MySQL Replication in the Linux servers : 1. For VM systems firewall has to be disabled&nbsp; to enable replication connections between the servers cat /etc/selinux/config set&nbsp;SELINUX = disabled 2. Check selinux status by using: sestatus 3. Stop and disable firewalld systemctl stop firewalld systemctl disable firewalld 4. Set hostname for the two VMs to identify uniquely hostnamectl set-hostname db01 hostnamectl set-hostname db02 5. Edit hosts file to add ip and hostname /etc/hosts &lt;ip&gt; db01 &lt;ip&gt; db02 6. Follow the below steps on master and slave as below: ON MASTER -------------- 7. grant slave access to a new replication user mysql -u root -p prompt master&gt; grant replication slave on *.* to &#39;repadmin&#39;@&#39;%&#39; identified by &#39;!@#Ilg007&#39;;&nbsp; flush privileges; 8. Ediy my.cnf file to add replication parameters on Master vi /etc/my.cnf #Replication Parameters bind-address=0.0.0.0 server-id=1 log-bin=mysql-bin binlog-ignore-db=&quot;mysql&quot; 9. Restart mysqld server systemctl stop mysqld systemctl start mysqld tail /var/log/mysqld.log 10. Dump database from master to copy to slave to provode initial sync mysqldump -u root -p --databases publications &gt; publications.sql scp publications.sql db02:/root ON SLAVE ----------- 11. ssh to second VM from first VM and set prompt as slave ssh db02 prompt slave&gt; 12. Edit my.cnf file to add replication parameters and restart mysqld server vi /etc/my.cnf #Replication parameters bind-address=0.0.0.0 server-id=2 #master-host=db01 #master-user=repadmin #master-password=!@#Ilg007 #master-connect-retry=60 systemctl stop mysqld systemctl start mysqld 13. Restore th master database to slave after scp slave&gt;create database publications; mysql -u root -p -D publications &lt; publications.sql 14. Use the below query in mysql prompt setup replication parameters change master to master_host=&#39;db01&#39;, master_port=3306,master_user=&#39;repadmin&#39;,master_password=&#39;!@#Ilg007&#39;; 15. Start slave on MySQL prompt start slave; 16. Check slave status to see of syncing has started on slave show slave status; 17. Login to master and create a new table and add entries and check in slave if it is getting added through replication Some other commands used are: flush logs show binlog events show master status show master logs reset master reset slave The logs which are used for replication are called binary logs in master and relay logs on slave. replication user account will pull up bin logs and write to slave relay logs for replication to take&nbsp; place.Multiple binary files created one after another when size reaches. When a statement is about to finish executing ,&nbsp;it writes an entry to the end of the binary log and sends the statement parser a notification that it has completed statement. Types of replication Statement Based - (SBR) - whichever sql statements executed in master is executed in slave as well using bin logs Row Based- where each row updated in master is copied to slave row by row Mix - This is mixed type of replication which contains both statement based and row based replication. Replication Topology -Master to multiple replica -Master to Master in active active mode -Master to Master with slaves -Does not support multisource replication -Ring Replication -Master distribution master with replicas Percona tool kit can be used for managing replication in MySQL servers.Some commands for percona tool are: percona tool kit - pt-table-checksum pt-table-checksum --replica-set pt-table-sync" />
<meta property="og:description" content="Follow the below steps to configure MySQL Replication in the Linux servers : 1. For VM systems firewall has to be disabled&nbsp; to enable replication connections between the servers cat /etc/selinux/config set&nbsp;SELINUX = disabled 2. Check selinux status by using: sestatus 3. Stop and disable firewalld systemctl stop firewalld systemctl disable firewalld 4. Set hostname for the two VMs to identify uniquely hostnamectl set-hostname db01 hostnamectl set-hostname db02 5. Edit hosts file to add ip and hostname /etc/hosts &lt;ip&gt; db01 &lt;ip&gt; db02 6. Follow the below steps on master and slave as below: ON MASTER -------------- 7. grant slave access to a new replication user mysql -u root -p prompt master&gt; grant replication slave on *.* to &#39;repadmin&#39;@&#39;%&#39; identified by &#39;!@#Ilg007&#39;;&nbsp; flush privileges; 8. Ediy my.cnf file to add replication parameters on Master vi /etc/my.cnf #Replication Parameters bind-address=0.0.0.0 server-id=1 log-bin=mysql-bin binlog-ignore-db=&quot;mysql&quot; 9. Restart mysqld server systemctl stop mysqld systemctl start mysqld tail /var/log/mysqld.log 10. Dump database from master to copy to slave to provode initial sync mysqldump -u root -p --databases publications &gt; publications.sql scp publications.sql db02:/root ON SLAVE ----------- 11. ssh to second VM from first VM and set prompt as slave ssh db02 prompt slave&gt; 12. Edit my.cnf file to add replication parameters and restart mysqld server vi /etc/my.cnf #Replication parameters bind-address=0.0.0.0 server-id=2 #master-host=db01 #master-user=repadmin #master-password=!@#Ilg007 #master-connect-retry=60 systemctl stop mysqld systemctl start mysqld 13. Restore th master database to slave after scp slave&gt;create database publications; mysql -u root -p -D publications &lt; publications.sql 14. Use the below query in mysql prompt setup replication parameters change master to master_host=&#39;db01&#39;, master_port=3306,master_user=&#39;repadmin&#39;,master_password=&#39;!@#Ilg007&#39;; 15. Start slave on MySQL prompt start slave; 16. Check slave status to see of syncing has started on slave show slave status; 17. Login to master and create a new table and add entries and check in slave if it is getting added through replication Some other commands used are: flush logs show binlog events show master status show master logs reset master reset slave The logs which are used for replication are called binary logs in master and relay logs on slave. replication user account will pull up bin logs and write to slave relay logs for replication to take&nbsp; place.Multiple binary files created one after another when size reaches. When a statement is about to finish executing ,&nbsp;it writes an entry to the end of the binary log and sends the statement parser a notification that it has completed statement. Types of replication Statement Based - (SBR) - whichever sql statements executed in master is executed in slave as well using bin logs Row Based- where each row updated in master is copied to slave row by row Mix - This is mixed type of replication which contains both statement based and row based replication. Replication Topology -Master to multiple replica -Master to Master in active active mode -Master to Master with slaves -Does not support multisource replication -Ring Replication -Master distribution master with replicas Percona tool kit can be used for managing replication in MySQL servers.Some commands for percona tool are: percona tool kit - pt-table-checksum pt-table-checksum --replica-set pt-table-sync" />
<link rel="canonical" href="https://vemarahub.github.io/vrexploring/replication/" />
<meta property="og:url" content="https://vemarahub.github.io/vrexploring/replication/" />
<meta property="og:site_name" content="VR Exploring" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-03-08T11:15:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Replication" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Rajesh Nair"},"dateModified":"2019-03-08T11:15:00+00:00","datePublished":"2019-03-08T11:15:00+00:00","description":"Follow the below steps to configure MySQL Replication in the Linux servers : 1. For VM systems firewall has to be disabled&nbsp; to enable replication connections between the servers cat /etc/selinux/config set&nbsp;SELINUX = disabled 2. Check selinux status by using: sestatus 3. Stop and disable firewalld systemctl stop firewalld systemctl disable firewalld 4. Set hostname for the two VMs to identify uniquely hostnamectl set-hostname db01 hostnamectl set-hostname db02 5. Edit hosts file to add ip and hostname /etc/hosts &lt;ip&gt; db01 &lt;ip&gt; db02 6. Follow the below steps on master and slave as below: ON MASTER -------------- 7. grant slave access to a new replication user mysql -u root -p prompt master&gt; grant replication slave on *.* to &#39;repadmin&#39;@&#39;%&#39; identified by &#39;!@#Ilg007&#39;;&nbsp; flush privileges; 8. Ediy my.cnf file to add replication parameters on Master vi /etc/my.cnf #Replication Parameters bind-address=0.0.0.0 server-id=1 log-bin=mysql-bin binlog-ignore-db=&quot;mysql&quot; 9. Restart mysqld server systemctl stop mysqld systemctl start mysqld tail /var/log/mysqld.log 10. Dump database from master to copy to slave to provode initial sync mysqldump -u root -p --databases publications &gt; publications.sql scp publications.sql db02:/root ON SLAVE ----------- 11. ssh to second VM from first VM and set prompt as slave ssh db02 prompt slave&gt; 12. Edit my.cnf file to add replication parameters and restart mysqld server vi /etc/my.cnf #Replication parameters bind-address=0.0.0.0 server-id=2 #master-host=db01 #master-user=repadmin #master-password=!@#Ilg007 #master-connect-retry=60 systemctl stop mysqld systemctl start mysqld 13. Restore th master database to slave after scp slave&gt;create database publications; mysql -u root -p -D publications &lt; publications.sql 14. Use the below query in mysql prompt setup replication parameters change master to master_host=&#39;db01&#39;, master_port=3306,master_user=&#39;repadmin&#39;,master_password=&#39;!@#Ilg007&#39;; 15. Start slave on MySQL prompt start slave; 16. Check slave status to see of syncing has started on slave show slave status; 17. Login to master and create a new table and add entries and check in slave if it is getting added through replication Some other commands used are: flush logs show binlog events show master status show master logs reset master reset slave The logs which are used for replication are called binary logs in master and relay logs on slave. replication user account will pull up bin logs and write to slave relay logs for replication to take&nbsp; place.Multiple binary files created one after another when size reaches. When a statement is about to finish executing ,&nbsp;it writes an entry to the end of the binary log and sends the statement parser a notification that it has completed statement. Types of replication Statement Based - (SBR) - whichever sql statements executed in master is executed in slave as well using bin logs Row Based- where each row updated in master is copied to slave row by row Mix - This is mixed type of replication which contains both statement based and row based replication. Replication Topology -Master to multiple replica -Master to Master in active active mode -Master to Master with slaves -Does not support multisource replication -Ring Replication -Master distribution master with replicas Percona tool kit can be used for managing replication in MySQL servers.Some commands for percona tool are: percona tool kit - pt-table-checksum pt-table-checksum --replica-set pt-table-sync","headline":"Replication","mainEntityOfPage":{"@type":"WebPage","@id":"https://vemarahub.github.io/vrexploring/replication/"},"url":"https://vemarahub.github.io/vrexploring/replication/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/vrexploring/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://vemarahub.github.io/vrexploring/feed.xml" title="VR Exploring" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/vrexploring/">VR Exploring</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/vrexploring/about/">About</a><a class="page-link" href="/vrexploring/">Home</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Replication</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2019-03-08T11:15:00+00:00" itemprop="datePublished">Mar 8, 2019
      </time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Rajesh Nair</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <div dir="ltr" style="text-align: left;" trbidi="on">
<br />
<br />
Follow the below steps to configure MySQL Replication in the Linux servers :<br />
<br />
1. For VM systems firewall has to be disabled&nbsp; to enable replication connections between the servers<br />
<b>cat /etc/selinux/config</b><br />
<b>set&nbsp;SELINUX = disabled</b><br />
<b><br /></b>2. Check selinux status by using:<br />
<b>sestatus</b><br />
<br />
3. Stop and disable firewalld<br />
<b>systemctl stop firewalld</b><br />
<b>systemctl disable firewalld</b><br />
<b><br /></b>4. Set hostname for the two VMs to identify uniquely<br />
<b>hostnamectl set-hostname db01</b><br />
<b>hostnamectl set-hostname db02</b><br />
<b><br /></b>5. Edit hosts file to add ip and hostname<br />
<b>/etc/hosts</b><br />
<b>&lt;ip&gt; db01</b><br />
<b>&lt;ip&gt; db02</b><br />
<b><br /></b>6. Follow the below steps on master and slave as below:<br />
<br />
<b>ON MASTER</b><br />
<b>--------------</b><br />
7. grant slave access to a new replication user<br />
<b>mysql -u root -p</b><br />
<b>prompt master&gt;</b><br />
<b>grant replication slave on *.* to 'repadmin'@'%' identified by '!@#Ilg007';&nbsp;</b><br />
<b>flush privileges;</b><br />
<br />
8. Ediy my.cnf file to add replication parameters on Master<br />
<b>vi /etc/my.cnf</b><br />
<b>#Replication Parameters</b><br />
<b>bind-address=0.0.0.0</b><br />
<b>server-id=1</b><br />
<b>log-bin=mysql-bin</b><br />
<b>binlog-ignore-db="mysql"</b><br />
<br />
9. Restart mysqld server<br />
<b>systemctl stop mysqld</b><br />
<b>systemctl start mysqld</b><br />
<b><br /></b><b>tail /var/log/mysqld.log</b><br />
<br />
10. Dump database from master to copy to slave to provode initial sync<br />
<b>mysqldump -u root -p --databases publications &gt; publications.sql</b><br />
<b>scp publications.sql db02:/root</b><br />
<br />
<b>ON SLAVE</b><br />
<b>-----------</b><br />
<b><br /></b>11. ssh to second VM from first VM and set prompt as slave<br />
<b>ssh db02</b><br />
<b>prompt slave&gt;</b><br />
<br />
12. Edit my.cnf file to add replication parameters and restart mysqld server<br />
<b>vi /etc/my.cnf</b><br />
<br />
<b>#Replication parameters</b><br />
<b>bind-address=0.0.0.0</b><br />
<b>server-id=2</b><br />
<b>#master-host=db01</b><br />
<b>#master-user=repadmin</b><br />
<b>#master-password=!@#Ilg007</b><br />
<b>#master-connect-retry=60</b><br />
<b><br /></b><b>systemctl stop mysqld</b><br />
<b>systemctl start mysqld</b><br />
<br />
13. Restore th master database to slave after scp<br />
<b>slave&gt;create database publications;</b><br />
<b>mysql -u root -p -D publications &lt; publications.sql</b><br />
<br />
14. Use the below query in mysql prompt setup replication parameters<br />
<b>change master to master_host='db01',</b><br />
<b>master_port=3306,master_user='repadmin',master_password='!@#Ilg007';</b><br />
<br />
15. Start slave on MySQL prompt<br />
<b>start slave;</b><br />
<br />
16. Check slave status to see of syncing has started on slave<br />
<b>show slave status;</b><br />
<b><br /></b>17. Login to master and create a new table and add entries and check in slave if it is getting added through replication<br />
<br />
Some other commands used are:<br />
flush logs<br />
show binlog events<br />
show master status<br />
show master logs<br />
reset master<br />
reset slave<br />
<h4 style="text-align: left;">
<div style="font-weight: 400;">
The logs which are used for replication are called binary logs in master and relay logs on slave.</div>
<div style="font-weight: 400;">
replication user account will pull up bin logs and write to slave relay logs for replication to take&nbsp;</div>
<div style="font-weight: 400;">
place.Multiple binary files created one after another when size reaches.</div>
<div style="font-weight: 400;">
<br /></div>
<div style="font-weight: 400;">
When a statement is about to finish executing ,&nbsp;it writes an entry to the end of the binary log and sends the statement parser a notification that it has completed statement.</div>
</h4>
<div>
<br /></div>
<h4 style="text-align: left;">
<b></b><b>Types of replication</b></h4>
<br />
<b>Statement Based</b> - (SBR) - whichever sql statements executed in master is executed in slave as well using bin logs<br />
<b>Row Based</b>- where each row updated in master is copied to slave row by row<br />
<b>Mix - </b>This is mixed type of replication which contains both statement based and row based replication.<br />
<br />
<br />
<h4 style="text-align: left;">
<b>Replication Topology</b></h4>
-Master to multiple replica<br />
-Master to Master in active active mode<br />
-Master to Master with slaves<br />
-Does not support multisource replication<br />
-Ring Replication<br />
-Master distribution master with replicas<br />
<br />
Percona tool kit can be used for managing replication in MySQL servers.Some commands for percona tool are:<br />
percona tool kit - pt-table-checksum<br />
pt-table-checksum --replica-set<br />
pt-table-sync</div>

  </div><a class="u-url" href="/vrexploring/replication/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/vrexploring/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">VR Exploring</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">VR Exploring</li><li><a class="u-email" href="mailto:vrexploring@gmail.com">vrexploring@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/vemarahub"><svg class="svg-icon"><use xlink:href="/vrexploring/assets/minima-social-icons.svg#github"></use></svg> <span class="username">vemarahub</span></a></li><li><a href="https://www.twitter.com/vrexploring"><svg class="svg-icon"><use xlink:href="/vrexploring/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">vrexploring</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>A space where i share my thoughts and experiences about technology , science, life, family and everything in between.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
