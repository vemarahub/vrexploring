<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Shell Script - Progress Log Parsing | VR Exploring</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Shell Script - Progress Log Parsing" />
<meta name="author" content="Rajesh Nair" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Script : Shell script to parse the progress database log file Script Name: dblogparse.sh Script Function:&nbsp;Script classifies the messages into 4 categories (groups): &nbsp;1. Database startup parameters (&quot;Parameters&quot; group); &nbsp;2. Logins/logouts messages (&quot;Logins&quot; group); &nbsp;3. Informational messages that can be ignored (&quot;Ignore&quot; group); &nbsp;4. Any messages that do not belong to the above groups (&quot;Remains&quot; group). &nbsp;&nbsp;Script Usage: ./dblogparse.sh &lt; log path &gt; [-f] [-e] [-r] [-p] [-s] [-l] [-m] [-h] -f Show the fatal errors (marked as \&quot;F\&quot; in Progress log files); -e Show the system errors (the messages with words \&quot;SYSTEM ERROR:\&quot;); -r Show the remained messages (except \&quot;Logins\&quot;, \&quot;Params\&quot; and \&quot;Ignore\&quot; groups); -p Show the startup parameters of Progress multi-user sessions (\&quot;Params\&quot; group); -s Summary: the number of messages per message numbers (and without numbers); -l Report the statistics for the messages in the \&quot;Logins\&quot; group; -m ${UL}Num${UU} Display the description of Progress message number; -h|-help Display this help. Code: #!/bin/sh ------------------------------------ THIS=`basename $0` Usage() { # Bold/unbold terminal codes: # BD=`tput smso` # Enter standout mode (bold on rxvt) UB=`tput rmso` # Exit standout mode # Underline mode: UL=`tput smul` # Begin underline mode UU=`tput rmul` # Exit underline mode &nbsp; echo &quot;$THIS Release $Release Usage: $BD$THIS$UB [${UL}File${UU} ...] [${UL}Options${UU}] or tail -100000 ${UL}File${UU} | ${BD}$THIS$UB [${UL}Options${UU}] where the options are: ${UL}File${UU}(s) are the log files of Progress databases; -f Show the fatal errors (marked as \&quot;F\&quot; in Progress log files); -e Show the system errors (the messages with words \&quot;SYSTEM ERROR:\&quot;); -r Show the remained messages (except \&quot;Logins\&quot;, \&quot;Params\&quot; and \&quot;Ignore\&quot; groups); -p Show the startup parameters of Progress multi-user sessions (\&quot;Params\&quot; group); -s Summary: the number of messages per message numbers (and without numbers); -l Report the statistics for the messages in the \&quot;Logins\&quot; group; The above options can be concatenated. Example: dblog -prs ${UL}Number${UU} - number of last digits to cut from timestamps for \&quot;Logins\&quot; statistics; -m ${UL}Num${UU} Display the description of Progress message number; -h|-help Display this help. # echo &nbsp; exit } # Usage() #------------------------------------------------------------------------------ # LogParser() { # Creates statistics of the errors or login/logout messages in db log file. # LogParser reads the messages from a standard input stream (stdin). # # It processes approximately 50,000 lines per sec on CPU @ 2.40 GHz. # # Number of messages added by Progress versions: # Ver&nbsp; &nbsp;Date&nbsp; &nbsp; &nbsp; &nbsp;Msg # Range Added # 10.2B 2009/12/14 12419-15762 3344 # 11.0&nbsp; 2011/12/02 15763-16640&nbsp; 878 # 11.1&nbsp; 2012/06/15 16641-16738&nbsp; &nbsp;98 # 11.2&nbsp; 2013/02/13 16739-17035&nbsp; 296 # 11.3&nbsp; 2013/07/17 17036-17338&nbsp; 302 # 11.4&nbsp; 2014/07/25 17339-17759&nbsp; 421 # 11.5&nbsp; 2014/12/05 17760-17919&nbsp; 160 # 11.6&nbsp; 2015/10/16 17920-18388&nbsp; 468 # 11.7A 2016/03/25 18389-18505&nbsp; 117 # # Only 200-300 messages used to be written to db log. # Options: # # -f Show the fatal errors (marked as &quot;F&quot; in Progress log files) #&nbsp; &nbsp; They are the messages with %g or %G tags in promsgs file. #&nbsp; &nbsp; The tags are telling to the process to terminate processing; # -e Show the system errors (the messages with words &quot;SYSTEM ERROR:&quot;); # -r Show the remained messages (except &quot;Logins&quot;, &quot;Params&quot; and &quot;Ignore&quot; groups); # -p Show the startup parameters of Progress multi-user sessions (&quot;Params&quot; group); # -s Summary: the number of messages per message numbers (and without numbers); # -l Report the statistics for the messages in the &quot;Logins&quot; group; # CutTimeDigits - the number of the digits in timestamps to cut off # while creating the login/logout statistics. # Range of CutTimeDigits values: 0-8 # 0&nbsp; &nbsp;= 2016/05/12@12:34:56 = per seconds # 1&nbsp; &nbsp;= 2016/05/12@12:34:5&nbsp; = per 10 seconds # 2,3 = 2016/05/12@12:34:&nbsp; &nbsp;= per minutes # 4&nbsp; &nbsp;= 2016/05/12@12:3&nbsp; &nbsp; &nbsp;= per 10 minutes # 5,6 = 2016/05/12@12:&nbsp; &nbsp; &nbsp; = per hours # 7&nbsp; &nbsp;= 2016/05/12@1&nbsp; &nbsp; &nbsp; &nbsp; = per 10 or 4 hours # 8&nbsp; &nbsp;= 2016/05/12@&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= per days &nbsp; CutTimeDigits=0 # Default is per second statistics. &nbsp; Logins=&quot;no&quot; &nbsp; Params=&quot;no&quot; &nbsp; Fatal=&quot;no&quot; &nbsp; Errors=&quot;no&quot; &nbsp; Remains=&quot;no&quot; &nbsp; Summary=&quot;no&quot; &nbsp; Options=&quot;&quot; &nbsp; while [ $# -gt 0 ] &nbsp; do # CutTimeDigits: &nbsp; &nbsp; case &quot;$1&quot; in &nbsp; &nbsp; &nbsp; [0-9]*)&nbsp; CutTimeDigits=$1; shift; continue;; &nbsp; &nbsp; esac # Params: &nbsp; &nbsp; case &quot;$1&quot; in &nbsp; &nbsp; &nbsp; -*[pP]*) Params=&quot;yes&quot;;&nbsp; Options=&quot;$Options Params&quot;;; &nbsp; &nbsp; esac # Logins: &nbsp; &nbsp; case &quot;$1&quot; in &nbsp; &nbsp; &nbsp; -*[lL]*) Logins=&quot;yes&quot;;&nbsp; Options=&quot;$Options Logins&quot;;; &nbsp; &nbsp; esac # Fatal: &nbsp; &nbsp; case &quot;$1&quot; in &nbsp; &nbsp; &nbsp; -*[fF]*) Fatal=&quot;yes&quot;;&nbsp; &nbsp;Options=&quot;$Options Fatal&quot;;; &nbsp; &nbsp; esac # Errors: &nbsp; &nbsp; case &quot;$1&quot; in &nbsp; &nbsp; &nbsp; -*[eE]*) Errors=&quot;yes&quot;; Options=&quot;$Options Errors&quot;;; &nbsp; &nbsp; esac # Remains: &nbsp; &nbsp; case &quot;$1&quot; in &nbsp; &nbsp; &nbsp; -*[rR]*) Remains=&quot;yes&quot;; Options=&quot;$Options Remains&quot;;; &nbsp; &nbsp; esac # Summary: &nbsp; &nbsp; case &quot;$1&quot; in &nbsp; &nbsp; &nbsp; -*[sS]*) Summary=&quot;yes&quot;; Options=&quot;$Options Summary&quot;;; &nbsp; &nbsp; esac &nbsp; &nbsp; Rest=`echo $1 | tr -d &quot;lLpPeEfFrRsS\-&quot;` &nbsp; &nbsp; if [ &quot;$Rest&quot; ] &nbsp; &nbsp; then &nbsp; &nbsp; &nbsp; echo &quot;LogParser: \&quot;$Rest\&quot; is an unknown option.&quot; &nbsp; &nbsp; &nbsp; exit 1 &nbsp; &nbsp; fi # if Rest &nbsp; &nbsp; shift &nbsp; done&nbsp; # while [ $# -gt 0 ] &nbsp; test $CutTimeDigits -gt 8 &amp;&amp; \ &nbsp; CutTimeDigits=8 # CutTimeDigits=0: 2016/05/12@14:03:52 # CutTimeDigits=1: 2016/05/12@14:03:5 # ... # CutTimeDigits=7: 2016/05/12@1 # CutTimeDigits=8: 2016/05/12@ &nbsp; Options=`echo $Options | \ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;awk &#39;BEGIN {RS=&quot; &quot;} &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {print}&#39; | \ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sort` # Options &nbsp; Options=`echo $Options` &nbsp; echo &quot;LogParser Options: $Options&quot; &nbsp; test &quot;$Logins&quot; = &quot;yes&quot; &amp;&amp; \ &nbsp; case &quot;$CutTimeDigits&quot; in &nbsp; &nbsp; 0)&nbsp; &nbsp;echo &quot;Login statistics per second:&quot;&nbsp; &nbsp; ;; # 2016/05/12@12:34:56 &nbsp; &nbsp; 1)&nbsp; &nbsp;echo &quot;Login statistics per 10 seconds:&quot;;; # 2016/05/12@12:34:5 &nbsp; &nbsp; 2|3) echo &quot;Login statistics per minute:&quot;&nbsp; &nbsp; ;; # 2016/05/12@12:34: &nbsp; &nbsp; 4)&nbsp; &nbsp;echo &quot;Login statistics per 10 minutes:&quot;;; # 2016/05/12@12:3 &nbsp; &nbsp; 5|6) echo &quot;Login statistics per hour:&quot;&nbsp; &nbsp; &nbsp; ;; # 2016/05/12@12: &nbsp; &nbsp; 7)&nbsp; &nbsp;echo &quot;Login statistics per 10 hours:&quot;&nbsp; ;; # 2016/05/12@1 &nbsp; &nbsp; 8)&nbsp; &nbsp;echo &quot;Login statistics per day:&quot;&nbsp; &nbsp; &nbsp; &nbsp;;; # 2016/05/12@ &nbsp; esac # CutTimeDigits &nbsp; TmpFile=${DbLogPrefix:-`basename $0`.$$}.LogParser.tmp &nbsp; awk &#39; &nbsp; &nbsp; BEGIN { &nbsp; &nbsp; &nbsp; NoNum=&quot;(-----)&quot; &nbsp; &nbsp; &nbsp; TmpFile=&quot;&#39;$TmpFile&#39;&quot; &nbsp; &nbsp; &nbsp; TimeSize=19-&#39;$CutTimeDigits&#39; &nbsp; &nbsp; &nbsp; Logins=&quot;&#39;$Logins&#39;&quot; &nbsp; &nbsp; &nbsp; Params=&quot;&#39;$Params&#39;&quot; &nbsp; &nbsp; &nbsp; Fatal=&quot;&#39;$Fatal&#39;&quot; &nbsp; &nbsp; &nbsp; Errors=&quot;&#39;$Errors&#39;&quot; &nbsp; &nbsp; &nbsp; Remains=&quot;&#39;$Remains&#39;&quot; &nbsp; &nbsp; &nbsp; Summary=&quot;&#39;$Summary&#39;&quot; # # &quot;Logins&quot; = the group of the messages related to the activity on User Control Table: # &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(298)&quot;]=&quot;KILL signal received.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(333)&quot;]=&quot;Multi-user session begin.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(334)&quot;]=&quot; session end. (334)&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(451)&quot;]=&quot; session begin for on . (451)&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(452)&quot;]=&quot;Login by on .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(453)&quot;]=&quot;Logout by on .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(562)&quot;]=&quot;HANGUP signal received.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(708)&quot;]=&quot;Userid is now .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(742)&quot;]=&quot;Login usernum , userid , on .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(739)&quot;]=&quot;Logout usernum , userid , on .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(792)&quot;]=&quot;Message received with bad usernum.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(794)&quot;]=&quot;Usernum&nbsp; terminated abnormally.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(795)&quot;]=&quot;Error reading socket= ret= errno=.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(796)&quot;]=&quot;Error writing msg, socket= errno= usernum= disconnected.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(797)&quot;]=&quot;Partial write, socket= msglen= ret= user disconnected.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(1153)&quot;]=&quot;BROKER detects death of server .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(1334)&quot;]=&quot;Rejecting login -- too many users for this server.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(1166)&quot;]=&quot;Server disconnecting user .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2252)&quot;]=&quot;Begin transaction backout.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2253)&quot;]=&quot;Transaction backout completed.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2266)&quot;]=&quot;Expected user received user .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2518)&quot;]=&quot;Started. (APW, BIW, AIW or WDOG)&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2519)&quot;]=&quot;Disconnected. (APW or WDOG)&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2520)&quot;]=&quot;Stopped. (BIW or AIW)&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2268)&quot;]=&quot;Invalid message was received for an attempted login.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2525)&quot;]=&quot;Disconnecting dead server .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2526)&quot;]=&quot;Disconnecting client of dead server .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2527)&quot;]=&quot;Disconnecting dead user .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(4375)&quot;]=&quot;Received signal ; handling as SIGHUP.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(4698)&quot;]=&quot;User count exceeded. Failed attempt to login by on .&quot; #&nbsp; &nbsp; &nbsp;LoginsNum[ &quot;(4732)&quot;]=&quot;Login by on . Pid .&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# DEC/OpenVMS #&nbsp; &nbsp; &nbsp;LoginsNum[ &quot;(4734)&quot;]=&quot;Logout by on . Pid .&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # DEC/OpenVMS &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(5569)&quot;]=&quot;Quiet point request login by on .&quot; # V8.2A &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(5570)&quot;]=&quot;Quiet point request logout&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# V8.2A &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(7129)&quot;]=&quot;Usr set name to .&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V8.3B Dbdes, Aimage new, Aimage list, BACKUP &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(8873)&quot;]=&quot;Login usernum , remote SQL client.&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V9.1B, logout with msg 453 #&nbsp; &nbsp; &nbsp;LoginsNum[&quot;(12092)&quot;]=&quot;User disconnect initiated.&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# V10.1A, Not used &nbsp; &nbsp; &nbsp; LoginsNum[&quot;(12454)&quot;]=&quot;Server has unresolved pending connections(s). Please check port .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&quot;(12455)&quot;]=&quot;Clearing pending connections from server &quot;&nbsp; &nbsp; &nbsp;# V10.2B &nbsp; &nbsp; &nbsp; LoginsNum[&quot;(17961)&quot;]=&quot;User set tty to . (17961)&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V11.6 # # Identify the messages without the numbers by their text pattern: # # PROMON&nbsp; 5: (-----) Login by root. # BACKUP&nbsp; 7: (-----) Login by root. # SQLSRV2 3: (-----) Login by user 2525. Using TCP/IP IPV4 address 192.168.10.162 &nbsp; &nbsp; &nbsp; LoginsMsg[&quot;Login by&quot;]=&quot;(SQL User, PROMON or BACKUP)&quot; &nbsp; &nbsp; &nbsp; LoginsMsg[&quot;Logout by&quot;]=&quot;SQL User (SQLSRV2)&quot; # SQLSRV2 3: (-----) Logout by user 2525. &nbsp; &nbsp; &nbsp; LoginsMsg[&quot;Sending signal to user&quot;]=&quot;(BROKER or PROSHUT)&quot; &nbsp; &nbsp; &nbsp; LoginsMsg[&quot;User disconnect initiated&quot;]=&quot;(PROSHUT)&quot; &nbsp; &nbsp; &nbsp; LoginsMsg[&quot;Received RECONNECT from WTB&quot;]=&quot;(Webspeed user/agent)&quot; # This is an informational message which is sent on behalf of a user. # This message indicates that the user who connected to the database # server is a Webspeed user/agent and that the initial connection # between the WebSpeed broker and agent was completed. &nbsp; &nbsp; &nbsp; LoginsMsg[&quot;Notifying srvr&quot;]=&quot;, conn , to terminate remote user (12093)&quot; # SHUT 2146: (-----) User 7775 disconnect initiated # SHUT 2146: (453)&nbsp; &nbsp;Logout by on batch. # BROKER&nbsp; 0: (-----) Notifying srvr 24, conn 24, to terminate remote user 7775 &lt;== should be (12093) # BROKER&nbsp; 0: (-----) Sending signal 5 to user 7775 # SRV&nbsp; &nbsp; 24: (1166)&nbsp; Server disconnecting user 7775. # # &quot;Ignore&quot; = the group of the informational messages that can be ignored: # # Miscellaneous: # &nbsp; &nbsp; &nbsp; IgnoreNum[&nbsp; &quot;(439)&quot;]=&quot;** Save file named core for analysis by Progress Software Corporation.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(2261)&quot;]=&quot;Sending signal to connected user(s).&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(2263)&quot;]=&quot;Resending shutdown request to user(s).&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(8863)&quot;]=&quot;This broker supports 4GL server groups only.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(8864)&quot;]=&quot;This broker supports SQL server groups only.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(8865)&quot;]=&quot;This broker supports both 4GL and SQL server groups.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(10471)&quot;]=&quot;Database connections have been enabled.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(16869)&quot;]=&quot;Removed shared memory with segment_id: &quot; # # Warnings: # &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5407)&quot;]=&quot;WARNING: -nb exceeded. Automatically increasing from to .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5408)&quot;]=&quot;WARNING: -l exceeded. Automatically increasing from to .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5409)&quot;]=&quot;WARNING: -mmax exceeded. Automatically increasing from to .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5410)&quot;]=&quot;WARNING: -D limit has been exceeded; automatically increasing to .&quot; # # Connection: # &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5644)&quot;]=&quot;Started for using tcp IPV4 address 0.0.0.0, pid .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5645)&quot;]=&quot;This is an additional broker for this protocol.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5646)&quot;]=&quot;Started on port using tcp IPV4 address 0.0.0.0, pid .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5512)&quot;]=&quot;Previous message sent on behalf of user . (5512)&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(14658)&quot;]=&quot;Previous message sent on behalf of user , server pid , broker pid . (5512)&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(10836)&quot;]=&quot;Database connections are not allowed at this time.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(12698)&quot;]=&quot;User Roles: &quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(12699)&quot;]=&quot;Database Options: &quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(15646)&quot;]=&quot;Started on port using tcp, pid .&quot; # # SQLSRV2: Database statistics # &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(10995)&quot;]=&quot;Database statistics () updated for all tables.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(10996)&quot;]=&quot;Database statistics () updated for table .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(10997)&quot;]=&quot;Database statistics () updated by direct user sql statement ().&quot; # # RFUTIL: # &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(3774)&quot;]=&quot;Backup after-image extent and mark it as empty.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(3776)&quot;]=&quot;Backup ai extent and mark it as empty.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(3777)&quot;]=&quot;Switched to ai extent .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(3778)&quot;]=&quot;This is after-image file number since the last AIMAGE BEGIN&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(3789)&quot;]=&quot;Marked after-image extent EMPTY.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(11805)&quot;]=&quot;Unlocking after-image file and locking ALL FULL after-image files beginning with file .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(12074)&quot;]=&quot;The After-image extent was successfully extracted.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(13154)&quot;]=&quot;Marked after-image extent ARCHIVED.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(13199)&quot;]=&quot;After-image extent has been copied to .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(13231)&quot;]=&quot;From this point forward all after-image extents will be archived to .&quot; # # BACKUP: # &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(1074)&quot;]=&quot;Wrote a total of backup blocks using bytes of media.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(1361)&quot;]=&quot;Incremental backup started.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(1362)&quot;]=&quot;Full backup started.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(1363)&quot;]=&quot;Incremental backup successfully completed.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(1364)&quot;]=&quot;Full backup successfully completed.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(1365)&quot;]=&quot;Database copied from .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(1366)&quot;]=&quot;Incremental restore of sequence started.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(1367)&quot;]=&quot;Incremental restore of sequence completed.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(3664)&quot;]=&quot;Incremental backup started.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5459)&quot;]=&quot;Begin backup of Before Image file(s).&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5460)&quot;]=&quot;End backup of Before Image file(s).&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5461)&quot;]=&quot;Begin backup of Data file(s).&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5462)&quot;]=&quot;End backup of Data file(s).&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(6678)&quot;]=&quot;NOTE: Backup media estimates done without database scan.&quot; # V8.3A &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(6680)&quot;]=&quot;Estimate for uncompressed full backup is provided.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(6686)&quot;]=&quot; active blocks out of blocks in will be dumped.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(6688)&quot;]=&quot; BI blocks will be dumped.&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V8.3B &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(6689)&quot;]=&quot;Backup requires&nbsp; blocks ( Mb) of media.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(6699)&quot;]=&quot;Restore would require&nbsp; blocks ( Mb) of media.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(6760)&quot;]=&quot;This backup was taken .&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V8.3B &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(9285)&quot;]=&quot;Backup requires an estimated of media.&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# V9.1C &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(9286)&quot;]=&quot;Restore would require an estimated&nbsp; db blocks using of media.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(12850)&quot;]=&quot;Backup blocks will be written to .&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V10.2B &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(13625)&quot;]=&quot;Wrote a total of backup blocks using of media.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(13786)&quot;]=&quot;This backup was also used to enable after-image on the source database.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(14256)&quot;]=&quot;The Replication Server has been notified that an online backup is about to be performed.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(14258)&quot;]=&quot;The online backup of this database has completed normally.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(15108)&quot;]=&quot;The online backup has finished backing up the BI. The Replication Agent will now begin recovery synchronization followed by normal processing.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(15109)&quot;]=&quot;At Database close the number of live transactions is .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(15321)&quot;]=&quot;Before Image Log Initialisation at block offset .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(15743)&quot;]=&quot;Before Image Log Completion at Block Offset .&quot;&nbsp; &nbsp; &nbsp; # V10.2B &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(16866)&quot;]=&quot;Dumped active BI blocks.&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V11.2 # # Identify the messages without the numbers by their text pattern: # # BROKER&nbsp; 2: (-----) Shared Library Path set to LIBPATH= # &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;Shared Library Path set to&quot;]=&quot;&quot; # SQLSRV2 3: (-----) SQL Server 11.6.01 started, configuration: &quot;dbname.virtualconfig&quot; # SQLSRV2 3: (-----) &quot;/path/to/dbname&quot; started on IPv4 port 1025 for address 0.0.0.0, pid 9568520 (0x00920108). # SQLSRV2 3: (-----) Thread stack size: 1024000 (bytes). # SQLSRV2 3: (-----) DLC from ENVIRONMENT VARIABLE is: /usr/dlc # SQLSRV2 3: (-----) WRKDIR from ENVIRONMENT VARIABLE is: /usr/wrk/ # SQLSRV2 3: (-----) JDKHOME from ENVIRONMENT VARIABLE is: /usr/dlc/jdk # SQLSRV2 3: (-----) JREHOME from ENVIRONMENT VARIABLE is: /usr/dlc/jdk/jre # SQLSRV2 3: (-----) CLASSPATH from DEFAULT is: # SQLSRV2 3: (-----) PROSQL_LOCKWAIT_TIMEOUT value is: 5 seconds &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;started, configuration:&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;started on port for address pid&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;Thread stack size:&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;DLC from ENVIRONMENT VARIABLE is:&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;WRKDIR from ENVIRONMENT VARIABLE is:&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;JDKHOME from ENVIRONMENT VARIABLE is:&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;JREHOME from ENVIRONMENT VARIABLE is:&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;CLASSPATH from DEFAULT is:&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;PROSQL_LOCKWAIT_TIMEOUT value is:&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; PrevLogins=&quot;&quot; &nbsp; &nbsp; &nbsp; PrevLoginTime=&quot;&quot; # SunOS can rise the error if the arrays are not &quot;initiated&quot;: # awk: Count is not an array &nbsp; &nbsp; &nbsp; TotalNumCount[&quot;&quot;]=0 &nbsp; &nbsp; &nbsp; TotalMsgCount[&quot;&quot;]=0 &nbsp; &nbsp; &nbsp; LoginNumCount[&quot;&quot;]=0 &nbsp; &nbsp; &nbsp; LoginMsgCount[&quot;&quot;]=0 &nbsp; &nbsp; } # BEGIN # # Skip the lines that do not begin with timestamps # like [2016/05/12@14:03:52.486+0400] #&nbsp; &nbsp; &nbsp; &nbsp;1234567890123456789012345678 # &nbsp; &nbsp; ! /^\[/ {next} # # Lines with timestamps: # &nbsp; &nbsp; { CurrTime=substr($1,2,length($1)-2) # Time without &quot;[]&quot; &nbsp; &nbsp; &nbsp; if(InitTime==&quot;&quot;) InitTime=CurrTime &nbsp; &nbsp; &nbsp; if(PrevTime==&quot;&quot;) PrevTime=CurrTime &nbsp; &nbsp; &nbsp; D=substr(CurrTime,1,11) # Year/Month/Day &nbsp; &nbsp; &nbsp; H=substr(CurrTime,12,2) # Hours &nbsp; &nbsp; &nbsp; M=substr(CurrTime,15,2) # Minutes &nbsp; &nbsp; &nbsp; S=substr(CurrTime,18,2) # Seconds &nbsp; &nbsp; &nbsp; Z=substr(CurrTime,length(CurrTime)-4) # Timezone -0400 &nbsp; &nbsp; } &nbsp; &nbsp; Z ~/^\+/ {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # TZ +0400 &nbsp; &nbsp; &nbsp; H-=substr(Z,2,2)&nbsp; &nbsp; &nbsp; &nbsp; # Hours &nbsp; &nbsp; &nbsp; M-=substr(Z,4,2)&nbsp; &nbsp; &nbsp; &nbsp; # Minutes &nbsp; &nbsp; } # TZ +0400 &nbsp; &nbsp; Z ~/^\-/ {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # TZ -0400 &nbsp; &nbsp; &nbsp; H+=substr(Z,2,2)&nbsp; &nbsp; &nbsp; &nbsp; # Hours &nbsp; &nbsp; &nbsp; M+=substr(Z,4,2)&nbsp; &nbsp; &nbsp; &nbsp; # Minutes &nbsp; &nbsp; } # TZ -0400 # # Article Number: 000064856 # Defect PSC00256028, PSC00257044 # Upgrade to OpenEdge 11.4 or later # A partial fix is included in OpenEdge 11.2.1 and 11.3.x # As a side effect of the fix, messages from signal handlers will always show # as UTC time instead of the database timezone. # # Example: # [2016/05/23@04:11:27.185-0400] P-12 T-1 I ABL 8: (452) Login by user on /dev/pts/4. # [2016/05/23@08:52:07.000+0000] P-12 T-1 I ABL 8: (562) HANGUP signal received. # [2016/05/23@04:52:07.926-0400] P-12 T-1 I ABL 8: (453) Logout by hchen on /dev/pts/4. # # Convert the current time to UTC time to get the correct &quot;Logins&quot; statistics: &nbsp; &nbsp; { if(length(H)==1) H=&quot;0&quot; H &nbsp; &nbsp; &nbsp; if(length(M)==1) M=&quot;0&quot; M &nbsp; &nbsp; &nbsp; if(length(M)==1) S=&quot;0&quot; S &nbsp; &nbsp; &nbsp; CurrLogins=D H &quot;:&quot; M &quot;:&quot; S &nbsp; &nbsp; &nbsp; CurrLogins=substr(CurrLogins,1,TimeSize) # TimeSize=19 = no cuts &nbsp; &nbsp; } # Timestamps # # Logins/logouts statistics report: # &nbsp; &nbsp; Logins==&quot;yes&quot; &amp;&amp; PrevLogins!=CurrLogins { &nbsp; &nbsp; &nbsp; for(Num in LoginNumCount) if(LoginNumCount[Num]&gt;0) &nbsp; &nbsp; &nbsp; { # Time: 2016/05/12@14:03:52.486+0400 #&nbsp; &nbsp; &nbsp; &nbsp;1234567890123456789012345678 # &nbsp; &nbsp; &nbsp; &nbsp; printf&quot;%10s %8s %8s %4d %7s %s\n&quot;,\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(PrevLoginTime,1,10),\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(PrevLoginTime,12),\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(LastLoginTime,12),\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginNumCount[Num],\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Num,\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginsNum[Num] # Either set to zero or delete an element of the array - any option that will work: &nbsp; &nbsp; &nbsp; &nbsp; LoginNumCount[Num]=0 &nbsp; &nbsp; &nbsp; &nbsp; delete LoginNumCount[Num] &nbsp; &nbsp; &nbsp; } # for Num in LoginNumCount &nbsp; &nbsp; &nbsp; for(Msg in LoginMsgCount) if(LoginMsgCount[Msg]&gt;0) { &nbsp; &nbsp; &nbsp; &nbsp; printf&quot;%10s %8s %8s %4d %7s %s\n&quot;,\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(PrevLoginTime,1,10),\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(PrevLoginTime,12),\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(LastLoginTime,12),\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginMsgCount[Msg],\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NoNum,\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Msg &quot; &quot; LoginsMsg[Msg] # Either set to zero or delete an element of the array - any option that will work: &nbsp; &nbsp; &nbsp; &nbsp; LoginMsgCount[Msg]=0 &nbsp; &nbsp; &nbsp; &nbsp; delete LoginMsgCount[Msg] &nbsp; &nbsp; &nbsp; } # for Msg in LoginMsgCount &nbsp; &nbsp; &nbsp; PrevLoginTime=&quot;&quot; &nbsp; &nbsp; &nbsp; PrevLogins=CurrLogins &nbsp; &nbsp; } # Logins==&quot;yes&quot; # # Msg number is column 7 if there is a space between user type and user number: # [2016/05/12@14:03:52.486+0400] P-1 T-1 I ABL 10: (452) Login by root on batch. # # Msg number is column 6 if there is no space between user type and user number: # [2016/04/05@06:00:23.102+0600] P-2 T-1 I RFUTI1312: (452) Login by root on batch. # &nbsp; &nbsp; { Num=&quot;&quot; &nbsp; &nbsp; &nbsp; for(Col=6;Col&lt;=7;Col++) if($Col ~ /^\([0-9]*-*\)$/) { &nbsp; &nbsp; &nbsp; &nbsp; Num=$Col &nbsp; &nbsp; &nbsp; &nbsp; break &nbsp; &nbsp; &nbsp; } # for Col &nbsp; &nbsp; &nbsp; if(Num==&quot;&quot;) next # # Cleaning a message: remove any word containing a digit. # &nbsp; &nbsp; &nbsp; Msg=$(Col+1) &nbsp; &nbsp; &nbsp; for(i=Col+2;i&lt;=NF;i++) if($i !~/[0-9]/) Msg=Msg &quot; &quot; $i &nbsp; &nbsp; } # # Messages without numbers: # &nbsp; &nbsp; Num==NoNum { # # Ignore the block dumps (dont count them in the Summary): # (-----) 1fd0:&nbsp; 652d 5883 4e53 5056 0000 2565 2d74 7970 # &nbsp; &nbsp; &nbsp; if(NF==Col+9 &amp;&amp; $(Col+1) ~ /^[0-1]/ &amp;&amp; $(Col+1) ~ /:$/) next # Summary: &nbsp; &nbsp; &nbsp; TotalMsgCount[Msg]++ # Fatal: &nbsp; &nbsp; &nbsp; if($4==&quot;F&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; FatalCount++ &nbsp; &nbsp; &nbsp; &nbsp; if(Fatal==&quot;yes&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; &nbsp; &nbsp; } # if Fatal &nbsp; &nbsp; &nbsp; } # if &quot;F&quot; # Errors: &nbsp; &nbsp; &nbsp; if(Msg ~ /SYSTEM ERROR: /) { &nbsp; &nbsp; &nbsp; &nbsp; ErrorsCount++ &nbsp; &nbsp; &nbsp; &nbsp; if(Errors==&quot;yes&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; &nbsp; &nbsp; } # if Errors &nbsp; &nbsp; &nbsp; } # if SYSTEM ERROR: &nbsp; &nbsp; &nbsp; for(Pattern in IgnoreMsg) if(index(Msg,Pattern)&gt;0) next &nbsp; &nbsp; &nbsp; for(Pattern in LoginsMsg) if(index(Msg,Pattern)&gt;0) { &nbsp; &nbsp; &nbsp; &nbsp; LoginMsgCount[Pattern]++ &nbsp; &nbsp; &nbsp; &nbsp; if(PrevLoginTime==&quot;&quot;) &nbsp; &nbsp; &nbsp; &nbsp; PrevLoginTime=CurrTime &nbsp; &nbsp; &nbsp; &nbsp; LastLoginTime=CurrTime &nbsp; &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; &nbsp; } # LoginsMsg &nbsp; &nbsp; &nbsp; if(Startup==&quot;yes&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; if(Params==&quot;yes&quot;) print &nbsp; &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; &nbsp; } # if Startup &nbsp; &nbsp; &nbsp; RemainsCount++ &nbsp; &nbsp; &nbsp; if(Remains==&quot;yes&quot;) print &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; } #&nbsp; Messages without numbers # # The numbered messages: # # Summary: &nbsp; &nbsp; { TotalNumCount[Num]++ &nbsp; &nbsp; &nbsp; Example[Num]=Msg # Fatal: &nbsp; &nbsp; &nbsp; if($4==&quot;F&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; FatalCount++ &nbsp; &nbsp; &nbsp; &nbsp; if(Fatal==&quot;yes&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; &nbsp; &nbsp; } # if Fatal &nbsp; &nbsp; &nbsp; } # if &quot;F&quot; # Errors: &nbsp; &nbsp; &nbsp; if(Msg ~ /SYSTEM ERROR: /) { &nbsp; &nbsp; &nbsp; &nbsp; ErrorsCount++ &nbsp; &nbsp; &nbsp; &nbsp; if(Errors==&quot;yes&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; &nbsp; &nbsp; } # if Errors &nbsp; &nbsp; &nbsp; } # if SYSTEM ERROR: # # &quot;Params&quot; group: # # BROKER&nbsp; 0: (333)&nbsp; &nbsp;Multi-user session begin. # BROKER&nbsp; 0: (4234)&nbsp; Progress OpenEdge Release on . # BROKER&nbsp; 0: (10471) Database connections have been enabled. # PROLOG&nbsp; 5: (12684) prolog log file truncation . (12684) # &nbsp; &nbsp; &nbsp; if(Num==&quot;(333)&quot;)&nbsp; &nbsp;Startup=&quot;yes&quot; &nbsp; &nbsp; &nbsp; if(Num==&quot;(4234)&quot;)&nbsp; Startup=&quot;yes&quot; &nbsp; &nbsp; &nbsp; if(Num==&quot;(10471)&quot;) Startup=&quot;no&quot; &nbsp; &nbsp; &nbsp; if($5!=&quot;BROKER&quot; &amp;&amp; $5!=&quot;PROLOG&quot;) Startup=&quot;no&quot; &nbsp; &nbsp; &nbsp; for(Pattern in IgnoreNum) if(Num==Pattern) next &nbsp; &nbsp; &nbsp; for(Pattern in LoginsNum) if(Num==Pattern) { &nbsp; &nbsp; &nbsp; &nbsp; LoginNumCount[Pattern]++ &nbsp; &nbsp; &nbsp; &nbsp; if(PrevLoginTime==&quot;&quot;) &nbsp; &nbsp; &nbsp; &nbsp; PrevLoginTime=CurrTime &nbsp; &nbsp; &nbsp; &nbsp; LastLoginTime=CurrTime &nbsp; &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; &nbsp; } # LoginsNum &nbsp; &nbsp; &nbsp; if(Startup==&quot;yes&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; if(Params==&quot;yes&quot;)&nbsp; print &nbsp; &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; &nbsp; } # if Startup &nbsp; &nbsp; &nbsp; RemainsCount++ &nbsp; &nbsp; &nbsp; if(Remains==&quot;yes&quot;) print &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; } # Numbered messages &nbsp; &nbsp; END { &nbsp; &nbsp; &nbsp; if(Logins==&quot;yes&quot;) &nbsp; &nbsp; &nbsp; for(Num in LoginNumCount) if(LoginNumCount[Num]&gt;0) &nbsp; &nbsp; &nbsp; &nbsp; printf&quot;%10s %8s %8s %4d %7s %s\n&quot;,\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(PrevLoginTime,1,10),\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(PrevLoginTime,12),\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(LastLoginTime,12),\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginNumCount[Num],\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Num,\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginsNum[Num] &nbsp; &nbsp; &nbsp; # if Logins &nbsp; &nbsp; &nbsp; Count=0 &nbsp; &nbsp; &nbsp; NumTypeCount=0 &nbsp; &nbsp; &nbsp; MsgTypeCount=0 &nbsp; &nbsp; &nbsp; for(Num in TotalNumCount) if(TotalNumCount[Num]&gt;0) { &nbsp; &nbsp; &nbsp; &nbsp; Count+=TotalNumCount[Num] &nbsp; &nbsp; &nbsp; &nbsp; NumTypeCount++ &nbsp; &nbsp; &nbsp; } # for Num if &nbsp; &nbsp; &nbsp; for(Msg in TotalMsgCount) if(TotalMsgCount[Msg]&gt;0) { &nbsp; &nbsp; &nbsp; &nbsp; Count+=TotalMsgCount[Msg] &nbsp; &nbsp; &nbsp; &nbsp; MsgTypeCount++ &nbsp; &nbsp; &nbsp; } # for Msg if &nbsp; &nbsp; &nbsp; printf&quot;\nProcessed %d lines, %d messages with timestamps\n&quot;,NR,Count &nbsp; &nbsp; &nbsp; printf&quot;from %s\n&quot;,InitTime &nbsp; &nbsp; &nbsp; printf&quot;&nbsp; to %s\n&quot;,CurrTime &nbsp; &nbsp; &nbsp; printf&quot;Numbered messages: %d, without numbers: %d\n&quot;,NumTypeCount,MsgTypeCount &nbsp; &nbsp; &nbsp; if(Fatal!=&quot;yes&quot;)&nbsp; RemainsCount-=FatalCount &nbsp; &nbsp; &nbsp; if(Errors!=&quot;yes&quot;) RemainsCount-=ErrorsCount &nbsp; &nbsp; &nbsp; printf&quot;System errors: %d, fatal errors: %d, \&quot;remains\&quot;: %d\n&quot;,ErrorsCount,FatalCount,RemainsCount &nbsp; &nbsp; &nbsp; if(&quot;&#39;$Summary&#39;&quot;!=&quot;yes&quot;) exit # # Replace the examples by the known message descriptions: # &nbsp; &nbsp; &nbsp; for(Num in LoginsNum) Example[Num]=LoginsNum[Num] &nbsp; &nbsp; &nbsp; for(Num in IgnoreNum) Example[Num]=IgnoreNum[Num] &nbsp; &nbsp; &nbsp; printf&quot;\nSummary per the message numbers:\n&quot; &nbsp; &nbsp; &nbsp; for(Num in TotalNumCount) if(TotalNumCount[Num]&gt;0) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; printf&quot;%6d %7s %s\n&quot;,TotalNumCount[Num],Num,Example[Num] &gt;TmpFile &nbsp; &nbsp; &nbsp; for(Msg in TotalMsgCount) if(TotalMsgCount[Msg]&gt;0) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; printf&quot;%6d %7s %s\n&quot;,TotalMsgCount[Msg],NoNum,Msg &gt;TmpFile &nbsp; &nbsp; &nbsp; close(TmpFile) &nbsp; &nbsp; } # END &nbsp; &#39; - &nbsp; test -f $TmpFile &amp;&amp; \ &nbsp; cat&nbsp; &nbsp; &nbsp;$TmpFile | sort -n -r &amp;&amp; \ &nbsp; rm&nbsp; &nbsp;-f $TmpFile } # LogParser() #------------------------------------------------------------------------------ # Msg() { &nbsp; Num=$1 &nbsp; test -z &quot;$DLC&quot; &amp;&amp; \ &nbsp; echo &quot;Progress DLC environment variable variable is not set.&quot; &gt;&amp;2 &amp;&amp; \ &nbsp; return &nbsp; if [ ! -f $DLC/prohelp/msgdata/msg1 ] &nbsp; then &nbsp; &nbsp; echo &quot;Progress DLC environment variable may not be set correctly. Set DLC variable to Progress installation directory. Progress DLC setting: $DLC&quot; &gt;&amp;2 &nbsp; &nbsp; return &nbsp; fi &nbsp; test -z &quot;$Num&quot; &amp;&amp; \ &nbsp; echo &quot;You do&#39;t specify the message number.&quot; &gt;&amp;2 &amp;&amp; \ &nbsp; return &nbsp; test $Num -gt 0 2&gt;/dev/null &nbsp; if [ $? -ne 0 ] &nbsp; then &nbsp; &nbsp; echo &quot;Message number ($Num) should be an integer greater than 0.&quot; &gt;&amp;2 &nbsp; &nbsp; return &nbsp; fi &nbsp; i=`expr $Num - 1` &nbsp; i=`expr $i / 50` &nbsp; i=`expr $i + 1` &nbsp; File=$DLC/prohelp/msgdata/msg$i &nbsp; if [ ! -f $File ] &nbsp; then &nbsp; &nbsp; echo &quot;Failed to find $File&quot; &nbsp; &nbsp; echo &quot;$Num seemed too large for current Progress version&quot; &nbsp; &nbsp; cat $DLC/version &nbsp; &nbsp; return &nbsp; fi &gt;&amp;2 &nbsp; test ! -r $File &amp;&amp; \ &nbsp; echo &quot;You don&#39;t have the permissions to read $File&quot; &gt;&amp;2 &amp;&amp; \ &nbsp; return &nbsp; awk &#39;$1==&#39;$Num&#39; { &nbsp; &nbsp; i=length($1)+3 &nbsp; &nbsp; Text=substr($0,i) &nbsp; &nbsp; i=index(Text,&quot;\&quot; \&quot;&quot;) &nbsp; &nbsp; Desc=substr(Text,i+3) &nbsp; &nbsp; Text=substr(Text,1,i-1) &nbsp; &nbsp; i=index(Desc,&quot;\&quot; \&quot;&quot;) &nbsp; &nbsp; Desc=substr(Desc,1,i-1) &nbsp; &nbsp; print Text &nbsp; &nbsp; print Desc &nbsp; &nbsp; exit &nbsp; }&#39; $File | \ &nbsp; sed -e &#39;s/\&quot;\&quot;/\&quot;/&#39; } # Msg() #------------------------------------------------------------------------------ # # Set the default interval for login/logout statistics: # Options=6&nbsp; # per hour FileList=&quot;&quot; while [ $# -gt 0 ] do &nbsp; case $1 in &nbsp; &nbsp; -m) Msg $2; exit;; &nbsp; &nbsp; -h*|-help|--help) Usage;; &nbsp; &nbsp; [0-9]*|-*) Options=&quot;$Options $1&quot;;; &nbsp; &nbsp; *) test ! -f &quot;$1&quot; &amp;&amp; echo &quot;Input file $1 does not exist!&quot; &amp;&amp; exit 1 &nbsp; &nbsp; &nbsp; &nbsp;FileList=&quot;$FileList $1&quot; &nbsp; &nbsp; ;; &nbsp; esac # case $1 &nbsp; shift done&nbsp; # while [ $# -gt 0 ] # Trim the spaces: FileList=`echo $FileList` test &quot;$Options&quot; || \ Options=&quot;-prs&quot; # = Params Remains Summary echo &quot;$THIS Release $Release&quot; test -z &quot;$FileList&quot; &amp;&amp; \ LogParser $Options || \ for File in $FileList do &nbsp; Size=`ls -l $File | awk &#39;{print $5}&#39; 2&gt;/dev/null` &nbsp; echo &quot; Log File: $File Log Size: $Size&quot; &nbsp; test $Size -gt 20000000 &amp;&amp; \ &nbsp; echo &quot;Wait...&quot; &nbsp; cat $File | LogParser $Options done 2&gt;&amp;1 # #------------------------------------------------------------------------------" />
<meta property="og:description" content="Script : Shell script to parse the progress database log file Script Name: dblogparse.sh Script Function:&nbsp;Script classifies the messages into 4 categories (groups): &nbsp;1. Database startup parameters (&quot;Parameters&quot; group); &nbsp;2. Logins/logouts messages (&quot;Logins&quot; group); &nbsp;3. Informational messages that can be ignored (&quot;Ignore&quot; group); &nbsp;4. Any messages that do not belong to the above groups (&quot;Remains&quot; group). &nbsp;&nbsp;Script Usage: ./dblogparse.sh &lt; log path &gt; [-f] [-e] [-r] [-p] [-s] [-l] [-m] [-h] -f Show the fatal errors (marked as \&quot;F\&quot; in Progress log files); -e Show the system errors (the messages with words \&quot;SYSTEM ERROR:\&quot;); -r Show the remained messages (except \&quot;Logins\&quot;, \&quot;Params\&quot; and \&quot;Ignore\&quot; groups); -p Show the startup parameters of Progress multi-user sessions (\&quot;Params\&quot; group); -s Summary: the number of messages per message numbers (and without numbers); -l Report the statistics for the messages in the \&quot;Logins\&quot; group; -m ${UL}Num${UU} Display the description of Progress message number; -h|-help Display this help. Code: #!/bin/sh ------------------------------------ THIS=`basename $0` Usage() { # Bold/unbold terminal codes: # BD=`tput smso` # Enter standout mode (bold on rxvt) UB=`tput rmso` # Exit standout mode # Underline mode: UL=`tput smul` # Begin underline mode UU=`tput rmul` # Exit underline mode &nbsp; echo &quot;$THIS Release $Release Usage: $BD$THIS$UB [${UL}File${UU} ...] [${UL}Options${UU}] or tail -100000 ${UL}File${UU} | ${BD}$THIS$UB [${UL}Options${UU}] where the options are: ${UL}File${UU}(s) are the log files of Progress databases; -f Show the fatal errors (marked as \&quot;F\&quot; in Progress log files); -e Show the system errors (the messages with words \&quot;SYSTEM ERROR:\&quot;); -r Show the remained messages (except \&quot;Logins\&quot;, \&quot;Params\&quot; and \&quot;Ignore\&quot; groups); -p Show the startup parameters of Progress multi-user sessions (\&quot;Params\&quot; group); -s Summary: the number of messages per message numbers (and without numbers); -l Report the statistics for the messages in the \&quot;Logins\&quot; group; The above options can be concatenated. Example: dblog -prs ${UL}Number${UU} - number of last digits to cut from timestamps for \&quot;Logins\&quot; statistics; -m ${UL}Num${UU} Display the description of Progress message number; -h|-help Display this help. # echo &nbsp; exit } # Usage() #------------------------------------------------------------------------------ # LogParser() { # Creates statistics of the errors or login/logout messages in db log file. # LogParser reads the messages from a standard input stream (stdin). # # It processes approximately 50,000 lines per sec on CPU @ 2.40 GHz. # # Number of messages added by Progress versions: # Ver&nbsp; &nbsp;Date&nbsp; &nbsp; &nbsp; &nbsp;Msg # Range Added # 10.2B 2009/12/14 12419-15762 3344 # 11.0&nbsp; 2011/12/02 15763-16640&nbsp; 878 # 11.1&nbsp; 2012/06/15 16641-16738&nbsp; &nbsp;98 # 11.2&nbsp; 2013/02/13 16739-17035&nbsp; 296 # 11.3&nbsp; 2013/07/17 17036-17338&nbsp; 302 # 11.4&nbsp; 2014/07/25 17339-17759&nbsp; 421 # 11.5&nbsp; 2014/12/05 17760-17919&nbsp; 160 # 11.6&nbsp; 2015/10/16 17920-18388&nbsp; 468 # 11.7A 2016/03/25 18389-18505&nbsp; 117 # # Only 200-300 messages used to be written to db log. # Options: # # -f Show the fatal errors (marked as &quot;F&quot; in Progress log files) #&nbsp; &nbsp; They are the messages with %g or %G tags in promsgs file. #&nbsp; &nbsp; The tags are telling to the process to terminate processing; # -e Show the system errors (the messages with words &quot;SYSTEM ERROR:&quot;); # -r Show the remained messages (except &quot;Logins&quot;, &quot;Params&quot; and &quot;Ignore&quot; groups); # -p Show the startup parameters of Progress multi-user sessions (&quot;Params&quot; group); # -s Summary: the number of messages per message numbers (and without numbers); # -l Report the statistics for the messages in the &quot;Logins&quot; group; # CutTimeDigits - the number of the digits in timestamps to cut off # while creating the login/logout statistics. # Range of CutTimeDigits values: 0-8 # 0&nbsp; &nbsp;= 2016/05/12@12:34:56 = per seconds # 1&nbsp; &nbsp;= 2016/05/12@12:34:5&nbsp; = per 10 seconds # 2,3 = 2016/05/12@12:34:&nbsp; &nbsp;= per minutes # 4&nbsp; &nbsp;= 2016/05/12@12:3&nbsp; &nbsp; &nbsp;= per 10 minutes # 5,6 = 2016/05/12@12:&nbsp; &nbsp; &nbsp; = per hours # 7&nbsp; &nbsp;= 2016/05/12@1&nbsp; &nbsp; &nbsp; &nbsp; = per 10 or 4 hours # 8&nbsp; &nbsp;= 2016/05/12@&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= per days &nbsp; CutTimeDigits=0 # Default is per second statistics. &nbsp; Logins=&quot;no&quot; &nbsp; Params=&quot;no&quot; &nbsp; Fatal=&quot;no&quot; &nbsp; Errors=&quot;no&quot; &nbsp; Remains=&quot;no&quot; &nbsp; Summary=&quot;no&quot; &nbsp; Options=&quot;&quot; &nbsp; while [ $# -gt 0 ] &nbsp; do # CutTimeDigits: &nbsp; &nbsp; case &quot;$1&quot; in &nbsp; &nbsp; &nbsp; [0-9]*)&nbsp; CutTimeDigits=$1; shift; continue;; &nbsp; &nbsp; esac # Params: &nbsp; &nbsp; case &quot;$1&quot; in &nbsp; &nbsp; &nbsp; -*[pP]*) Params=&quot;yes&quot;;&nbsp; Options=&quot;$Options Params&quot;;; &nbsp; &nbsp; esac # Logins: &nbsp; &nbsp; case &quot;$1&quot; in &nbsp; &nbsp; &nbsp; -*[lL]*) Logins=&quot;yes&quot;;&nbsp; Options=&quot;$Options Logins&quot;;; &nbsp; &nbsp; esac # Fatal: &nbsp; &nbsp; case &quot;$1&quot; in &nbsp; &nbsp; &nbsp; -*[fF]*) Fatal=&quot;yes&quot;;&nbsp; &nbsp;Options=&quot;$Options Fatal&quot;;; &nbsp; &nbsp; esac # Errors: &nbsp; &nbsp; case &quot;$1&quot; in &nbsp; &nbsp; &nbsp; -*[eE]*) Errors=&quot;yes&quot;; Options=&quot;$Options Errors&quot;;; &nbsp; &nbsp; esac # Remains: &nbsp; &nbsp; case &quot;$1&quot; in &nbsp; &nbsp; &nbsp; -*[rR]*) Remains=&quot;yes&quot;; Options=&quot;$Options Remains&quot;;; &nbsp; &nbsp; esac # Summary: &nbsp; &nbsp; case &quot;$1&quot; in &nbsp; &nbsp; &nbsp; -*[sS]*) Summary=&quot;yes&quot;; Options=&quot;$Options Summary&quot;;; &nbsp; &nbsp; esac &nbsp; &nbsp; Rest=`echo $1 | tr -d &quot;lLpPeEfFrRsS\-&quot;` &nbsp; &nbsp; if [ &quot;$Rest&quot; ] &nbsp; &nbsp; then &nbsp; &nbsp; &nbsp; echo &quot;LogParser: \&quot;$Rest\&quot; is an unknown option.&quot; &nbsp; &nbsp; &nbsp; exit 1 &nbsp; &nbsp; fi # if Rest &nbsp; &nbsp; shift &nbsp; done&nbsp; # while [ $# -gt 0 ] &nbsp; test $CutTimeDigits -gt 8 &amp;&amp; \ &nbsp; CutTimeDigits=8 # CutTimeDigits=0: 2016/05/12@14:03:52 # CutTimeDigits=1: 2016/05/12@14:03:5 # ... # CutTimeDigits=7: 2016/05/12@1 # CutTimeDigits=8: 2016/05/12@ &nbsp; Options=`echo $Options | \ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;awk &#39;BEGIN {RS=&quot; &quot;} &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {print}&#39; | \ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sort` # Options &nbsp; Options=`echo $Options` &nbsp; echo &quot;LogParser Options: $Options&quot; &nbsp; test &quot;$Logins&quot; = &quot;yes&quot; &amp;&amp; \ &nbsp; case &quot;$CutTimeDigits&quot; in &nbsp; &nbsp; 0)&nbsp; &nbsp;echo &quot;Login statistics per second:&quot;&nbsp; &nbsp; ;; # 2016/05/12@12:34:56 &nbsp; &nbsp; 1)&nbsp; &nbsp;echo &quot;Login statistics per 10 seconds:&quot;;; # 2016/05/12@12:34:5 &nbsp; &nbsp; 2|3) echo &quot;Login statistics per minute:&quot;&nbsp; &nbsp; ;; # 2016/05/12@12:34: &nbsp; &nbsp; 4)&nbsp; &nbsp;echo &quot;Login statistics per 10 minutes:&quot;;; # 2016/05/12@12:3 &nbsp; &nbsp; 5|6) echo &quot;Login statistics per hour:&quot;&nbsp; &nbsp; &nbsp; ;; # 2016/05/12@12: &nbsp; &nbsp; 7)&nbsp; &nbsp;echo &quot;Login statistics per 10 hours:&quot;&nbsp; ;; # 2016/05/12@1 &nbsp; &nbsp; 8)&nbsp; &nbsp;echo &quot;Login statistics per day:&quot;&nbsp; &nbsp; &nbsp; &nbsp;;; # 2016/05/12@ &nbsp; esac # CutTimeDigits &nbsp; TmpFile=${DbLogPrefix:-`basename $0`.$$}.LogParser.tmp &nbsp; awk &#39; &nbsp; &nbsp; BEGIN { &nbsp; &nbsp; &nbsp; NoNum=&quot;(-----)&quot; &nbsp; &nbsp; &nbsp; TmpFile=&quot;&#39;$TmpFile&#39;&quot; &nbsp; &nbsp; &nbsp; TimeSize=19-&#39;$CutTimeDigits&#39; &nbsp; &nbsp; &nbsp; Logins=&quot;&#39;$Logins&#39;&quot; &nbsp; &nbsp; &nbsp; Params=&quot;&#39;$Params&#39;&quot; &nbsp; &nbsp; &nbsp; Fatal=&quot;&#39;$Fatal&#39;&quot; &nbsp; &nbsp; &nbsp; Errors=&quot;&#39;$Errors&#39;&quot; &nbsp; &nbsp; &nbsp; Remains=&quot;&#39;$Remains&#39;&quot; &nbsp; &nbsp; &nbsp; Summary=&quot;&#39;$Summary&#39;&quot; # # &quot;Logins&quot; = the group of the messages related to the activity on User Control Table: # &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(298)&quot;]=&quot;KILL signal received.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(333)&quot;]=&quot;Multi-user session begin.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(334)&quot;]=&quot; session end. (334)&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(451)&quot;]=&quot; session begin for on . (451)&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(452)&quot;]=&quot;Login by on .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(453)&quot;]=&quot;Logout by on .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(562)&quot;]=&quot;HANGUP signal received.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(708)&quot;]=&quot;Userid is now .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(742)&quot;]=&quot;Login usernum , userid , on .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(739)&quot;]=&quot;Logout usernum , userid , on .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(792)&quot;]=&quot;Message received with bad usernum.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(794)&quot;]=&quot;Usernum&nbsp; terminated abnormally.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(795)&quot;]=&quot;Error reading socket= ret= errno=.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(796)&quot;]=&quot;Error writing msg, socket= errno= usernum= disconnected.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(797)&quot;]=&quot;Partial write, socket= msglen= ret= user disconnected.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(1153)&quot;]=&quot;BROKER detects death of server .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(1334)&quot;]=&quot;Rejecting login -- too many users for this server.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(1166)&quot;]=&quot;Server disconnecting user .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2252)&quot;]=&quot;Begin transaction backout.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2253)&quot;]=&quot;Transaction backout completed.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2266)&quot;]=&quot;Expected user received user .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2518)&quot;]=&quot;Started. (APW, BIW, AIW or WDOG)&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2519)&quot;]=&quot;Disconnected. (APW or WDOG)&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2520)&quot;]=&quot;Stopped. (BIW or AIW)&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2268)&quot;]=&quot;Invalid message was received for an attempted login.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2525)&quot;]=&quot;Disconnecting dead server .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2526)&quot;]=&quot;Disconnecting client of dead server .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2527)&quot;]=&quot;Disconnecting dead user .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(4375)&quot;]=&quot;Received signal ; handling as SIGHUP.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(4698)&quot;]=&quot;User count exceeded. Failed attempt to login by on .&quot; #&nbsp; &nbsp; &nbsp;LoginsNum[ &quot;(4732)&quot;]=&quot;Login by on . Pid .&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# DEC/OpenVMS #&nbsp; &nbsp; &nbsp;LoginsNum[ &quot;(4734)&quot;]=&quot;Logout by on . Pid .&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # DEC/OpenVMS &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(5569)&quot;]=&quot;Quiet point request login by on .&quot; # V8.2A &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(5570)&quot;]=&quot;Quiet point request logout&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# V8.2A &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(7129)&quot;]=&quot;Usr set name to .&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V8.3B Dbdes, Aimage new, Aimage list, BACKUP &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(8873)&quot;]=&quot;Login usernum , remote SQL client.&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V9.1B, logout with msg 453 #&nbsp; &nbsp; &nbsp;LoginsNum[&quot;(12092)&quot;]=&quot;User disconnect initiated.&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# V10.1A, Not used &nbsp; &nbsp; &nbsp; LoginsNum[&quot;(12454)&quot;]=&quot;Server has unresolved pending connections(s). Please check port .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&quot;(12455)&quot;]=&quot;Clearing pending connections from server &quot;&nbsp; &nbsp; &nbsp;# V10.2B &nbsp; &nbsp; &nbsp; LoginsNum[&quot;(17961)&quot;]=&quot;User set tty to . (17961)&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V11.6 # # Identify the messages without the numbers by their text pattern: # # PROMON&nbsp; 5: (-----) Login by root. # BACKUP&nbsp; 7: (-----) Login by root. # SQLSRV2 3: (-----) Login by user 2525. Using TCP/IP IPV4 address 192.168.10.162 &nbsp; &nbsp; &nbsp; LoginsMsg[&quot;Login by&quot;]=&quot;(SQL User, PROMON or BACKUP)&quot; &nbsp; &nbsp; &nbsp; LoginsMsg[&quot;Logout by&quot;]=&quot;SQL User (SQLSRV2)&quot; # SQLSRV2 3: (-----) Logout by user 2525. &nbsp; &nbsp; &nbsp; LoginsMsg[&quot;Sending signal to user&quot;]=&quot;(BROKER or PROSHUT)&quot; &nbsp; &nbsp; &nbsp; LoginsMsg[&quot;User disconnect initiated&quot;]=&quot;(PROSHUT)&quot; &nbsp; &nbsp; &nbsp; LoginsMsg[&quot;Received RECONNECT from WTB&quot;]=&quot;(Webspeed user/agent)&quot; # This is an informational message which is sent on behalf of a user. # This message indicates that the user who connected to the database # server is a Webspeed user/agent and that the initial connection # between the WebSpeed broker and agent was completed. &nbsp; &nbsp; &nbsp; LoginsMsg[&quot;Notifying srvr&quot;]=&quot;, conn , to terminate remote user (12093)&quot; # SHUT 2146: (-----) User 7775 disconnect initiated # SHUT 2146: (453)&nbsp; &nbsp;Logout by on batch. # BROKER&nbsp; 0: (-----) Notifying srvr 24, conn 24, to terminate remote user 7775 &lt;== should be (12093) # BROKER&nbsp; 0: (-----) Sending signal 5 to user 7775 # SRV&nbsp; &nbsp; 24: (1166)&nbsp; Server disconnecting user 7775. # # &quot;Ignore&quot; = the group of the informational messages that can be ignored: # # Miscellaneous: # &nbsp; &nbsp; &nbsp; IgnoreNum[&nbsp; &quot;(439)&quot;]=&quot;** Save file named core for analysis by Progress Software Corporation.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(2261)&quot;]=&quot;Sending signal to connected user(s).&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(2263)&quot;]=&quot;Resending shutdown request to user(s).&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(8863)&quot;]=&quot;This broker supports 4GL server groups only.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(8864)&quot;]=&quot;This broker supports SQL server groups only.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(8865)&quot;]=&quot;This broker supports both 4GL and SQL server groups.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(10471)&quot;]=&quot;Database connections have been enabled.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(16869)&quot;]=&quot;Removed shared memory with segment_id: &quot; # # Warnings: # &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5407)&quot;]=&quot;WARNING: -nb exceeded. Automatically increasing from to .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5408)&quot;]=&quot;WARNING: -l exceeded. Automatically increasing from to .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5409)&quot;]=&quot;WARNING: -mmax exceeded. Automatically increasing from to .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5410)&quot;]=&quot;WARNING: -D limit has been exceeded; automatically increasing to .&quot; # # Connection: # &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5644)&quot;]=&quot;Started for using tcp IPV4 address 0.0.0.0, pid .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5645)&quot;]=&quot;This is an additional broker for this protocol.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5646)&quot;]=&quot;Started on port using tcp IPV4 address 0.0.0.0, pid .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5512)&quot;]=&quot;Previous message sent on behalf of user . (5512)&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(14658)&quot;]=&quot;Previous message sent on behalf of user , server pid , broker pid . (5512)&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(10836)&quot;]=&quot;Database connections are not allowed at this time.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(12698)&quot;]=&quot;User Roles: &quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(12699)&quot;]=&quot;Database Options: &quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(15646)&quot;]=&quot;Started on port using tcp, pid .&quot; # # SQLSRV2: Database statistics # &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(10995)&quot;]=&quot;Database statistics () updated for all tables.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(10996)&quot;]=&quot;Database statistics () updated for table .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(10997)&quot;]=&quot;Database statistics () updated by direct user sql statement ().&quot; # # RFUTIL: # &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(3774)&quot;]=&quot;Backup after-image extent and mark it as empty.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(3776)&quot;]=&quot;Backup ai extent and mark it as empty.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(3777)&quot;]=&quot;Switched to ai extent .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(3778)&quot;]=&quot;This is after-image file number since the last AIMAGE BEGIN&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(3789)&quot;]=&quot;Marked after-image extent EMPTY.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(11805)&quot;]=&quot;Unlocking after-image file and locking ALL FULL after-image files beginning with file .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(12074)&quot;]=&quot;The After-image extent was successfully extracted.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(13154)&quot;]=&quot;Marked after-image extent ARCHIVED.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(13199)&quot;]=&quot;After-image extent has been copied to .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(13231)&quot;]=&quot;From this point forward all after-image extents will be archived to .&quot; # # BACKUP: # &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(1074)&quot;]=&quot;Wrote a total of backup blocks using bytes of media.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(1361)&quot;]=&quot;Incremental backup started.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(1362)&quot;]=&quot;Full backup started.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(1363)&quot;]=&quot;Incremental backup successfully completed.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(1364)&quot;]=&quot;Full backup successfully completed.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(1365)&quot;]=&quot;Database copied from .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(1366)&quot;]=&quot;Incremental restore of sequence started.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(1367)&quot;]=&quot;Incremental restore of sequence completed.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(3664)&quot;]=&quot;Incremental backup started.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5459)&quot;]=&quot;Begin backup of Before Image file(s).&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5460)&quot;]=&quot;End backup of Before Image file(s).&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5461)&quot;]=&quot;Begin backup of Data file(s).&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5462)&quot;]=&quot;End backup of Data file(s).&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(6678)&quot;]=&quot;NOTE: Backup media estimates done without database scan.&quot; # V8.3A &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(6680)&quot;]=&quot;Estimate for uncompressed full backup is provided.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(6686)&quot;]=&quot; active blocks out of blocks in will be dumped.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(6688)&quot;]=&quot; BI blocks will be dumped.&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V8.3B &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(6689)&quot;]=&quot;Backup requires&nbsp; blocks ( Mb) of media.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(6699)&quot;]=&quot;Restore would require&nbsp; blocks ( Mb) of media.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(6760)&quot;]=&quot;This backup was taken .&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V8.3B &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(9285)&quot;]=&quot;Backup requires an estimated of media.&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# V9.1C &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(9286)&quot;]=&quot;Restore would require an estimated&nbsp; db blocks using of media.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(12850)&quot;]=&quot;Backup blocks will be written to .&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V10.2B &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(13625)&quot;]=&quot;Wrote a total of backup blocks using of media.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(13786)&quot;]=&quot;This backup was also used to enable after-image on the source database.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(14256)&quot;]=&quot;The Replication Server has been notified that an online backup is about to be performed.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(14258)&quot;]=&quot;The online backup of this database has completed normally.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(15108)&quot;]=&quot;The online backup has finished backing up the BI. The Replication Agent will now begin recovery synchronization followed by normal processing.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(15109)&quot;]=&quot;At Database close the number of live transactions is .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(15321)&quot;]=&quot;Before Image Log Initialisation at block offset .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(15743)&quot;]=&quot;Before Image Log Completion at Block Offset .&quot;&nbsp; &nbsp; &nbsp; # V10.2B &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(16866)&quot;]=&quot;Dumped active BI blocks.&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V11.2 # # Identify the messages without the numbers by their text pattern: # # BROKER&nbsp; 2: (-----) Shared Library Path set to LIBPATH= # &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;Shared Library Path set to&quot;]=&quot;&quot; # SQLSRV2 3: (-----) SQL Server 11.6.01 started, configuration: &quot;dbname.virtualconfig&quot; # SQLSRV2 3: (-----) &quot;/path/to/dbname&quot; started on IPv4 port 1025 for address 0.0.0.0, pid 9568520 (0x00920108). # SQLSRV2 3: (-----) Thread stack size: 1024000 (bytes). # SQLSRV2 3: (-----) DLC from ENVIRONMENT VARIABLE is: /usr/dlc # SQLSRV2 3: (-----) WRKDIR from ENVIRONMENT VARIABLE is: /usr/wrk/ # SQLSRV2 3: (-----) JDKHOME from ENVIRONMENT VARIABLE is: /usr/dlc/jdk # SQLSRV2 3: (-----) JREHOME from ENVIRONMENT VARIABLE is: /usr/dlc/jdk/jre # SQLSRV2 3: (-----) CLASSPATH from DEFAULT is: # SQLSRV2 3: (-----) PROSQL_LOCKWAIT_TIMEOUT value is: 5 seconds &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;started, configuration:&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;started on port for address pid&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;Thread stack size:&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;DLC from ENVIRONMENT VARIABLE is:&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;WRKDIR from ENVIRONMENT VARIABLE is:&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;JDKHOME from ENVIRONMENT VARIABLE is:&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;JREHOME from ENVIRONMENT VARIABLE is:&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;CLASSPATH from DEFAULT is:&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;PROSQL_LOCKWAIT_TIMEOUT value is:&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; PrevLogins=&quot;&quot; &nbsp; &nbsp; &nbsp; PrevLoginTime=&quot;&quot; # SunOS can rise the error if the arrays are not &quot;initiated&quot;: # awk: Count is not an array &nbsp; &nbsp; &nbsp; TotalNumCount[&quot;&quot;]=0 &nbsp; &nbsp; &nbsp; TotalMsgCount[&quot;&quot;]=0 &nbsp; &nbsp; &nbsp; LoginNumCount[&quot;&quot;]=0 &nbsp; &nbsp; &nbsp; LoginMsgCount[&quot;&quot;]=0 &nbsp; &nbsp; } # BEGIN # # Skip the lines that do not begin with timestamps # like [2016/05/12@14:03:52.486+0400] #&nbsp; &nbsp; &nbsp; &nbsp;1234567890123456789012345678 # &nbsp; &nbsp; ! /^\[/ {next} # # Lines with timestamps: # &nbsp; &nbsp; { CurrTime=substr($1,2,length($1)-2) # Time without &quot;[]&quot; &nbsp; &nbsp; &nbsp; if(InitTime==&quot;&quot;) InitTime=CurrTime &nbsp; &nbsp; &nbsp; if(PrevTime==&quot;&quot;) PrevTime=CurrTime &nbsp; &nbsp; &nbsp; D=substr(CurrTime,1,11) # Year/Month/Day &nbsp; &nbsp; &nbsp; H=substr(CurrTime,12,2) # Hours &nbsp; &nbsp; &nbsp; M=substr(CurrTime,15,2) # Minutes &nbsp; &nbsp; &nbsp; S=substr(CurrTime,18,2) # Seconds &nbsp; &nbsp; &nbsp; Z=substr(CurrTime,length(CurrTime)-4) # Timezone -0400 &nbsp; &nbsp; } &nbsp; &nbsp; Z ~/^\+/ {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # TZ +0400 &nbsp; &nbsp; &nbsp; H-=substr(Z,2,2)&nbsp; &nbsp; &nbsp; &nbsp; # Hours &nbsp; &nbsp; &nbsp; M-=substr(Z,4,2)&nbsp; &nbsp; &nbsp; &nbsp; # Minutes &nbsp; &nbsp; } # TZ +0400 &nbsp; &nbsp; Z ~/^\-/ {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # TZ -0400 &nbsp; &nbsp; &nbsp; H+=substr(Z,2,2)&nbsp; &nbsp; &nbsp; &nbsp; # Hours &nbsp; &nbsp; &nbsp; M+=substr(Z,4,2)&nbsp; &nbsp; &nbsp; &nbsp; # Minutes &nbsp; &nbsp; } # TZ -0400 # # Article Number: 000064856 # Defect PSC00256028, PSC00257044 # Upgrade to OpenEdge 11.4 or later # A partial fix is included in OpenEdge 11.2.1 and 11.3.x # As a side effect of the fix, messages from signal handlers will always show # as UTC time instead of the database timezone. # # Example: # [2016/05/23@04:11:27.185-0400] P-12 T-1 I ABL 8: (452) Login by user on /dev/pts/4. # [2016/05/23@08:52:07.000+0000] P-12 T-1 I ABL 8: (562) HANGUP signal received. # [2016/05/23@04:52:07.926-0400] P-12 T-1 I ABL 8: (453) Logout by hchen on /dev/pts/4. # # Convert the current time to UTC time to get the correct &quot;Logins&quot; statistics: &nbsp; &nbsp; { if(length(H)==1) H=&quot;0&quot; H &nbsp; &nbsp; &nbsp; if(length(M)==1) M=&quot;0&quot; M &nbsp; &nbsp; &nbsp; if(length(M)==1) S=&quot;0&quot; S &nbsp; &nbsp; &nbsp; CurrLogins=D H &quot;:&quot; M &quot;:&quot; S &nbsp; &nbsp; &nbsp; CurrLogins=substr(CurrLogins,1,TimeSize) # TimeSize=19 = no cuts &nbsp; &nbsp; } # Timestamps # # Logins/logouts statistics report: # &nbsp; &nbsp; Logins==&quot;yes&quot; &amp;&amp; PrevLogins!=CurrLogins { &nbsp; &nbsp; &nbsp; for(Num in LoginNumCount) if(LoginNumCount[Num]&gt;0) &nbsp; &nbsp; &nbsp; { # Time: 2016/05/12@14:03:52.486+0400 #&nbsp; &nbsp; &nbsp; &nbsp;1234567890123456789012345678 # &nbsp; &nbsp; &nbsp; &nbsp; printf&quot;%10s %8s %8s %4d %7s %s\n&quot;,\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(PrevLoginTime,1,10),\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(PrevLoginTime,12),\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(LastLoginTime,12),\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginNumCount[Num],\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Num,\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginsNum[Num] # Either set to zero or delete an element of the array - any option that will work: &nbsp; &nbsp; &nbsp; &nbsp; LoginNumCount[Num]=0 &nbsp; &nbsp; &nbsp; &nbsp; delete LoginNumCount[Num] &nbsp; &nbsp; &nbsp; } # for Num in LoginNumCount &nbsp; &nbsp; &nbsp; for(Msg in LoginMsgCount) if(LoginMsgCount[Msg]&gt;0) { &nbsp; &nbsp; &nbsp; &nbsp; printf&quot;%10s %8s %8s %4d %7s %s\n&quot;,\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(PrevLoginTime,1,10),\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(PrevLoginTime,12),\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(LastLoginTime,12),\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginMsgCount[Msg],\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NoNum,\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Msg &quot; &quot; LoginsMsg[Msg] # Either set to zero or delete an element of the array - any option that will work: &nbsp; &nbsp; &nbsp; &nbsp; LoginMsgCount[Msg]=0 &nbsp; &nbsp; &nbsp; &nbsp; delete LoginMsgCount[Msg] &nbsp; &nbsp; &nbsp; } # for Msg in LoginMsgCount &nbsp; &nbsp; &nbsp; PrevLoginTime=&quot;&quot; &nbsp; &nbsp; &nbsp; PrevLogins=CurrLogins &nbsp; &nbsp; } # Logins==&quot;yes&quot; # # Msg number is column 7 if there is a space between user type and user number: # [2016/05/12@14:03:52.486+0400] P-1 T-1 I ABL 10: (452) Login by root on batch. # # Msg number is column 6 if there is no space between user type and user number: # [2016/04/05@06:00:23.102+0600] P-2 T-1 I RFUTI1312: (452) Login by root on batch. # &nbsp; &nbsp; { Num=&quot;&quot; &nbsp; &nbsp; &nbsp; for(Col=6;Col&lt;=7;Col++) if($Col ~ /^\([0-9]*-*\)$/) { &nbsp; &nbsp; &nbsp; &nbsp; Num=$Col &nbsp; &nbsp; &nbsp; &nbsp; break &nbsp; &nbsp; &nbsp; } # for Col &nbsp; &nbsp; &nbsp; if(Num==&quot;&quot;) next # # Cleaning a message: remove any word containing a digit. # &nbsp; &nbsp; &nbsp; Msg=$(Col+1) &nbsp; &nbsp; &nbsp; for(i=Col+2;i&lt;=NF;i++) if($i !~/[0-9]/) Msg=Msg &quot; &quot; $i &nbsp; &nbsp; } # # Messages without numbers: # &nbsp; &nbsp; Num==NoNum { # # Ignore the block dumps (dont count them in the Summary): # (-----) 1fd0:&nbsp; 652d 5883 4e53 5056 0000 2565 2d74 7970 # &nbsp; &nbsp; &nbsp; if(NF==Col+9 &amp;&amp; $(Col+1) ~ /^[0-1]/ &amp;&amp; $(Col+1) ~ /:$/) next # Summary: &nbsp; &nbsp; &nbsp; TotalMsgCount[Msg]++ # Fatal: &nbsp; &nbsp; &nbsp; if($4==&quot;F&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; FatalCount++ &nbsp; &nbsp; &nbsp; &nbsp; if(Fatal==&quot;yes&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; &nbsp; &nbsp; } # if Fatal &nbsp; &nbsp; &nbsp; } # if &quot;F&quot; # Errors: &nbsp; &nbsp; &nbsp; if(Msg ~ /SYSTEM ERROR: /) { &nbsp; &nbsp; &nbsp; &nbsp; ErrorsCount++ &nbsp; &nbsp; &nbsp; &nbsp; if(Errors==&quot;yes&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; &nbsp; &nbsp; } # if Errors &nbsp; &nbsp; &nbsp; } # if SYSTEM ERROR: &nbsp; &nbsp; &nbsp; for(Pattern in IgnoreMsg) if(index(Msg,Pattern)&gt;0) next &nbsp; &nbsp; &nbsp; for(Pattern in LoginsMsg) if(index(Msg,Pattern)&gt;0) { &nbsp; &nbsp; &nbsp; &nbsp; LoginMsgCount[Pattern]++ &nbsp; &nbsp; &nbsp; &nbsp; if(PrevLoginTime==&quot;&quot;) &nbsp; &nbsp; &nbsp; &nbsp; PrevLoginTime=CurrTime &nbsp; &nbsp; &nbsp; &nbsp; LastLoginTime=CurrTime &nbsp; &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; &nbsp; } # LoginsMsg &nbsp; &nbsp; &nbsp; if(Startup==&quot;yes&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; if(Params==&quot;yes&quot;) print &nbsp; &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; &nbsp; } # if Startup &nbsp; &nbsp; &nbsp; RemainsCount++ &nbsp; &nbsp; &nbsp; if(Remains==&quot;yes&quot;) print &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; } #&nbsp; Messages without numbers # # The numbered messages: # # Summary: &nbsp; &nbsp; { TotalNumCount[Num]++ &nbsp; &nbsp; &nbsp; Example[Num]=Msg # Fatal: &nbsp; &nbsp; &nbsp; if($4==&quot;F&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; FatalCount++ &nbsp; &nbsp; &nbsp; &nbsp; if(Fatal==&quot;yes&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; &nbsp; &nbsp; } # if Fatal &nbsp; &nbsp; &nbsp; } # if &quot;F&quot; # Errors: &nbsp; &nbsp; &nbsp; if(Msg ~ /SYSTEM ERROR: /) { &nbsp; &nbsp; &nbsp; &nbsp; ErrorsCount++ &nbsp; &nbsp; &nbsp; &nbsp; if(Errors==&quot;yes&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; &nbsp; &nbsp; } # if Errors &nbsp; &nbsp; &nbsp; } # if SYSTEM ERROR: # # &quot;Params&quot; group: # # BROKER&nbsp; 0: (333)&nbsp; &nbsp;Multi-user session begin. # BROKER&nbsp; 0: (4234)&nbsp; Progress OpenEdge Release on . # BROKER&nbsp; 0: (10471) Database connections have been enabled. # PROLOG&nbsp; 5: (12684) prolog log file truncation . (12684) # &nbsp; &nbsp; &nbsp; if(Num==&quot;(333)&quot;)&nbsp; &nbsp;Startup=&quot;yes&quot; &nbsp; &nbsp; &nbsp; if(Num==&quot;(4234)&quot;)&nbsp; Startup=&quot;yes&quot; &nbsp; &nbsp; &nbsp; if(Num==&quot;(10471)&quot;) Startup=&quot;no&quot; &nbsp; &nbsp; &nbsp; if($5!=&quot;BROKER&quot; &amp;&amp; $5!=&quot;PROLOG&quot;) Startup=&quot;no&quot; &nbsp; &nbsp; &nbsp; for(Pattern in IgnoreNum) if(Num==Pattern) next &nbsp; &nbsp; &nbsp; for(Pattern in LoginsNum) if(Num==Pattern) { &nbsp; &nbsp; &nbsp; &nbsp; LoginNumCount[Pattern]++ &nbsp; &nbsp; &nbsp; &nbsp; if(PrevLoginTime==&quot;&quot;) &nbsp; &nbsp; &nbsp; &nbsp; PrevLoginTime=CurrTime &nbsp; &nbsp; &nbsp; &nbsp; LastLoginTime=CurrTime &nbsp; &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; &nbsp; } # LoginsNum &nbsp; &nbsp; &nbsp; if(Startup==&quot;yes&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; if(Params==&quot;yes&quot;)&nbsp; print &nbsp; &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; &nbsp; } # if Startup &nbsp; &nbsp; &nbsp; RemainsCount++ &nbsp; &nbsp; &nbsp; if(Remains==&quot;yes&quot;) print &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; } # Numbered messages &nbsp; &nbsp; END { &nbsp; &nbsp; &nbsp; if(Logins==&quot;yes&quot;) &nbsp; &nbsp; &nbsp; for(Num in LoginNumCount) if(LoginNumCount[Num]&gt;0) &nbsp; &nbsp; &nbsp; &nbsp; printf&quot;%10s %8s %8s %4d %7s %s\n&quot;,\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(PrevLoginTime,1,10),\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(PrevLoginTime,12),\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(LastLoginTime,12),\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginNumCount[Num],\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Num,\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginsNum[Num] &nbsp; &nbsp; &nbsp; # if Logins &nbsp; &nbsp; &nbsp; Count=0 &nbsp; &nbsp; &nbsp; NumTypeCount=0 &nbsp; &nbsp; &nbsp; MsgTypeCount=0 &nbsp; &nbsp; &nbsp; for(Num in TotalNumCount) if(TotalNumCount[Num]&gt;0) { &nbsp; &nbsp; &nbsp; &nbsp; Count+=TotalNumCount[Num] &nbsp; &nbsp; &nbsp; &nbsp; NumTypeCount++ &nbsp; &nbsp; &nbsp; } # for Num if &nbsp; &nbsp; &nbsp; for(Msg in TotalMsgCount) if(TotalMsgCount[Msg]&gt;0) { &nbsp; &nbsp; &nbsp; &nbsp; Count+=TotalMsgCount[Msg] &nbsp; &nbsp; &nbsp; &nbsp; MsgTypeCount++ &nbsp; &nbsp; &nbsp; } # for Msg if &nbsp; &nbsp; &nbsp; printf&quot;\nProcessed %d lines, %d messages with timestamps\n&quot;,NR,Count &nbsp; &nbsp; &nbsp; printf&quot;from %s\n&quot;,InitTime &nbsp; &nbsp; &nbsp; printf&quot;&nbsp; to %s\n&quot;,CurrTime &nbsp; &nbsp; &nbsp; printf&quot;Numbered messages: %d, without numbers: %d\n&quot;,NumTypeCount,MsgTypeCount &nbsp; &nbsp; &nbsp; if(Fatal!=&quot;yes&quot;)&nbsp; RemainsCount-=FatalCount &nbsp; &nbsp; &nbsp; if(Errors!=&quot;yes&quot;) RemainsCount-=ErrorsCount &nbsp; &nbsp; &nbsp; printf&quot;System errors: %d, fatal errors: %d, \&quot;remains\&quot;: %d\n&quot;,ErrorsCount,FatalCount,RemainsCount &nbsp; &nbsp; &nbsp; if(&quot;&#39;$Summary&#39;&quot;!=&quot;yes&quot;) exit # # Replace the examples by the known message descriptions: # &nbsp; &nbsp; &nbsp; for(Num in LoginsNum) Example[Num]=LoginsNum[Num] &nbsp; &nbsp; &nbsp; for(Num in IgnoreNum) Example[Num]=IgnoreNum[Num] &nbsp; &nbsp; &nbsp; printf&quot;\nSummary per the message numbers:\n&quot; &nbsp; &nbsp; &nbsp; for(Num in TotalNumCount) if(TotalNumCount[Num]&gt;0) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; printf&quot;%6d %7s %s\n&quot;,TotalNumCount[Num],Num,Example[Num] &gt;TmpFile &nbsp; &nbsp; &nbsp; for(Msg in TotalMsgCount) if(TotalMsgCount[Msg]&gt;0) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; printf&quot;%6d %7s %s\n&quot;,TotalMsgCount[Msg],NoNum,Msg &gt;TmpFile &nbsp; &nbsp; &nbsp; close(TmpFile) &nbsp; &nbsp; } # END &nbsp; &#39; - &nbsp; test -f $TmpFile &amp;&amp; \ &nbsp; cat&nbsp; &nbsp; &nbsp;$TmpFile | sort -n -r &amp;&amp; \ &nbsp; rm&nbsp; &nbsp;-f $TmpFile } # LogParser() #------------------------------------------------------------------------------ # Msg() { &nbsp; Num=$1 &nbsp; test -z &quot;$DLC&quot; &amp;&amp; \ &nbsp; echo &quot;Progress DLC environment variable variable is not set.&quot; &gt;&amp;2 &amp;&amp; \ &nbsp; return &nbsp; if [ ! -f $DLC/prohelp/msgdata/msg1 ] &nbsp; then &nbsp; &nbsp; echo &quot;Progress DLC environment variable may not be set correctly. Set DLC variable to Progress installation directory. Progress DLC setting: $DLC&quot; &gt;&amp;2 &nbsp; &nbsp; return &nbsp; fi &nbsp; test -z &quot;$Num&quot; &amp;&amp; \ &nbsp; echo &quot;You do&#39;t specify the message number.&quot; &gt;&amp;2 &amp;&amp; \ &nbsp; return &nbsp; test $Num -gt 0 2&gt;/dev/null &nbsp; if [ $? -ne 0 ] &nbsp; then &nbsp; &nbsp; echo &quot;Message number ($Num) should be an integer greater than 0.&quot; &gt;&amp;2 &nbsp; &nbsp; return &nbsp; fi &nbsp; i=`expr $Num - 1` &nbsp; i=`expr $i / 50` &nbsp; i=`expr $i + 1` &nbsp; File=$DLC/prohelp/msgdata/msg$i &nbsp; if [ ! -f $File ] &nbsp; then &nbsp; &nbsp; echo &quot;Failed to find $File&quot; &nbsp; &nbsp; echo &quot;$Num seemed too large for current Progress version&quot; &nbsp; &nbsp; cat $DLC/version &nbsp; &nbsp; return &nbsp; fi &gt;&amp;2 &nbsp; test ! -r $File &amp;&amp; \ &nbsp; echo &quot;You don&#39;t have the permissions to read $File&quot; &gt;&amp;2 &amp;&amp; \ &nbsp; return &nbsp; awk &#39;$1==&#39;$Num&#39; { &nbsp; &nbsp; i=length($1)+3 &nbsp; &nbsp; Text=substr($0,i) &nbsp; &nbsp; i=index(Text,&quot;\&quot; \&quot;&quot;) &nbsp; &nbsp; Desc=substr(Text,i+3) &nbsp; &nbsp; Text=substr(Text,1,i-1) &nbsp; &nbsp; i=index(Desc,&quot;\&quot; \&quot;&quot;) &nbsp; &nbsp; Desc=substr(Desc,1,i-1) &nbsp; &nbsp; print Text &nbsp; &nbsp; print Desc &nbsp; &nbsp; exit &nbsp; }&#39; $File | \ &nbsp; sed -e &#39;s/\&quot;\&quot;/\&quot;/&#39; } # Msg() #------------------------------------------------------------------------------ # # Set the default interval for login/logout statistics: # Options=6&nbsp; # per hour FileList=&quot;&quot; while [ $# -gt 0 ] do &nbsp; case $1 in &nbsp; &nbsp; -m) Msg $2; exit;; &nbsp; &nbsp; -h*|-help|--help) Usage;; &nbsp; &nbsp; [0-9]*|-*) Options=&quot;$Options $1&quot;;; &nbsp; &nbsp; *) test ! -f &quot;$1&quot; &amp;&amp; echo &quot;Input file $1 does not exist!&quot; &amp;&amp; exit 1 &nbsp; &nbsp; &nbsp; &nbsp;FileList=&quot;$FileList $1&quot; &nbsp; &nbsp; ;; &nbsp; esac # case $1 &nbsp; shift done&nbsp; # while [ $# -gt 0 ] # Trim the spaces: FileList=`echo $FileList` test &quot;$Options&quot; || \ Options=&quot;-prs&quot; # = Params Remains Summary echo &quot;$THIS Release $Release&quot; test -z &quot;$FileList&quot; &amp;&amp; \ LogParser $Options || \ for File in $FileList do &nbsp; Size=`ls -l $File | awk &#39;{print $5}&#39; 2&gt;/dev/null` &nbsp; echo &quot; Log File: $File Log Size: $Size&quot; &nbsp; test $Size -gt 20000000 &amp;&amp; \ &nbsp; echo &quot;Wait...&quot; &nbsp; cat $File | LogParser $Options done 2&gt;&amp;1 # #------------------------------------------------------------------------------" />
<link rel="canonical" href="https://vemarahub.github.io/shell-script-progress-log-parsing/" />
<meta property="og:url" content="https://vemarahub.github.io/shell-script-progress-log-parsing/" />
<meta property="og:site_name" content="VR Exploring" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-03-25T08:20:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Shell Script - Progress Log Parsing" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Rajesh Nair"},"dateModified":"2020-03-25T08:20:00+00:00","datePublished":"2020-03-25T08:20:00+00:00","description":"Script : Shell script to parse the progress database log file Script Name: dblogparse.sh Script Function:&nbsp;Script classifies the messages into 4 categories (groups): &nbsp;1. Database startup parameters (&quot;Parameters&quot; group); &nbsp;2. Logins/logouts messages (&quot;Logins&quot; group); &nbsp;3. Informational messages that can be ignored (&quot;Ignore&quot; group); &nbsp;4. Any messages that do not belong to the above groups (&quot;Remains&quot; group). &nbsp;&nbsp;Script Usage: ./dblogparse.sh &lt; log path &gt; [-f] [-e] [-r] [-p] [-s] [-l] [-m] [-h] -f Show the fatal errors (marked as \\&quot;F\\&quot; in Progress log files); -e Show the system errors (the messages with words \\&quot;SYSTEM ERROR:\\&quot;); -r Show the remained messages (except \\&quot;Logins\\&quot;, \\&quot;Params\\&quot; and \\&quot;Ignore\\&quot; groups); -p Show the startup parameters of Progress multi-user sessions (\\&quot;Params\\&quot; group); -s Summary: the number of messages per message numbers (and without numbers); -l Report the statistics for the messages in the \\&quot;Logins\\&quot; group; -m ${UL}Num${UU} Display the description of Progress message number; -h|-help Display this help. Code: #!/bin/sh ------------------------------------ THIS=`basename $0` Usage() { # Bold/unbold terminal codes: # BD=`tput smso` # Enter standout mode (bold on rxvt) UB=`tput rmso` # Exit standout mode # Underline mode: UL=`tput smul` # Begin underline mode UU=`tput rmul` # Exit underline mode &nbsp; echo &quot;$THIS Release $Release Usage: $BD$THIS$UB [${UL}File${UU} ...] [${UL}Options${UU}] or tail -100000 ${UL}File${UU} | ${BD}$THIS$UB [${UL}Options${UU}] where the options are: ${UL}File${UU}(s) are the log files of Progress databases; -f Show the fatal errors (marked as \\&quot;F\\&quot; in Progress log files); -e Show the system errors (the messages with words \\&quot;SYSTEM ERROR:\\&quot;); -r Show the remained messages (except \\&quot;Logins\\&quot;, \\&quot;Params\\&quot; and \\&quot;Ignore\\&quot; groups); -p Show the startup parameters of Progress multi-user sessions (\\&quot;Params\\&quot; group); -s Summary: the number of messages per message numbers (and without numbers); -l Report the statistics for the messages in the \\&quot;Logins\\&quot; group; The above options can be concatenated. Example: dblog -prs ${UL}Number${UU} - number of last digits to cut from timestamps for \\&quot;Logins\\&quot; statistics; -m ${UL}Num${UU} Display the description of Progress message number; -h|-help Display this help. # echo &nbsp; exit } # Usage() #------------------------------------------------------------------------------ # LogParser() { # Creates statistics of the errors or login/logout messages in db log file. # LogParser reads the messages from a standard input stream (stdin). # # It processes approximately 50,000 lines per sec on CPU @ 2.40 GHz. # # Number of messages added by Progress versions: # Ver&nbsp; &nbsp;Date&nbsp; &nbsp; &nbsp; &nbsp;Msg # Range Added # 10.2B 2009/12/14 12419-15762 3344 # 11.0&nbsp; 2011/12/02 15763-16640&nbsp; 878 # 11.1&nbsp; 2012/06/15 16641-16738&nbsp; &nbsp;98 # 11.2&nbsp; 2013/02/13 16739-17035&nbsp; 296 # 11.3&nbsp; 2013/07/17 17036-17338&nbsp; 302 # 11.4&nbsp; 2014/07/25 17339-17759&nbsp; 421 # 11.5&nbsp; 2014/12/05 17760-17919&nbsp; 160 # 11.6&nbsp; 2015/10/16 17920-18388&nbsp; 468 # 11.7A 2016/03/25 18389-18505&nbsp; 117 # # Only 200-300 messages used to be written to db log. # Options: # # -f Show the fatal errors (marked as &quot;F&quot; in Progress log files) #&nbsp; &nbsp; They are the messages with %g or %G tags in promsgs file. #&nbsp; &nbsp; The tags are telling to the process to terminate processing; # -e Show the system errors (the messages with words &quot;SYSTEM ERROR:&quot;); # -r Show the remained messages (except &quot;Logins&quot;, &quot;Params&quot; and &quot;Ignore&quot; groups); # -p Show the startup parameters of Progress multi-user sessions (&quot;Params&quot; group); # -s Summary: the number of messages per message numbers (and without numbers); # -l Report the statistics for the messages in the &quot;Logins&quot; group; # CutTimeDigits - the number of the digits in timestamps to cut off # while creating the login/logout statistics. # Range of CutTimeDigits values: 0-8 # 0&nbsp; &nbsp;= 2016/05/12@12:34:56 = per seconds # 1&nbsp; &nbsp;= 2016/05/12@12:34:5&nbsp; = per 10 seconds # 2,3 = 2016/05/12@12:34:&nbsp; &nbsp;= per minutes # 4&nbsp; &nbsp;= 2016/05/12@12:3&nbsp; &nbsp; &nbsp;= per 10 minutes # 5,6 = 2016/05/12@12:&nbsp; &nbsp; &nbsp; = per hours # 7&nbsp; &nbsp;= 2016/05/12@1&nbsp; &nbsp; &nbsp; &nbsp; = per 10 or 4 hours # 8&nbsp; &nbsp;= 2016/05/12@&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= per days &nbsp; CutTimeDigits=0 # Default is per second statistics. &nbsp; Logins=&quot;no&quot; &nbsp; Params=&quot;no&quot; &nbsp; Fatal=&quot;no&quot; &nbsp; Errors=&quot;no&quot; &nbsp; Remains=&quot;no&quot; &nbsp; Summary=&quot;no&quot; &nbsp; Options=&quot;&quot; &nbsp; while [ $# -gt 0 ] &nbsp; do # CutTimeDigits: &nbsp; &nbsp; case &quot;$1&quot; in &nbsp; &nbsp; &nbsp; [0-9]*)&nbsp; CutTimeDigits=$1; shift; continue;; &nbsp; &nbsp; esac # Params: &nbsp; &nbsp; case &quot;$1&quot; in &nbsp; &nbsp; &nbsp; -*[pP]*) Params=&quot;yes&quot;;&nbsp; Options=&quot;$Options Params&quot;;; &nbsp; &nbsp; esac # Logins: &nbsp; &nbsp; case &quot;$1&quot; in &nbsp; &nbsp; &nbsp; -*[lL]*) Logins=&quot;yes&quot;;&nbsp; Options=&quot;$Options Logins&quot;;; &nbsp; &nbsp; esac # Fatal: &nbsp; &nbsp; case &quot;$1&quot; in &nbsp; &nbsp; &nbsp; -*[fF]*) Fatal=&quot;yes&quot;;&nbsp; &nbsp;Options=&quot;$Options Fatal&quot;;; &nbsp; &nbsp; esac # Errors: &nbsp; &nbsp; case &quot;$1&quot; in &nbsp; &nbsp; &nbsp; -*[eE]*) Errors=&quot;yes&quot;; Options=&quot;$Options Errors&quot;;; &nbsp; &nbsp; esac # Remains: &nbsp; &nbsp; case &quot;$1&quot; in &nbsp; &nbsp; &nbsp; -*[rR]*) Remains=&quot;yes&quot;; Options=&quot;$Options Remains&quot;;; &nbsp; &nbsp; esac # Summary: &nbsp; &nbsp; case &quot;$1&quot; in &nbsp; &nbsp; &nbsp; -*[sS]*) Summary=&quot;yes&quot;; Options=&quot;$Options Summary&quot;;; &nbsp; &nbsp; esac &nbsp; &nbsp; Rest=`echo $1 | tr -d &quot;lLpPeEfFrRsS\\-&quot;` &nbsp; &nbsp; if [ &quot;$Rest&quot; ] &nbsp; &nbsp; then &nbsp; &nbsp; &nbsp; echo &quot;LogParser: \\&quot;$Rest\\&quot; is an unknown option.&quot; &nbsp; &nbsp; &nbsp; exit 1 &nbsp; &nbsp; fi # if Rest &nbsp; &nbsp; shift &nbsp; done&nbsp; # while [ $# -gt 0 ] &nbsp; test $CutTimeDigits -gt 8 &amp;&amp; \\ &nbsp; CutTimeDigits=8 # CutTimeDigits=0: 2016/05/12@14:03:52 # CutTimeDigits=1: 2016/05/12@14:03:5 # ... # CutTimeDigits=7: 2016/05/12@1 # CutTimeDigits=8: 2016/05/12@ &nbsp; Options=`echo $Options | \\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;awk &#39;BEGIN {RS=&quot; &quot;} &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {print}&#39; | \\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sort` # Options &nbsp; Options=`echo $Options` &nbsp; echo &quot;LogParser Options: $Options&quot; &nbsp; test &quot;$Logins&quot; = &quot;yes&quot; &amp;&amp; \\ &nbsp; case &quot;$CutTimeDigits&quot; in &nbsp; &nbsp; 0)&nbsp; &nbsp;echo &quot;Login statistics per second:&quot;&nbsp; &nbsp; ;; # 2016/05/12@12:34:56 &nbsp; &nbsp; 1)&nbsp; &nbsp;echo &quot;Login statistics per 10 seconds:&quot;;; # 2016/05/12@12:34:5 &nbsp; &nbsp; 2|3) echo &quot;Login statistics per minute:&quot;&nbsp; &nbsp; ;; # 2016/05/12@12:34: &nbsp; &nbsp; 4)&nbsp; &nbsp;echo &quot;Login statistics per 10 minutes:&quot;;; # 2016/05/12@12:3 &nbsp; &nbsp; 5|6) echo &quot;Login statistics per hour:&quot;&nbsp; &nbsp; &nbsp; ;; # 2016/05/12@12: &nbsp; &nbsp; 7)&nbsp; &nbsp;echo &quot;Login statistics per 10 hours:&quot;&nbsp; ;; # 2016/05/12@1 &nbsp; &nbsp; 8)&nbsp; &nbsp;echo &quot;Login statistics per day:&quot;&nbsp; &nbsp; &nbsp; &nbsp;;; # 2016/05/12@ &nbsp; esac # CutTimeDigits &nbsp; TmpFile=${DbLogPrefix:-`basename $0`.$$}.LogParser.tmp &nbsp; awk &#39; &nbsp; &nbsp; BEGIN { &nbsp; &nbsp; &nbsp; NoNum=&quot;(-----)&quot; &nbsp; &nbsp; &nbsp; TmpFile=&quot;&#39;$TmpFile&#39;&quot; &nbsp; &nbsp; &nbsp; TimeSize=19-&#39;$CutTimeDigits&#39; &nbsp; &nbsp; &nbsp; Logins=&quot;&#39;$Logins&#39;&quot; &nbsp; &nbsp; &nbsp; Params=&quot;&#39;$Params&#39;&quot; &nbsp; &nbsp; &nbsp; Fatal=&quot;&#39;$Fatal&#39;&quot; &nbsp; &nbsp; &nbsp; Errors=&quot;&#39;$Errors&#39;&quot; &nbsp; &nbsp; &nbsp; Remains=&quot;&#39;$Remains&#39;&quot; &nbsp; &nbsp; &nbsp; Summary=&quot;&#39;$Summary&#39;&quot; # # &quot;Logins&quot; = the group of the messages related to the activity on User Control Table: # &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(298)&quot;]=&quot;KILL signal received.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(333)&quot;]=&quot;Multi-user session begin.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(334)&quot;]=&quot; session end. (334)&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(451)&quot;]=&quot; session begin for on . (451)&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(452)&quot;]=&quot;Login by on .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(453)&quot;]=&quot;Logout by on .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(562)&quot;]=&quot;HANGUP signal received.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(708)&quot;]=&quot;Userid is now .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(742)&quot;]=&quot;Login usernum , userid , on .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(739)&quot;]=&quot;Logout usernum , userid , on .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(792)&quot;]=&quot;Message received with bad usernum.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(794)&quot;]=&quot;Usernum&nbsp; terminated abnormally.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(795)&quot;]=&quot;Error reading socket= ret= errno=.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(796)&quot;]=&quot;Error writing msg, socket= errno= usernum= disconnected.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; &quot;(797)&quot;]=&quot;Partial write, socket= msglen= ret= user disconnected.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(1153)&quot;]=&quot;BROKER detects death of server .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(1334)&quot;]=&quot;Rejecting login -- too many users for this server.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(1166)&quot;]=&quot;Server disconnecting user .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2252)&quot;]=&quot;Begin transaction backout.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2253)&quot;]=&quot;Transaction backout completed.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2266)&quot;]=&quot;Expected user received user .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2518)&quot;]=&quot;Started. (APW, BIW, AIW or WDOG)&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2519)&quot;]=&quot;Disconnected. (APW or WDOG)&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2520)&quot;]=&quot;Stopped. (BIW or AIW)&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2268)&quot;]=&quot;Invalid message was received for an attempted login.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2525)&quot;]=&quot;Disconnecting dead server .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2526)&quot;]=&quot;Disconnecting client of dead server .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(2527)&quot;]=&quot;Disconnecting dead user .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(4375)&quot;]=&quot;Received signal ; handling as SIGHUP.&quot; &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(4698)&quot;]=&quot;User count exceeded. Failed attempt to login by on .&quot; #&nbsp; &nbsp; &nbsp;LoginsNum[ &quot;(4732)&quot;]=&quot;Login by on . Pid .&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# DEC/OpenVMS #&nbsp; &nbsp; &nbsp;LoginsNum[ &quot;(4734)&quot;]=&quot;Logout by on . Pid .&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # DEC/OpenVMS &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(5569)&quot;]=&quot;Quiet point request login by on .&quot; # V8.2A &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(5570)&quot;]=&quot;Quiet point request logout&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# V8.2A &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(7129)&quot;]=&quot;Usr set name to .&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V8.3B Dbdes, Aimage new, Aimage list, BACKUP &nbsp; &nbsp; &nbsp; LoginsNum[ &quot;(8873)&quot;]=&quot;Login usernum , remote SQL client.&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V9.1B, logout with msg 453 #&nbsp; &nbsp; &nbsp;LoginsNum[&quot;(12092)&quot;]=&quot;User disconnect initiated.&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# V10.1A, Not used &nbsp; &nbsp; &nbsp; LoginsNum[&quot;(12454)&quot;]=&quot;Server has unresolved pending connections(s). Please check port .&quot; &nbsp; &nbsp; &nbsp; LoginsNum[&quot;(12455)&quot;]=&quot;Clearing pending connections from server &quot;&nbsp; &nbsp; &nbsp;# V10.2B &nbsp; &nbsp; &nbsp; LoginsNum[&quot;(17961)&quot;]=&quot;User set tty to . (17961)&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V11.6 # # Identify the messages without the numbers by their text pattern: # # PROMON&nbsp; 5: (-----) Login by root. # BACKUP&nbsp; 7: (-----) Login by root. # SQLSRV2 3: (-----) Login by user 2525. Using TCP/IP IPV4 address 192.168.10.162 &nbsp; &nbsp; &nbsp; LoginsMsg[&quot;Login by&quot;]=&quot;(SQL User, PROMON or BACKUP)&quot; &nbsp; &nbsp; &nbsp; LoginsMsg[&quot;Logout by&quot;]=&quot;SQL User (SQLSRV2)&quot; # SQLSRV2 3: (-----) Logout by user 2525. &nbsp; &nbsp; &nbsp; LoginsMsg[&quot;Sending signal to user&quot;]=&quot;(BROKER or PROSHUT)&quot; &nbsp; &nbsp; &nbsp; LoginsMsg[&quot;User disconnect initiated&quot;]=&quot;(PROSHUT)&quot; &nbsp; &nbsp; &nbsp; LoginsMsg[&quot;Received RECONNECT from WTB&quot;]=&quot;(Webspeed user/agent)&quot; # This is an informational message which is sent on behalf of a user. # This message indicates that the user who connected to the database # server is a Webspeed user/agent and that the initial connection # between the WebSpeed broker and agent was completed. &nbsp; &nbsp; &nbsp; LoginsMsg[&quot;Notifying srvr&quot;]=&quot;, conn , to terminate remote user (12093)&quot; # SHUT 2146: (-----) User 7775 disconnect initiated # SHUT 2146: (453)&nbsp; &nbsp;Logout by on batch. # BROKER&nbsp; 0: (-----) Notifying srvr 24, conn 24, to terminate remote user 7775 &lt;== should be (12093) # BROKER&nbsp; 0: (-----) Sending signal 5 to user 7775 # SRV&nbsp; &nbsp; 24: (1166)&nbsp; Server disconnecting user 7775. # # &quot;Ignore&quot; = the group of the informational messages that can be ignored: # # Miscellaneous: # &nbsp; &nbsp; &nbsp; IgnoreNum[&nbsp; &quot;(439)&quot;]=&quot;** Save file named core for analysis by Progress Software Corporation.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(2261)&quot;]=&quot;Sending signal to connected user(s).&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(2263)&quot;]=&quot;Resending shutdown request to user(s).&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(8863)&quot;]=&quot;This broker supports 4GL server groups only.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(8864)&quot;]=&quot;This broker supports SQL server groups only.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(8865)&quot;]=&quot;This broker supports both 4GL and SQL server groups.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(10471)&quot;]=&quot;Database connections have been enabled.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(16869)&quot;]=&quot;Removed shared memory with segment_id: &quot; # # Warnings: # &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5407)&quot;]=&quot;WARNING: -nb exceeded. Automatically increasing from to .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5408)&quot;]=&quot;WARNING: -l exceeded. Automatically increasing from to .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5409)&quot;]=&quot;WARNING: -mmax exceeded. Automatically increasing from to .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5410)&quot;]=&quot;WARNING: -D limit has been exceeded; automatically increasing to .&quot; # # Connection: # &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5644)&quot;]=&quot;Started for using tcp IPV4 address 0.0.0.0, pid .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5645)&quot;]=&quot;This is an additional broker for this protocol.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5646)&quot;]=&quot;Started on port using tcp IPV4 address 0.0.0.0, pid .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5512)&quot;]=&quot;Previous message sent on behalf of user . (5512)&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(14658)&quot;]=&quot;Previous message sent on behalf of user , server pid , broker pid . (5512)&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(10836)&quot;]=&quot;Database connections are not allowed at this time.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(12698)&quot;]=&quot;User Roles: &quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(12699)&quot;]=&quot;Database Options: &quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(15646)&quot;]=&quot;Started on port using tcp, pid .&quot; # # SQLSRV2: Database statistics # &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(10995)&quot;]=&quot;Database statistics () updated for all tables.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(10996)&quot;]=&quot;Database statistics () updated for table .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(10997)&quot;]=&quot;Database statistics () updated by direct user sql statement ().&quot; # # RFUTIL: # &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(3774)&quot;]=&quot;Backup after-image extent and mark it as empty.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(3776)&quot;]=&quot;Backup ai extent and mark it as empty.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(3777)&quot;]=&quot;Switched to ai extent .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(3778)&quot;]=&quot;This is after-image file number since the last AIMAGE BEGIN&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(3789)&quot;]=&quot;Marked after-image extent EMPTY.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(11805)&quot;]=&quot;Unlocking after-image file and locking ALL FULL after-image files beginning with file .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(12074)&quot;]=&quot;The After-image extent was successfully extracted.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(13154)&quot;]=&quot;Marked after-image extent ARCHIVED.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(13199)&quot;]=&quot;After-image extent has been copied to .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(13231)&quot;]=&quot;From this point forward all after-image extents will be archived to .&quot; # # BACKUP: # &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(1074)&quot;]=&quot;Wrote a total of backup blocks using bytes of media.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(1361)&quot;]=&quot;Incremental backup started.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(1362)&quot;]=&quot;Full backup started.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(1363)&quot;]=&quot;Incremental backup successfully completed.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(1364)&quot;]=&quot;Full backup successfully completed.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(1365)&quot;]=&quot;Database copied from .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(1366)&quot;]=&quot;Incremental restore of sequence started.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(1367)&quot;]=&quot;Incremental restore of sequence completed.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(3664)&quot;]=&quot;Incremental backup started.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5459)&quot;]=&quot;Begin backup of Before Image file(s).&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5460)&quot;]=&quot;End backup of Before Image file(s).&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5461)&quot;]=&quot;Begin backup of Data file(s).&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(5462)&quot;]=&quot;End backup of Data file(s).&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(6678)&quot;]=&quot;NOTE: Backup media estimates done without database scan.&quot; # V8.3A &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(6680)&quot;]=&quot;Estimate for uncompressed full backup is provided.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(6686)&quot;]=&quot; active blocks out of blocks in will be dumped.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(6688)&quot;]=&quot; BI blocks will be dumped.&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V8.3B &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(6689)&quot;]=&quot;Backup requires&nbsp; blocks ( Mb) of media.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(6699)&quot;]=&quot;Restore would require&nbsp; blocks ( Mb) of media.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(6760)&quot;]=&quot;This backup was taken .&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V8.3B &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(9285)&quot;]=&quot;Backup requires an estimated of media.&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# V9.1C &nbsp; &nbsp; &nbsp; IgnoreNum[ &quot;(9286)&quot;]=&quot;Restore would require an estimated&nbsp; db blocks using of media.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(12850)&quot;]=&quot;Backup blocks will be written to .&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V10.2B &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(13625)&quot;]=&quot;Wrote a total of backup blocks using of media.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(13786)&quot;]=&quot;This backup was also used to enable after-image on the source database.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(14256)&quot;]=&quot;The Replication Server has been notified that an online backup is about to be performed.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(14258)&quot;]=&quot;The online backup of this database has completed normally.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(15108)&quot;]=&quot;The online backup has finished backing up the BI. The Replication Agent will now begin recovery synchronization followed by normal processing.&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(15109)&quot;]=&quot;At Database close the number of live transactions is .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(15321)&quot;]=&quot;Before Image Log Initialisation at block offset .&quot; &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(15743)&quot;]=&quot;Before Image Log Completion at Block Offset .&quot;&nbsp; &nbsp; &nbsp; # V10.2B &nbsp; &nbsp; &nbsp; IgnoreNum[&quot;(16866)&quot;]=&quot;Dumped active BI blocks.&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V11.2 # # Identify the messages without the numbers by their text pattern: # # BROKER&nbsp; 2: (-----) Shared Library Path set to LIBPATH= # &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;Shared Library Path set to&quot;]=&quot;&quot; # SQLSRV2 3: (-----) SQL Server 11.6.01 started, configuration: &quot;dbname.virtualconfig&quot; # SQLSRV2 3: (-----) &quot;/path/to/dbname&quot; started on IPv4 port 1025 for address 0.0.0.0, pid 9568520 (0x00920108). # SQLSRV2 3: (-----) Thread stack size: 1024000 (bytes). # SQLSRV2 3: (-----) DLC from ENVIRONMENT VARIABLE is: /usr/dlc # SQLSRV2 3: (-----) WRKDIR from ENVIRONMENT VARIABLE is: /usr/wrk/ # SQLSRV2 3: (-----) JDKHOME from ENVIRONMENT VARIABLE is: /usr/dlc/jdk # SQLSRV2 3: (-----) JREHOME from ENVIRONMENT VARIABLE is: /usr/dlc/jdk/jre # SQLSRV2 3: (-----) CLASSPATH from DEFAULT is: # SQLSRV2 3: (-----) PROSQL_LOCKWAIT_TIMEOUT value is: 5 seconds &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;started, configuration:&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;started on port for address pid&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;Thread stack size:&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;DLC from ENVIRONMENT VARIABLE is:&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;WRKDIR from ENVIRONMENT VARIABLE is:&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;JDKHOME from ENVIRONMENT VARIABLE is:&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;JREHOME from ENVIRONMENT VARIABLE is:&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;CLASSPATH from DEFAULT is:&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; IgnoreMsg[&quot;PROSQL_LOCKWAIT_TIMEOUT value is:&quot;]=&quot;&quot; &nbsp; &nbsp; &nbsp; PrevLogins=&quot;&quot; &nbsp; &nbsp; &nbsp; PrevLoginTime=&quot;&quot; # SunOS can rise the error if the arrays are not &quot;initiated&quot;: # awk: Count is not an array &nbsp; &nbsp; &nbsp; TotalNumCount[&quot;&quot;]=0 &nbsp; &nbsp; &nbsp; TotalMsgCount[&quot;&quot;]=0 &nbsp; &nbsp; &nbsp; LoginNumCount[&quot;&quot;]=0 &nbsp; &nbsp; &nbsp; LoginMsgCount[&quot;&quot;]=0 &nbsp; &nbsp; } # BEGIN # # Skip the lines that do not begin with timestamps # like [2016/05/12@14:03:52.486+0400] #&nbsp; &nbsp; &nbsp; &nbsp;1234567890123456789012345678 # &nbsp; &nbsp; ! /^\\[/ {next} # # Lines with timestamps: # &nbsp; &nbsp; { CurrTime=substr($1,2,length($1)-2) # Time without &quot;[]&quot; &nbsp; &nbsp; &nbsp; if(InitTime==&quot;&quot;) InitTime=CurrTime &nbsp; &nbsp; &nbsp; if(PrevTime==&quot;&quot;) PrevTime=CurrTime &nbsp; &nbsp; &nbsp; D=substr(CurrTime,1,11) # Year/Month/Day &nbsp; &nbsp; &nbsp; H=substr(CurrTime,12,2) # Hours &nbsp; &nbsp; &nbsp; M=substr(CurrTime,15,2) # Minutes &nbsp; &nbsp; &nbsp; S=substr(CurrTime,18,2) # Seconds &nbsp; &nbsp; &nbsp; Z=substr(CurrTime,length(CurrTime)-4) # Timezone -0400 &nbsp; &nbsp; } &nbsp; &nbsp; Z ~/^\\+/ {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # TZ +0400 &nbsp; &nbsp; &nbsp; H-=substr(Z,2,2)&nbsp; &nbsp; &nbsp; &nbsp; # Hours &nbsp; &nbsp; &nbsp; M-=substr(Z,4,2)&nbsp; &nbsp; &nbsp; &nbsp; # Minutes &nbsp; &nbsp; } # TZ +0400 &nbsp; &nbsp; Z ~/^\\-/ {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # TZ -0400 &nbsp; &nbsp; &nbsp; H+=substr(Z,2,2)&nbsp; &nbsp; &nbsp; &nbsp; # Hours &nbsp; &nbsp; &nbsp; M+=substr(Z,4,2)&nbsp; &nbsp; &nbsp; &nbsp; # Minutes &nbsp; &nbsp; } # TZ -0400 # # Article Number: 000064856 # Defect PSC00256028, PSC00257044 # Upgrade to OpenEdge 11.4 or later # A partial fix is included in OpenEdge 11.2.1 and 11.3.x # As a side effect of the fix, messages from signal handlers will always show # as UTC time instead of the database timezone. # # Example: # [2016/05/23@04:11:27.185-0400] P-12 T-1 I ABL 8: (452) Login by user on /dev/pts/4. # [2016/05/23@08:52:07.000+0000] P-12 T-1 I ABL 8: (562) HANGUP signal received. # [2016/05/23@04:52:07.926-0400] P-12 T-1 I ABL 8: (453) Logout by hchen on /dev/pts/4. # # Convert the current time to UTC time to get the correct &quot;Logins&quot; statistics: &nbsp; &nbsp; { if(length(H)==1) H=&quot;0&quot; H &nbsp; &nbsp; &nbsp; if(length(M)==1) M=&quot;0&quot; M &nbsp; &nbsp; &nbsp; if(length(M)==1) S=&quot;0&quot; S &nbsp; &nbsp; &nbsp; CurrLogins=D H &quot;:&quot; M &quot;:&quot; S &nbsp; &nbsp; &nbsp; CurrLogins=substr(CurrLogins,1,TimeSize) # TimeSize=19 = no cuts &nbsp; &nbsp; } # Timestamps # # Logins/logouts statistics report: # &nbsp; &nbsp; Logins==&quot;yes&quot; &amp;&amp; PrevLogins!=CurrLogins { &nbsp; &nbsp; &nbsp; for(Num in LoginNumCount) if(LoginNumCount[Num]&gt;0) &nbsp; &nbsp; &nbsp; { # Time: 2016/05/12@14:03:52.486+0400 #&nbsp; &nbsp; &nbsp; &nbsp;1234567890123456789012345678 # &nbsp; &nbsp; &nbsp; &nbsp; printf&quot;%10s %8s %8s %4d %7s %s\\n&quot;,\\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(PrevLoginTime,1,10),\\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(PrevLoginTime,12),\\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(LastLoginTime,12),\\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginNumCount[Num],\\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Num,\\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginsNum[Num] # Either set to zero or delete an element of the array - any option that will work: &nbsp; &nbsp; &nbsp; &nbsp; LoginNumCount[Num]=0 &nbsp; &nbsp; &nbsp; &nbsp; delete LoginNumCount[Num] &nbsp; &nbsp; &nbsp; } # for Num in LoginNumCount &nbsp; &nbsp; &nbsp; for(Msg in LoginMsgCount) if(LoginMsgCount[Msg]&gt;0) { &nbsp; &nbsp; &nbsp; &nbsp; printf&quot;%10s %8s %8s %4d %7s %s\\n&quot;,\\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(PrevLoginTime,1,10),\\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(PrevLoginTime,12),\\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(LastLoginTime,12),\\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginMsgCount[Msg],\\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NoNum,\\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Msg &quot; &quot; LoginsMsg[Msg] # Either set to zero or delete an element of the array - any option that will work: &nbsp; &nbsp; &nbsp; &nbsp; LoginMsgCount[Msg]=0 &nbsp; &nbsp; &nbsp; &nbsp; delete LoginMsgCount[Msg] &nbsp; &nbsp; &nbsp; } # for Msg in LoginMsgCount &nbsp; &nbsp; &nbsp; PrevLoginTime=&quot;&quot; &nbsp; &nbsp; &nbsp; PrevLogins=CurrLogins &nbsp; &nbsp; } # Logins==&quot;yes&quot; # # Msg number is column 7 if there is a space between user type and user number: # [2016/05/12@14:03:52.486+0400] P-1 T-1 I ABL 10: (452) Login by root on batch. # # Msg number is column 6 if there is no space between user type and user number: # [2016/04/05@06:00:23.102+0600] P-2 T-1 I RFUTI1312: (452) Login by root on batch. # &nbsp; &nbsp; { Num=&quot;&quot; &nbsp; &nbsp; &nbsp; for(Col=6;Col&lt;=7;Col++) if($Col ~ /^\\([0-9]*-*\\)$/) { &nbsp; &nbsp; &nbsp; &nbsp; Num=$Col &nbsp; &nbsp; &nbsp; &nbsp; break &nbsp; &nbsp; &nbsp; } # for Col &nbsp; &nbsp; &nbsp; if(Num==&quot;&quot;) next # # Cleaning a message: remove any word containing a digit. # &nbsp; &nbsp; &nbsp; Msg=$(Col+1) &nbsp; &nbsp; &nbsp; for(i=Col+2;i&lt;=NF;i++) if($i !~/[0-9]/) Msg=Msg &quot; &quot; $i &nbsp; &nbsp; } # # Messages without numbers: # &nbsp; &nbsp; Num==NoNum { # # Ignore the block dumps (dont count them in the Summary): # (-----) 1fd0:&nbsp; 652d 5883 4e53 5056 0000 2565 2d74 7970 # &nbsp; &nbsp; &nbsp; if(NF==Col+9 &amp;&amp; $(Col+1) ~ /^[0-1]/ &amp;&amp; $(Col+1) ~ /:$/) next # Summary: &nbsp; &nbsp; &nbsp; TotalMsgCount[Msg]++ # Fatal: &nbsp; &nbsp; &nbsp; if($4==&quot;F&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; FatalCount++ &nbsp; &nbsp; &nbsp; &nbsp; if(Fatal==&quot;yes&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; &nbsp; &nbsp; } # if Fatal &nbsp; &nbsp; &nbsp; } # if &quot;F&quot; # Errors: &nbsp; &nbsp; &nbsp; if(Msg ~ /SYSTEM ERROR: /) { &nbsp; &nbsp; &nbsp; &nbsp; ErrorsCount++ &nbsp; &nbsp; &nbsp; &nbsp; if(Errors==&quot;yes&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; &nbsp; &nbsp; } # if Errors &nbsp; &nbsp; &nbsp; } # if SYSTEM ERROR: &nbsp; &nbsp; &nbsp; for(Pattern in IgnoreMsg) if(index(Msg,Pattern)&gt;0) next &nbsp; &nbsp; &nbsp; for(Pattern in LoginsMsg) if(index(Msg,Pattern)&gt;0) { &nbsp; &nbsp; &nbsp; &nbsp; LoginMsgCount[Pattern]++ &nbsp; &nbsp; &nbsp; &nbsp; if(PrevLoginTime==&quot;&quot;) &nbsp; &nbsp; &nbsp; &nbsp; PrevLoginTime=CurrTime &nbsp; &nbsp; &nbsp; &nbsp; LastLoginTime=CurrTime &nbsp; &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; &nbsp; } # LoginsMsg &nbsp; &nbsp; &nbsp; if(Startup==&quot;yes&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; if(Params==&quot;yes&quot;) print &nbsp; &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; &nbsp; } # if Startup &nbsp; &nbsp; &nbsp; RemainsCount++ &nbsp; &nbsp; &nbsp; if(Remains==&quot;yes&quot;) print &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; } #&nbsp; Messages without numbers # # The numbered messages: # # Summary: &nbsp; &nbsp; { TotalNumCount[Num]++ &nbsp; &nbsp; &nbsp; Example[Num]=Msg # Fatal: &nbsp; &nbsp; &nbsp; if($4==&quot;F&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; FatalCount++ &nbsp; &nbsp; &nbsp; &nbsp; if(Fatal==&quot;yes&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; &nbsp; &nbsp; } # if Fatal &nbsp; &nbsp; &nbsp; } # if &quot;F&quot; # Errors: &nbsp; &nbsp; &nbsp; if(Msg ~ /SYSTEM ERROR: /) { &nbsp; &nbsp; &nbsp; &nbsp; ErrorsCount++ &nbsp; &nbsp; &nbsp; &nbsp; if(Errors==&quot;yes&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; &nbsp; &nbsp; } # if Errors &nbsp; &nbsp; &nbsp; } # if SYSTEM ERROR: # # &quot;Params&quot; group: # # BROKER&nbsp; 0: (333)&nbsp; &nbsp;Multi-user session begin. # BROKER&nbsp; 0: (4234)&nbsp; Progress OpenEdge Release on . # BROKER&nbsp; 0: (10471) Database connections have been enabled. # PROLOG&nbsp; 5: (12684) prolog log file truncation . (12684) # &nbsp; &nbsp; &nbsp; if(Num==&quot;(333)&quot;)&nbsp; &nbsp;Startup=&quot;yes&quot; &nbsp; &nbsp; &nbsp; if(Num==&quot;(4234)&quot;)&nbsp; Startup=&quot;yes&quot; &nbsp; &nbsp; &nbsp; if(Num==&quot;(10471)&quot;) Startup=&quot;no&quot; &nbsp; &nbsp; &nbsp; if($5!=&quot;BROKER&quot; &amp;&amp; $5!=&quot;PROLOG&quot;) Startup=&quot;no&quot; &nbsp; &nbsp; &nbsp; for(Pattern in IgnoreNum) if(Num==Pattern) next &nbsp; &nbsp; &nbsp; for(Pattern in LoginsNum) if(Num==Pattern) { &nbsp; &nbsp; &nbsp; &nbsp; LoginNumCount[Pattern]++ &nbsp; &nbsp; &nbsp; &nbsp; if(PrevLoginTime==&quot;&quot;) &nbsp; &nbsp; &nbsp; &nbsp; PrevLoginTime=CurrTime &nbsp; &nbsp; &nbsp; &nbsp; LastLoginTime=CurrTime &nbsp; &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; &nbsp; } # LoginsNum &nbsp; &nbsp; &nbsp; if(Startup==&quot;yes&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; if(Params==&quot;yes&quot;)&nbsp; print &nbsp; &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; &nbsp; } # if Startup &nbsp; &nbsp; &nbsp; RemainsCount++ &nbsp; &nbsp; &nbsp; if(Remains==&quot;yes&quot;) print &nbsp; &nbsp; &nbsp; next &nbsp; &nbsp; } # Numbered messages &nbsp; &nbsp; END { &nbsp; &nbsp; &nbsp; if(Logins==&quot;yes&quot;) &nbsp; &nbsp; &nbsp; for(Num in LoginNumCount) if(LoginNumCount[Num]&gt;0) &nbsp; &nbsp; &nbsp; &nbsp; printf&quot;%10s %8s %8s %4d %7s %s\\n&quot;,\\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(PrevLoginTime,1,10),\\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(PrevLoginTime,12),\\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(LastLoginTime,12),\\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginNumCount[Num],\\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Num,\\ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginsNum[Num] &nbsp; &nbsp; &nbsp; # if Logins &nbsp; &nbsp; &nbsp; Count=0 &nbsp; &nbsp; &nbsp; NumTypeCount=0 &nbsp; &nbsp; &nbsp; MsgTypeCount=0 &nbsp; &nbsp; &nbsp; for(Num in TotalNumCount) if(TotalNumCount[Num]&gt;0) { &nbsp; &nbsp; &nbsp; &nbsp; Count+=TotalNumCount[Num] &nbsp; &nbsp; &nbsp; &nbsp; NumTypeCount++ &nbsp; &nbsp; &nbsp; } # for Num if &nbsp; &nbsp; &nbsp; for(Msg in TotalMsgCount) if(TotalMsgCount[Msg]&gt;0) { &nbsp; &nbsp; &nbsp; &nbsp; Count+=TotalMsgCount[Msg] &nbsp; &nbsp; &nbsp; &nbsp; MsgTypeCount++ &nbsp; &nbsp; &nbsp; } # for Msg if &nbsp; &nbsp; &nbsp; printf&quot;\\nProcessed %d lines, %d messages with timestamps\\n&quot;,NR,Count &nbsp; &nbsp; &nbsp; printf&quot;from %s\\n&quot;,InitTime &nbsp; &nbsp; &nbsp; printf&quot;&nbsp; to %s\\n&quot;,CurrTime &nbsp; &nbsp; &nbsp; printf&quot;Numbered messages: %d, without numbers: %d\\n&quot;,NumTypeCount,MsgTypeCount &nbsp; &nbsp; &nbsp; if(Fatal!=&quot;yes&quot;)&nbsp; RemainsCount-=FatalCount &nbsp; &nbsp; &nbsp; if(Errors!=&quot;yes&quot;) RemainsCount-=ErrorsCount &nbsp; &nbsp; &nbsp; printf&quot;System errors: %d, fatal errors: %d, \\&quot;remains\\&quot;: %d\\n&quot;,ErrorsCount,FatalCount,RemainsCount &nbsp; &nbsp; &nbsp; if(&quot;&#39;$Summary&#39;&quot;!=&quot;yes&quot;) exit # # Replace the examples by the known message descriptions: # &nbsp; &nbsp; &nbsp; for(Num in LoginsNum) Example[Num]=LoginsNum[Num] &nbsp; &nbsp; &nbsp; for(Num in IgnoreNum) Example[Num]=IgnoreNum[Num] &nbsp; &nbsp; &nbsp; printf&quot;\\nSummary per the message numbers:\\n&quot; &nbsp; &nbsp; &nbsp; for(Num in TotalNumCount) if(TotalNumCount[Num]&gt;0) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; printf&quot;%6d %7s %s\\n&quot;,TotalNumCount[Num],Num,Example[Num] &gt;TmpFile &nbsp; &nbsp; &nbsp; for(Msg in TotalMsgCount) if(TotalMsgCount[Msg]&gt;0) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; printf&quot;%6d %7s %s\\n&quot;,TotalMsgCount[Msg],NoNum,Msg &gt;TmpFile &nbsp; &nbsp; &nbsp; close(TmpFile) &nbsp; &nbsp; } # END &nbsp; &#39; - &nbsp; test -f $TmpFile &amp;&amp; \\ &nbsp; cat&nbsp; &nbsp; &nbsp;$TmpFile | sort -n -r &amp;&amp; \\ &nbsp; rm&nbsp; &nbsp;-f $TmpFile } # LogParser() #------------------------------------------------------------------------------ # Msg() { &nbsp; Num=$1 &nbsp; test -z &quot;$DLC&quot; &amp;&amp; \\ &nbsp; echo &quot;Progress DLC environment variable variable is not set.&quot; &gt;&amp;2 &amp;&amp; \\ &nbsp; return &nbsp; if [ ! -f $DLC/prohelp/msgdata/msg1 ] &nbsp; then &nbsp; &nbsp; echo &quot;Progress DLC environment variable may not be set correctly. Set DLC variable to Progress installation directory. Progress DLC setting: $DLC&quot; &gt;&amp;2 &nbsp; &nbsp; return &nbsp; fi &nbsp; test -z &quot;$Num&quot; &amp;&amp; \\ &nbsp; echo &quot;You do&#39;t specify the message number.&quot; &gt;&amp;2 &amp;&amp; \\ &nbsp; return &nbsp; test $Num -gt 0 2&gt;/dev/null &nbsp; if [ $? -ne 0 ] &nbsp; then &nbsp; &nbsp; echo &quot;Message number ($Num) should be an integer greater than 0.&quot; &gt;&amp;2 &nbsp; &nbsp; return &nbsp; fi &nbsp; i=`expr $Num - 1` &nbsp; i=`expr $i / 50` &nbsp; i=`expr $i + 1` &nbsp; File=$DLC/prohelp/msgdata/msg$i &nbsp; if [ ! -f $File ] &nbsp; then &nbsp; &nbsp; echo &quot;Failed to find $File&quot; &nbsp; &nbsp; echo &quot;$Num seemed too large for current Progress version&quot; &nbsp; &nbsp; cat $DLC/version &nbsp; &nbsp; return &nbsp; fi &gt;&amp;2 &nbsp; test ! -r $File &amp;&amp; \\ &nbsp; echo &quot;You don&#39;t have the permissions to read $File&quot; &gt;&amp;2 &amp;&amp; \\ &nbsp; return &nbsp; awk &#39;$1==&#39;$Num&#39; { &nbsp; &nbsp; i=length($1)+3 &nbsp; &nbsp; Text=substr($0,i) &nbsp; &nbsp; i=index(Text,&quot;\\&quot; \\&quot;&quot;) &nbsp; &nbsp; Desc=substr(Text,i+3) &nbsp; &nbsp; Text=substr(Text,1,i-1) &nbsp; &nbsp; i=index(Desc,&quot;\\&quot; \\&quot;&quot;) &nbsp; &nbsp; Desc=substr(Desc,1,i-1) &nbsp; &nbsp; print Text &nbsp; &nbsp; print Desc &nbsp; &nbsp; exit &nbsp; }&#39; $File | \\ &nbsp; sed -e &#39;s/\\&quot;\\&quot;/\\&quot;/&#39; } # Msg() #------------------------------------------------------------------------------ # # Set the default interval for login/logout statistics: # Options=6&nbsp; # per hour FileList=&quot;&quot; while [ $# -gt 0 ] do &nbsp; case $1 in &nbsp; &nbsp; -m) Msg $2; exit;; &nbsp; &nbsp; -h*|-help|--help) Usage;; &nbsp; &nbsp; [0-9]*|-*) Options=&quot;$Options $1&quot;;; &nbsp; &nbsp; *) test ! -f &quot;$1&quot; &amp;&amp; echo &quot;Input file $1 does not exist!&quot; &amp;&amp; exit 1 &nbsp; &nbsp; &nbsp; &nbsp;FileList=&quot;$FileList $1&quot; &nbsp; &nbsp; ;; &nbsp; esac # case $1 &nbsp; shift done&nbsp; # while [ $# -gt 0 ] # Trim the spaces: FileList=`echo $FileList` test &quot;$Options&quot; || \\ Options=&quot;-prs&quot; # = Params Remains Summary echo &quot;$THIS Release $Release&quot; test -z &quot;$FileList&quot; &amp;&amp; \\ LogParser $Options || \\ for File in $FileList do &nbsp; Size=`ls -l $File | awk &#39;{print $5}&#39; 2&gt;/dev/null` &nbsp; echo &quot; Log File: $File Log Size: $Size&quot; &nbsp; test $Size -gt 20000000 &amp;&amp; \\ &nbsp; echo &quot;Wait...&quot; &nbsp; cat $File | LogParser $Options done 2&gt;&amp;1 # #------------------------------------------------------------------------------","headline":"Shell Script - Progress Log Parsing","mainEntityOfPage":{"@type":"WebPage","@id":"https://vemarahub.github.io/shell-script-progress-log-parsing/"},"url":"https://vemarahub.github.io/shell-script-progress-log-parsing/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://vemarahub.github.io/feed.xml" title="VR Exploring" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">VR Exploring</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/">Home</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Shell Script - Progress Log Parsing</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2020-03-25T08:20:00+00:00" itemprop="datePublished">Mar 25, 2020
      </time> <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Rajesh Nair</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <div dir="ltr" style="text-align: left;" trbidi="on">
<br />
<b>Script : </b>Shell script to parse the progress database log file<br />
<br />
<b>Script Name: </b>dblogparse.sh<br />
<br />
<b>Script Function:&nbsp;</b>Script classifies the messages into 4 categories (groups):<br />
&nbsp;1. Database startup parameters ("Parameters" group);<br />
&nbsp;2. Logins/logouts messages ("Logins" group);<br />
&nbsp;3. Informational messages that can be ignored ("Ignore" group);<br />
&nbsp;4. Any messages that do not belong to the above groups ("Remains" group).<br />
<br />
&nbsp;&nbsp;<b>Script Usage: </b>./dblogparse.sh &lt; log path &gt; [-f] [-e] [-r] [-p] [-s] [-l] [-m] [-h]<br />
<br />
-f Show the fatal errors (marked as \"F\" in Progress log files);<br />
-e Show the system errors (the messages with words \"SYSTEM ERROR:\");<br />
-r Show the remained messages (except \"Logins\", \"Params\" and \"Ignore\" groups);<br />
-p Show the startup parameters of Progress multi-user sessions (\"Params\" group);<br />
-s Summary: the number of messages per message numbers (and without numbers);<br />
-l Report the statistics for the messages in the \"Logins\" group;<br />
-m ${UL}Num${UU} Display the description of Progress message number;<br />
-h|-help Display this help.<br />
<b><u><br /></u></b>
<b><u>Code:</u></b><br />
<b><u><br /></u></b>
#!/bin/sh<br />
------------------------------------<br />
<br />
THIS=`basename $0`<br />
<br />
Usage()<br />
{<br />
# Bold/unbold terminal codes:<br />
#<br />
BD=`tput smso` # Enter standout mode (bold on rxvt)<br />
UB=`tput rmso` # Exit standout mode<br />
<br />
# Underline mode:<br />
UL=`tput smul` # Begin underline mode<br />
UU=`tput rmul` # Exit underline mode<br />
<br />
&nbsp; echo "$THIS Release $Release<br />
<br />
Usage:<br />
$BD$THIS$UB [${UL}File${UU} ...] [${UL}Options${UU}]<br />
or<br />
tail -100000 ${UL}File${UU} | ${BD}$THIS$UB [${UL}Options${UU}]<br />
where the options are:<br />
${UL}File${UU}(s) are the log files of Progress databases;<br />
-f Show the fatal errors (marked as \"F\" in Progress log files);<br />
-e Show the system errors (the messages with words \"SYSTEM ERROR:\");<br />
-r Show the remained messages (except \"Logins\", \"Params\" and \"Ignore\" groups);<br />
-p Show the startup parameters of Progress multi-user sessions (\"Params\" group);<br />
-s Summary: the number of messages per message numbers (and without numbers);<br />
-l Report the statistics for the messages in the \"Logins\" group;<br />
The above options can be concatenated. Example: dblog -prs<br />
${UL}Number${UU} - number of last digits to cut from timestamps for \"Logins\" statistics;<br />
-m ${UL}Num${UU} Display the description of Progress message number;<br />
-h|-help Display this help.<br />
<br />
# echo<br />
<br />
&nbsp; exit<br />
} # Usage()<br />
<br />
<br />
#------------------------------------------------------------------------------<br />
#<br />
LogParser()<br />
{<br />
# Creates statistics of the errors or login/logout messages in db log file.<br />
# LogParser reads the messages from a standard input stream (stdin).<br />
#<br />
# It processes approximately 50,000 lines per sec on CPU @ 2.40 GHz.<br />
#<br />
# Number of messages added by Progress versions:<br />
# Ver&nbsp; &nbsp;Date&nbsp; &nbsp; &nbsp; &nbsp;Msg # Range Added<br />
# 10.2B 2009/12/14 12419-15762 3344<br />
# 11.0&nbsp; 2011/12/02 15763-16640&nbsp; 878<br />
# 11.1&nbsp; 2012/06/15 16641-16738&nbsp; &nbsp;98<br />
# 11.2&nbsp; 2013/02/13 16739-17035&nbsp; 296<br />
# 11.3&nbsp; 2013/07/17 17036-17338&nbsp; 302<br />
# 11.4&nbsp; 2014/07/25 17339-17759&nbsp; 421<br />
# 11.5&nbsp; 2014/12/05 17760-17919&nbsp; 160<br />
# 11.6&nbsp; 2015/10/16 17920-18388&nbsp; 468<br />
# 11.7A 2016/03/25 18389-18505&nbsp; 117<br />
#<br />
# Only 200-300 messages used to be written to db log.<br />
<br />
# Options:<br />
#<br />
# -f Show the fatal errors (marked as "F" in Progress log files)<br />
#&nbsp; &nbsp; They are the messages with %g or %G tags in promsgs file.<br />
#&nbsp; &nbsp; The tags are telling to the process to terminate processing;<br />
# -e Show the system errors (the messages with words "SYSTEM ERROR:");<br />
# -r Show the remained messages (except "Logins", "Params" and "Ignore" groups);<br />
# -p Show the startup parameters of Progress multi-user sessions ("Params" group);<br />
# -s Summary: the number of messages per message numbers (and without numbers);<br />
# -l Report the statistics for the messages in the "Logins" group;<br />
# CutTimeDigits - the number of the digits in timestamps to cut off<br />
# while creating the login/logout statistics.<br />
# Range of CutTimeDigits values: 0-8<br />
# 0&nbsp; &nbsp;= 2016/05/12@12:34:56 = per seconds<br />
# 1&nbsp; &nbsp;= 2016/05/12@12:34:5&nbsp; = per 10 seconds<br />
# 2,3 = 2016/05/12@12:34:&nbsp; &nbsp;= per minutes<br />
# 4&nbsp; &nbsp;= 2016/05/12@12:3&nbsp; &nbsp; &nbsp;= per 10 minutes<br />
# 5,6 = 2016/05/12@12:&nbsp; &nbsp; &nbsp; = per hours<br />
# 7&nbsp; &nbsp;= 2016/05/12@1&nbsp; &nbsp; &nbsp; &nbsp; = per 10 or 4 hours<br />
# 8&nbsp; &nbsp;= 2016/05/12@&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= per days<br />
<br />
&nbsp; CutTimeDigits=0 # Default is per second statistics.<br />
&nbsp; Logins="no"<br />
&nbsp; Params="no"<br />
&nbsp; Fatal="no"<br />
&nbsp; Errors="no"<br />
&nbsp; Remains="no"<br />
&nbsp; Summary="no"<br />
&nbsp; Options=""<br />
&nbsp; while [ $# -gt 0 ]<br />
&nbsp; do<br />
# CutTimeDigits:<br />
&nbsp; &nbsp; case "$1" in<br />
&nbsp; &nbsp; &nbsp; [0-9]*)&nbsp; CutTimeDigits=$1; shift; continue;;<br />
&nbsp; &nbsp; esac<br />
<br />
# Params:<br />
&nbsp; &nbsp; case "$1" in<br />
&nbsp; &nbsp; &nbsp; -*[pP]*) Params="yes";&nbsp; Options="$Options Params";;<br />
&nbsp; &nbsp; esac<br />
<br />
# Logins:<br />
&nbsp; &nbsp; case "$1" in<br />
&nbsp; &nbsp; &nbsp; -*[lL]*) Logins="yes";&nbsp; Options="$Options Logins";;<br />
&nbsp; &nbsp; esac<br />
<br />
# Fatal:<br />
&nbsp; &nbsp; case "$1" in<br />
&nbsp; &nbsp; &nbsp; -*[fF]*) Fatal="yes";&nbsp; &nbsp;Options="$Options Fatal";;<br />
&nbsp; &nbsp; esac<br />
<br />
# Errors:<br />
&nbsp; &nbsp; case "$1" in<br />
&nbsp; &nbsp; &nbsp; -*[eE]*) Errors="yes"; Options="$Options Errors";;<br />
&nbsp; &nbsp; esac<br />
<br />
# Remains:<br />
&nbsp; &nbsp; case "$1" in<br />
&nbsp; &nbsp; &nbsp; -*[rR]*) Remains="yes"; Options="$Options Remains";;<br />
&nbsp; &nbsp; esac<br />
<br />
# Summary:<br />
&nbsp; &nbsp; case "$1" in<br />
&nbsp; &nbsp; &nbsp; -*[sS]*) Summary="yes"; Options="$Options Summary";;<br />
&nbsp; &nbsp; esac<br />
<br />
&nbsp; &nbsp; Rest=`echo $1 | tr -d "lLpPeEfFrRsS\-"`<br />
&nbsp; &nbsp; if [ "$Rest" ]<br />
&nbsp; &nbsp; then<br />
&nbsp; &nbsp; &nbsp; echo "LogParser: \"$Rest\" is an unknown option."<br />
&nbsp; &nbsp; &nbsp; exit 1<br />
&nbsp; &nbsp; fi # if Rest<br />
<br />
&nbsp; &nbsp; shift<br />
&nbsp; done&nbsp; # while [ $# -gt 0 ]<br />
<br />
&nbsp; test $CutTimeDigits -gt 8 &amp;&amp; \<br />
&nbsp; CutTimeDigits=8<br />
# CutTimeDigits=0: 2016/05/12@14:03:52<br />
# CutTimeDigits=1: 2016/05/12@14:03:5<br />
# ...<br />
# CutTimeDigits=7: 2016/05/12@1<br />
# CutTimeDigits=8: 2016/05/12@<br />
<br />
&nbsp; Options=`echo $Options | \<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;awk 'BEGIN {RS=" "}<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {print}' | \<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sort` # Options<br />
&nbsp; Options=`echo $Options`<br />
&nbsp; echo "LogParser Options: $Options"<br />
&nbsp; test "$Logins" = "yes" &amp;&amp; \<br />
&nbsp; case "$CutTimeDigits" in<br />
&nbsp; &nbsp; 0)&nbsp; &nbsp;echo "Login statistics per second:"&nbsp; &nbsp; ;; # 2016/05/12@12:34:56<br />
&nbsp; &nbsp; 1)&nbsp; &nbsp;echo "Login statistics per 10 seconds:";; # 2016/05/12@12:34:5<br />
&nbsp; &nbsp; 2|3) echo "Login statistics per minute:"&nbsp; &nbsp; ;; # 2016/05/12@12:34:<br />
&nbsp; &nbsp; 4)&nbsp; &nbsp;echo "Login statistics per 10 minutes:";; # 2016/05/12@12:3<br />
&nbsp; &nbsp; 5|6) echo "Login statistics per hour:"&nbsp; &nbsp; &nbsp; ;; # 2016/05/12@12:<br />
&nbsp; &nbsp; 7)&nbsp; &nbsp;echo "Login statistics per 10 hours:"&nbsp; ;; # 2016/05/12@1<br />
&nbsp; &nbsp; 8)&nbsp; &nbsp;echo "Login statistics per day:"&nbsp; &nbsp; &nbsp; &nbsp;;; # 2016/05/12@<br />
&nbsp; esac # CutTimeDigits<br />
<br />
&nbsp; TmpFile=${DbLogPrefix:-`basename $0`.$$}.LogParser.tmp<br />
<br />
&nbsp; awk '<br />
&nbsp; &nbsp; BEGIN {<br />
&nbsp; &nbsp; &nbsp; NoNum="(-----)"<br />
&nbsp; &nbsp; &nbsp; TmpFile="'$TmpFile'"<br />
&nbsp; &nbsp; &nbsp; TimeSize=19-'$CutTimeDigits'<br />
&nbsp; &nbsp; &nbsp; Logins="'$Logins'"<br />
&nbsp; &nbsp; &nbsp; Params="'$Params'"<br />
&nbsp; &nbsp; &nbsp; Fatal="'$Fatal'"<br />
&nbsp; &nbsp; &nbsp; Errors="'$Errors'"<br />
&nbsp; &nbsp; &nbsp; Remains="'$Remains'"<br />
&nbsp; &nbsp; &nbsp; Summary="'$Summary'"<br />
#<br />
# "Logins" = the group of the messages related to the activity on User Control Table:<br />
#<br />
&nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; "(298)"]="KILL signal received."<br />
&nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; "(333)"]="Multi-user session begin."<br />
&nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; "(334)"]="<multi ingle=""> session end. (334)"</multi><br />
&nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; "(451)"]="<session-type> session begin for <user> on <tty>. (451)"</tty></user></session-type><br />
&nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; "(452)"]="Login by <user> on <tty>."</tty></user><br />
&nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; "(453)"]="Logout by <user> on <tty>."</tty></user><br />
&nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; "(562)"]="HANGUP signal received."<br />
&nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; "(708)"]="Userid is now <name>."</name><br />
&nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; "(742)"]="Login usernum <n>, userid <name>, on <tty node="">."</tty></name></n><br />
&nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; "(739)"]="Logout usernum <n>, userid <name>, on <tty node="">."</tty></name></n><br />
&nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; "(792)"]="Message received with bad usernum."<br />
&nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; "(794)"]="Usernum&nbsp; terminated abnormally."<br />
&nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; "(795)"]="Error reading socket=<n> ret=<n> errno=<n>."</n></n></n><br />
&nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; "(796)"]="Error writing msg, socket=<n> errno=<n> usernum=<n> disconnected."</n></n></n><br />
&nbsp; &nbsp; &nbsp; LoginsNum[&nbsp; "(797)"]="Partial write, socket=<n> msglen=<n> ret=<n> user <n> disconnected."</n></n></n></n><br />
&nbsp; &nbsp; &nbsp; LoginsNum[ "(1153)"]="BROKER detects death of server <pid>."</pid><br />
&nbsp; &nbsp; &nbsp; LoginsNum[ "(1334)"]="Rejecting login -- too many users for this server."<br />
&nbsp; &nbsp; &nbsp; LoginsNum[ "(1166)"]="Server disconnecting user <n>."</n><br />
&nbsp; &nbsp; &nbsp; LoginsNum[ "(2252)"]="Begin transaction backout."<br />
&nbsp; &nbsp; &nbsp; LoginsNum[ "(2253)"]="Transaction backout completed."<br />
&nbsp; &nbsp; &nbsp; LoginsNum[ "(2266)"]="Expected user <n> received user <n>."</n></n><br />
&nbsp; &nbsp; &nbsp; LoginsNum[ "(2518)"]="Started. (APW, BIW, AIW or WDOG)"<br />
&nbsp; &nbsp; &nbsp; LoginsNum[ "(2519)"]="Disconnected. (APW or WDOG)"<br />
&nbsp; &nbsp; &nbsp; LoginsNum[ "(2520)"]="Stopped. (BIW or AIW)"<br />
&nbsp; &nbsp; &nbsp; LoginsNum[ "(2268)"]="Invalid message was received for an attempted login."<br />
&nbsp; &nbsp; &nbsp; LoginsNum[ "(2525)"]="Disconnecting dead server <n>."</n><br />
&nbsp; &nbsp; &nbsp; LoginsNum[ "(2526)"]="Disconnecting client <n> of dead server <n>."</n></n><br />
&nbsp; &nbsp; &nbsp; LoginsNum[ "(2527)"]="Disconnecting dead user <n>."</n><br />
&nbsp; &nbsp; &nbsp; LoginsNum[ "(4375)"]="Received signal <signum>; handling as SIGHUP."</signum><br />
&nbsp; &nbsp; &nbsp; LoginsNum[ "(4698)"]="User count exceeded. Failed attempt to login by <userid> on <devtype>."</devtype></userid><br />
#&nbsp; &nbsp; &nbsp;LoginsNum[ "(4732)"]="Login by <name> on <tty>. Pid <pid>."&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# DEC/OpenVMS</pid></tty></name><br />
#&nbsp; &nbsp; &nbsp;LoginsNum[ "(4734)"]="Logout by <name> on <tty>. Pid <pid>."&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # DEC/OpenVMS</pid></tty></name><br />
&nbsp; &nbsp; &nbsp; LoginsNum[ "(5569)"]="Quiet point request login by <user> on <ttyxxx>." # V8.2A</ttyxxx></user><br />
&nbsp; &nbsp; &nbsp; LoginsNum[ "(5570)"]="Quiet point request logout"&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# V8.2A<br />
&nbsp; &nbsp; &nbsp; LoginsNum[ "(7129)"]="Usr <n> set name to <name>."&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V8.3B Dbdes, Aimage new, Aimage list, BACKUP</name></n><br />
&nbsp; &nbsp; &nbsp; LoginsNum[ "(8873)"]="Login usernum <n>, remote SQL client."&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V9.1B, logout with msg 453</n><br />
#&nbsp; &nbsp; &nbsp;LoginsNum["(12092)"]="User <n> disconnect initiated."&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# V10.1A, Not used</n><br />
&nbsp; &nbsp; &nbsp; LoginsNum["(12454)"]="Server <n> has <n> unresolved pending connections(s). Please check port <n>."</n></n></n><br />
&nbsp; &nbsp; &nbsp; LoginsNum["(12455)"]="Clearing pending connections from server <n>"&nbsp; &nbsp; &nbsp;# V10.2B</n><br />
&nbsp; &nbsp; &nbsp; LoginsNum["(17961)"]="User <n> set tty to <name>. (17961)"&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V11.6</name></n><br />
#<br />
# Identify the messages without the numbers by their text pattern:<br />
#<br />
# PROMON&nbsp; 5: (-----) Login by root.<br />
# BACKUP&nbsp; 7: (-----) Login by root.<br />
# SQLSRV2 3: (-----) Login by user 2525. Using TCP/IP IPV4 address 192.168.10.162<br />
&nbsp; &nbsp; &nbsp; LoginsMsg["Login by"]="(SQL User, PROMON or BACKUP)"<br />
&nbsp; &nbsp; &nbsp; LoginsMsg["Logout by"]="SQL User (SQLSRV2)" # SQLSRV2 3: (-----) Logout by user 2525.<br />
&nbsp; &nbsp; &nbsp; LoginsMsg["Sending signal to user"]="(BROKER or PROSHUT)"<br />
&nbsp; &nbsp; &nbsp; LoginsMsg["User disconnect initiated"]="(PROSHUT)"<br />
<br />
&nbsp; &nbsp; &nbsp; LoginsMsg["Received RECONNECT from WTB"]="(Webspeed user/agent)"<br />
# This is an informational message which is sent on behalf of a user.<br />
# This message indicates that the user who connected to the database<br />
# server is a Webspeed user/agent and that the initial connection<br />
# between the WebSpeed broker and agent was completed.<br />
<br />
&nbsp; &nbsp; &nbsp; LoginsMsg["Notifying srvr"]="<n>, conn <n>, to terminate remote user <n> (12093)"</n></n></n><br />
# SHUT 2146: (-----) User 7775 disconnect initiated<br />
# SHUT 2146: (453)&nbsp; &nbsp;Logout by <user> on batch.</user><br />
# BROKER&nbsp; 0: (-----) Notifying srvr 24, conn 24, to terminate remote user 7775 &lt;== should be (12093)<br />
# BROKER&nbsp; 0: (-----) Sending signal 5 to user 7775<br />
# SRV&nbsp; &nbsp; 24: (1166)&nbsp; Server disconnecting user 7775.<br />
<br />
#<br />
# "Ignore" = the group of the informational messages that can be ignored:<br />
#<br />
# Miscellaneous:<br />
#<br />
&nbsp; &nbsp; &nbsp; IgnoreNum[&nbsp; "(439)"]="** Save file named core for analysis by Progress Software Corporation."<br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(2261)"]="Sending signal <n> to <n> connected user(s)."</n></n><br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(2263)"]="Resending shutdown request to <n> user(s)."</n><br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(8863)"]="This broker supports 4GL server groups only."<br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(8864)"]="This broker supports SQL server groups only."<br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(8865)"]="This broker supports both 4GL and SQL server groups."<br />
&nbsp; &nbsp; &nbsp; IgnoreNum["(10471)"]="Database connections have been enabled."<br />
&nbsp; &nbsp; &nbsp; IgnoreNum["(16869)"]="Removed shared memory with segment_id: <n>"</n><br />
#<br />
# Warnings:<br />
#<br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(5407)"]="WARNING: -nb exceeded. Automatically increasing from <old> to <new>."</new></old><br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(5408)"]="WARNING: -l exceeded. Automatically increasing from <old> to <new>."</new></old><br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(5409)"]="WARNING: -mmax exceeded. Automatically increasing from <old> to <new>."</new></old><br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(5410)"]="WARNING: -D limit has been exceeded; automatically increasing to <new>."</new><br />
#<br />
# Connection:<br />
#<br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(5644)"]="Started for <name> using tcp IPV4 address 0.0.0.0, pid <n>."</n></name><br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(5645)"]="This is an additional broker for this protocol."<br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(5646)"]="Started on port <port> using tcp IPV4 address 0.0.0.0, pid <n>."</n></port><br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(5512)"]="Previous message sent on behalf of user <n>. (5512)"</n><br />
&nbsp; &nbsp; &nbsp; IgnoreNum["(14658)"]="Previous message sent on behalf of user <n>, server pid <n>, broker pid <n>. (5512)"</n></n></n><br />
&nbsp; &nbsp; &nbsp; IgnoreNum["(10836)"]="Database connections are not allowed at this time."<br />
&nbsp; &nbsp; &nbsp; IgnoreNum["(12698)"]="User <name> Roles: <name>"</name></name><br />
&nbsp; &nbsp; &nbsp; IgnoreNum["(12699)"]="Database <name> Options: <name>"</name></name><br />
&nbsp; &nbsp; &nbsp; IgnoreNum["(15646)"]="Started on port <port> using tcp, pid <pid>."</pid></port><br />
#<br />
# SQLSRV2: Database statistics<br />
#<br />
&nbsp; &nbsp; &nbsp; IgnoreNum["(10995)"]="Database statistics (<type>) updated for all tables."</type><br />
&nbsp; &nbsp; &nbsp; IgnoreNum["(10996)"]="Database statistics (<type>) updated for table <name>."</name></type><br />
&nbsp; &nbsp; &nbsp; IgnoreNum["(10997)"]="Database statistics (<schema table="">) updated by direct user sql statement (<type>)."</type></schema><br />
#<br />
# RFUTIL:<br />
#<br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(3774)"]="Backup after-image extent and mark it as empty."<br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(3776)"]="Backup ai extent and mark it as empty."<br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(3777)"]="Switched to ai extent <name>."</name><br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(3778)"]="This is after-image file number <n> since the last AIMAGE BEGIN"</n><br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(3789)"]="Marked after-image extent <name> EMPTY."</name><br />
&nbsp; &nbsp; &nbsp; IgnoreNum["(11805)"]="Unlocking after-image file <n> and locking ALL FULL after-image files beginning with file <n>."</n></n><br />
&nbsp; &nbsp; &nbsp; IgnoreNum["(12074)"]="The After-image extent <name> was successfully extracted."</name><br />
&nbsp; &nbsp; &nbsp; IgnoreNum["(13154)"]="Marked after-image extent <name> ARCHIVED."</name><br />
&nbsp; &nbsp; &nbsp; IgnoreNum["(13199)"]="After-image extent <name> has been copied to <name>."</name></name><br />
&nbsp; &nbsp; &nbsp; IgnoreNum["(13231)"]="From this point forward all after-image extents will be archived to <name>."</name><br />
#<br />
# BACKUP:<br />
#<br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(1074)"]="Wrote a total of <blocks> backup blocks using <bytes> bytes of media."</bytes></blocks><br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(1361)"]="Incremental backup started."<br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(1362)"]="Full backup started."<br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(1363)"]="Incremental backup successfully completed."<br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(1364)"]="Full backup successfully completed."<br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(1365)"]="Database copied from <database-name>."</database-name><br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(1366)"]="Incremental restore of sequence <n> started."</n><br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(1367)"]="Incremental restore of sequence <n> completed."</n><br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(3664)"]="Incremental backup started."<br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(5459)"]="Begin backup of Before Image file(s)."<br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(5460)"]="End backup of Before Image file(s)."<br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(5461)"]="Begin backup of Data file(s)."<br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(5462)"]="End backup of Data file(s)."<br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(6678)"]="NOTE: Backup media estimates done without database scan." # V8.3A<br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(6680)"]="Estimate for uncompressed full backup is provided."<br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(6686)"]="<n> active blocks out of <n> blocks in <name> will be dumped."</name></n></n><br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(6688)"]="<n> BI blocks will be dumped."&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V8.3B</n><br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(6689)"]="Backup requires&nbsp; blocks ( Mb) of media."<br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(6699)"]="Restore would require&nbsp; blocks ( Mb) of media."<br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(6760)"]="This backup was taken <time>."&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V8.3B</time><br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(9285)"]="Backup requires an estimated <size id=""> of media."&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# V9.1C</size><br />
&nbsp; &nbsp; &nbsp; IgnoreNum[ "(9286)"]="Restore would require an estimated&nbsp; db blocks using <size id=""> of media."</size><br />
&nbsp; &nbsp; &nbsp; IgnoreNum["(12850)"]="Backup blocks will be written to <device file="">."&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V10.2B</device><br />
&nbsp; &nbsp; &nbsp; IgnoreNum["(13625)"]="Wrote a total of <blocks> backup blocks using <size id=""> of media."</size></blocks><br />
&nbsp; &nbsp; &nbsp; IgnoreNum["(13786)"]="This backup was also used to enable after-image on the source database."<br />
&nbsp; &nbsp; &nbsp; IgnoreNum["(14256)"]="The Replication Server has been notified that an online backup is about to be performed."<br />
&nbsp; &nbsp; &nbsp; IgnoreNum["(14258)"]="The online backup of this database has completed normally."<br />
&nbsp; &nbsp; &nbsp; IgnoreNum["(15108)"]="The online backup has finished backing up the BI. The Replication Agent will now begin recovery synchronization followed by normal processing."<br />
&nbsp; &nbsp; &nbsp; IgnoreNum["(15109)"]="At Database close the number of live transactions is <n>."</n><br />
&nbsp; &nbsp; &nbsp; IgnoreNum["(15321)"]="Before Image Log Initialisation at block <n> offset <n>."</n></n><br />
&nbsp; &nbsp; &nbsp; IgnoreNum["(15743)"]="Before Image Log Completion at Block <n> Offset <n>."&nbsp; &nbsp; &nbsp; # V10.2B</n></n><br />
&nbsp; &nbsp; &nbsp; IgnoreNum["(16866)"]="Dumped <n> active BI blocks."&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # V11.2</n><br />
#<br />
# Identify the messages without the numbers by their text pattern:<br />
#<br />
# BROKER&nbsp; 2: (-----) Shared Library Path set to LIBPATH=<path></path><br />
#<br />
&nbsp; &nbsp; &nbsp; IgnoreMsg["Shared Library Path set to"]=""<br />
<br />
# SQLSRV2 3: (-----) SQL Server 11.6.01 started, configuration: "dbname.virtualconfig"<br />
# SQLSRV2 3: (-----) "/path/to/dbname" started on IPv4 port 1025 for address 0.0.0.0, pid 9568520 (0x00920108).<br />
# SQLSRV2 3: (-----) Thread stack size: 1024000 (bytes).<br />
# SQLSRV2 3: (-----) DLC from ENVIRONMENT VARIABLE is: /usr/dlc<br />
# SQLSRV2 3: (-----) WRKDIR from ENVIRONMENT VARIABLE is: /usr/wrk/<br />
# SQLSRV2 3: (-----) JDKHOME from ENVIRONMENT VARIABLE is: /usr/dlc/jdk<br />
# SQLSRV2 3: (-----) JREHOME from ENVIRONMENT VARIABLE is: /usr/dlc/jdk/jre<br />
# SQLSRV2 3: (-----) CLASSPATH from DEFAULT is:<br />
# SQLSRV2 3: (-----) PROSQL_LOCKWAIT_TIMEOUT value is: 5 seconds<br />
<br />
&nbsp; &nbsp; &nbsp; IgnoreMsg["started, configuration:"]=""<br />
&nbsp; &nbsp; &nbsp; IgnoreMsg["started on port for address pid"]=""<br />
&nbsp; &nbsp; &nbsp; IgnoreMsg["Thread stack size:"]=""<br />
&nbsp; &nbsp; &nbsp; IgnoreMsg["DLC from ENVIRONMENT VARIABLE is:"]=""<br />
&nbsp; &nbsp; &nbsp; IgnoreMsg["WRKDIR from ENVIRONMENT VARIABLE is:"]=""<br />
&nbsp; &nbsp; &nbsp; IgnoreMsg["JDKHOME from ENVIRONMENT VARIABLE is:"]=""<br />
&nbsp; &nbsp; &nbsp; IgnoreMsg["JREHOME from ENVIRONMENT VARIABLE is:"]=""<br />
&nbsp; &nbsp; &nbsp; IgnoreMsg["CLASSPATH from DEFAULT is:"]=""<br />
&nbsp; &nbsp; &nbsp; IgnoreMsg["PROSQL_LOCKWAIT_TIMEOUT value is:"]=""<br />
<br />
&nbsp; &nbsp; &nbsp; PrevLogins=""<br />
&nbsp; &nbsp; &nbsp; PrevLoginTime=""<br />
<br />
# SunOS can rise the error if the arrays are not "initiated":<br />
# awk: Count is not an array<br />
&nbsp; &nbsp; &nbsp; TotalNumCount[""]=0<br />
&nbsp; &nbsp; &nbsp; TotalMsgCount[""]=0<br />
&nbsp; &nbsp; &nbsp; LoginNumCount[""]=0<br />
&nbsp; &nbsp; &nbsp; LoginMsgCount[""]=0<br />
&nbsp; &nbsp; } # BEGIN<br />
#<br />
# Skip the lines that do not begin with timestamps<br />
# like [2016/05/12@14:03:52.486+0400]<br />
#&nbsp; &nbsp; &nbsp; &nbsp;1234567890123456789012345678<br />
#<br />
&nbsp; &nbsp; ! /^\[/ {next}<br />
#<br />
# Lines with timestamps:<br />
#<br />
&nbsp; &nbsp; { CurrTime=substr($1,2,length($1)-2) # Time without "[]"<br />
&nbsp; &nbsp; &nbsp; if(InitTime=="") InitTime=CurrTime<br />
&nbsp; &nbsp; &nbsp; if(PrevTime=="") PrevTime=CurrTime<br />
<br />
&nbsp; &nbsp; &nbsp; D=substr(CurrTime,1,11) # Year/Month/Day<br />
&nbsp; &nbsp; &nbsp; H=substr(CurrTime,12,2) # Hours<br />
&nbsp; &nbsp; &nbsp; M=substr(CurrTime,15,2) # Minutes<br />
&nbsp; &nbsp; &nbsp; S=substr(CurrTime,18,2) # Seconds<br />
&nbsp; &nbsp; &nbsp; Z=substr(CurrTime,length(CurrTime)-4) # Timezone -0400<br />
&nbsp; &nbsp; }<br />
&nbsp; &nbsp; Z ~/^\+/ {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # TZ +0400<br />
&nbsp; &nbsp; &nbsp; H-=substr(Z,2,2)&nbsp; &nbsp; &nbsp; &nbsp; # Hours<br />
&nbsp; &nbsp; &nbsp; M-=substr(Z,4,2)&nbsp; &nbsp; &nbsp; &nbsp; # Minutes<br />
&nbsp; &nbsp; } # TZ +0400<br />
&nbsp; &nbsp; Z ~/^\-/ {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # TZ -0400<br />
&nbsp; &nbsp; &nbsp; H+=substr(Z,2,2)&nbsp; &nbsp; &nbsp; &nbsp; # Hours<br />
&nbsp; &nbsp; &nbsp; M+=substr(Z,4,2)&nbsp; &nbsp; &nbsp; &nbsp; # Minutes<br />
&nbsp; &nbsp; } # TZ -0400<br />
#<br />
# Article Number: 000064856<br />
# Defect PSC00256028, PSC00257044<br />
# Upgrade to OpenEdge 11.4 or later<br />
# A partial fix is included in OpenEdge 11.2.1 and 11.3.x<br />
# As a side effect of the fix, messages from signal handlers will always show<br />
# as UTC time instead of the database timezone.<br />
#<br />
# Example:<br />
# [2016/05/23@04:11:27.185-0400] P-12 T-1 I ABL 8: (452) Login by user on /dev/pts/4.<br />
# [2016/05/23@08:52:07.000+0000] P-12 T-1 I ABL 8: (562) HANGUP signal received.<br />
# [2016/05/23@04:52:07.926-0400] P-12 T-1 I ABL 8: (453) Logout by hchen on /dev/pts/4.<br />
#<br />
# Convert the current time to UTC time to get the correct "Logins" statistics:<br />
&nbsp; &nbsp; { if(length(H)==1) H="0" H<br />
&nbsp; &nbsp; &nbsp; if(length(M)==1) M="0" M<br />
&nbsp; &nbsp; &nbsp; if(length(M)==1) S="0" S<br />
<br />
&nbsp; &nbsp; &nbsp; CurrLogins=D H ":" M ":" S<br />
&nbsp; &nbsp; &nbsp; CurrLogins=substr(CurrLogins,1,TimeSize) # TimeSize=19 = no cuts<br />
&nbsp; &nbsp; } # Timestamps<br />
#<br />
# Logins/logouts statistics report:<br />
#<br />
&nbsp; &nbsp; Logins=="yes" &amp;&amp; PrevLogins!=CurrLogins {<br />
&nbsp; &nbsp; &nbsp; for(Num in LoginNumCount) if(LoginNumCount[Num]&gt;0)<br />
&nbsp; &nbsp; &nbsp; {<br />
# Time: 2016/05/12@14:03:52.486+0400<br />
#&nbsp; &nbsp; &nbsp; &nbsp;1234567890123456789012345678<br />
#<br />
&nbsp; &nbsp; &nbsp; &nbsp; printf"%10s %8s %8s %4d %7s %s\n",\<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(PrevLoginTime,1,10),\<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(PrevLoginTime,12),\<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(LastLoginTime,12),\<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginNumCount[Num],\<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Num,\<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginsNum[Num]<br />
<br />
# Either set to zero or delete an element of the array - any option that will work:<br />
&nbsp; &nbsp; &nbsp; &nbsp; LoginNumCount[Num]=0<br />
&nbsp; &nbsp; &nbsp; &nbsp; delete LoginNumCount[Num]<br />
&nbsp; &nbsp; &nbsp; } # for Num in LoginNumCount<br />
<br />
&nbsp; &nbsp; &nbsp; for(Msg in LoginMsgCount) if(LoginMsgCount[Msg]&gt;0) {<br />
&nbsp; &nbsp; &nbsp; &nbsp; printf"%10s %8s %8s %4d %7s %s\n",\<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(PrevLoginTime,1,10),\<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(PrevLoginTime,12),\<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(LastLoginTime,12),\<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginMsgCount[Msg],\<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NoNum,\<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Msg " " LoginsMsg[Msg]<br />
<br />
# Either set to zero or delete an element of the array - any option that will work:<br />
&nbsp; &nbsp; &nbsp; &nbsp; LoginMsgCount[Msg]=0<br />
&nbsp; &nbsp; &nbsp; &nbsp; delete LoginMsgCount[Msg]<br />
&nbsp; &nbsp; &nbsp; } # for Msg in LoginMsgCount<br />
<br />
&nbsp; &nbsp; &nbsp; PrevLoginTime=""<br />
&nbsp; &nbsp; &nbsp; PrevLogins=CurrLogins<br />
&nbsp; &nbsp; } # Logins=="yes"<br />
#<br />
# Msg number is column 7 if there is a space between user type and user number:<br />
# [2016/05/12@14:03:52.486+0400] P-1 T-1 I ABL 10: (452) Login by root on batch.<br />
#<br />
# Msg number is column 6 if there is no space between user type and user number:<br />
# [2016/04/05@06:00:23.102+0600] P-2 T-1 I RFUTI1312: (452) Login by root on batch.<br />
#<br />
&nbsp; &nbsp; { Num=""<br />
&nbsp; &nbsp; &nbsp; for(Col=6;Col&lt;=7;Col++) if($Col ~ /^\([0-9]*-*\)$/) {<br />
&nbsp; &nbsp; &nbsp; &nbsp; Num=$Col<br />
&nbsp; &nbsp; &nbsp; &nbsp; break<br />
&nbsp; &nbsp; &nbsp; } # for Col<br />
&nbsp; &nbsp; &nbsp; if(Num=="") next<br />
#<br />
# Cleaning a message: remove any word containing a digit.<br />
#<br />
&nbsp; &nbsp; &nbsp; Msg=$(Col+1)<br />
&nbsp; &nbsp; &nbsp; for(i=Col+2;i&lt;=NF;i++) if($i !~/[0-9]/) Msg=Msg " " $i<br />
&nbsp; &nbsp; }<br />
#<br />
# Messages without numbers:<br />
#<br />
&nbsp; &nbsp; Num==NoNum {<br />
#<br />
# Ignore the block dumps (dont count them in the Summary):<br />
# (-----) 1fd0:&nbsp; 652d 5883 4e53 5056 0000 2565 2d74 7970<br />
#<br />
&nbsp; &nbsp; &nbsp; if(NF==Col+9 &amp;&amp; $(Col+1) ~ /^[0-1]/ &amp;&amp; $(Col+1) ~ /:$/) next<br />
<br />
# Summary:<br />
&nbsp; &nbsp; &nbsp; TotalMsgCount[Msg]++<br />
<br />
# Fatal:<br />
&nbsp; &nbsp; &nbsp; if($4=="F") {<br />
&nbsp; &nbsp; &nbsp; &nbsp; FatalCount++<br />
&nbsp; &nbsp; &nbsp; &nbsp; if(Fatal=="yes") {<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; next<br />
&nbsp; &nbsp; &nbsp; &nbsp; } # if Fatal<br />
&nbsp; &nbsp; &nbsp; } # if "F"<br />
<br />
# Errors:<br />
&nbsp; &nbsp; &nbsp; if(Msg ~ /SYSTEM ERROR: /) {<br />
&nbsp; &nbsp; &nbsp; &nbsp; ErrorsCount++<br />
&nbsp; &nbsp; &nbsp; &nbsp; if(Errors=="yes") {<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; next<br />
&nbsp; &nbsp; &nbsp; &nbsp; } # if Errors<br />
&nbsp; &nbsp; &nbsp; } # if SYSTEM ERROR:<br />
<br />
&nbsp; &nbsp; &nbsp; for(Pattern in IgnoreMsg) if(index(Msg,Pattern)&gt;0) next<br />
<br />
&nbsp; &nbsp; &nbsp; for(Pattern in LoginsMsg) if(index(Msg,Pattern)&gt;0) {<br />
&nbsp; &nbsp; &nbsp; &nbsp; LoginMsgCount[Pattern]++<br />
&nbsp; &nbsp; &nbsp; &nbsp; if(PrevLoginTime=="")<br />
&nbsp; &nbsp; &nbsp; &nbsp; PrevLoginTime=CurrTime<br />
&nbsp; &nbsp; &nbsp; &nbsp; LastLoginTime=CurrTime<br />
&nbsp; &nbsp; &nbsp; &nbsp; next<br />
&nbsp; &nbsp; &nbsp; } # LoginsMsg<br />
<br />
&nbsp; &nbsp; &nbsp; if(Startup=="yes") {<br />
&nbsp; &nbsp; &nbsp; &nbsp; if(Params=="yes") print<br />
&nbsp; &nbsp; &nbsp; &nbsp; next<br />
&nbsp; &nbsp; &nbsp; } # if Startup<br />
<br />
&nbsp; &nbsp; &nbsp; RemainsCount++<br />
&nbsp; &nbsp; &nbsp; if(Remains=="yes") print<br />
&nbsp; &nbsp; &nbsp; next<br />
&nbsp; &nbsp; } #&nbsp; Messages without numbers<br />
#<br />
# The numbered messages:<br />
#<br />
# Summary:<br />
&nbsp; &nbsp; { TotalNumCount[Num]++<br />
&nbsp; &nbsp; &nbsp; Example[Num]=Msg<br />
<br />
# Fatal:<br />
&nbsp; &nbsp; &nbsp; if($4=="F") {<br />
&nbsp; &nbsp; &nbsp; &nbsp; FatalCount++<br />
&nbsp; &nbsp; &nbsp; &nbsp; if(Fatal=="yes") {<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; next<br />
&nbsp; &nbsp; &nbsp; &nbsp; } # if Fatal<br />
&nbsp; &nbsp; &nbsp; } # if "F"<br />
<br />
# Errors:<br />
&nbsp; &nbsp; &nbsp; if(Msg ~ /SYSTEM ERROR: /) {<br />
&nbsp; &nbsp; &nbsp; &nbsp; ErrorsCount++<br />
&nbsp; &nbsp; &nbsp; &nbsp; if(Errors=="yes") {<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; next<br />
&nbsp; &nbsp; &nbsp; &nbsp; } # if Errors<br />
&nbsp; &nbsp; &nbsp; } # if SYSTEM ERROR:<br />
#<br />
# "Params" group:<br />
#<br />
# BROKER&nbsp; 0: (333)&nbsp; &nbsp;Multi-user session begin.<br />
# BROKER&nbsp; 0: (4234)&nbsp; Progress OpenEdge Release <version_number> on <os_platform>.</os_platform></version_number><br />
# BROKER&nbsp; 0: (10471) Database connections have been enabled.<br />
# PROLOG&nbsp; 5: (12684) prolog log file truncation <start end="">. (12684)</start><br />
#<br />
&nbsp; &nbsp; &nbsp; if(Num=="(333)")&nbsp; &nbsp;Startup="yes"<br />
&nbsp; &nbsp; &nbsp; if(Num=="(4234)")&nbsp; Startup="yes"<br />
&nbsp; &nbsp; &nbsp; if(Num=="(10471)") Startup="no"<br />
&nbsp; &nbsp; &nbsp; if($5!="BROKER" &amp;&amp; $5!="PROLOG") Startup="no"<br />
<br />
&nbsp; &nbsp; &nbsp; for(Pattern in IgnoreNum) if(Num==Pattern) next<br />
&nbsp; &nbsp; &nbsp; for(Pattern in LoginsNum) if(Num==Pattern) {<br />
&nbsp; &nbsp; &nbsp; &nbsp; LoginNumCount[Pattern]++<br />
&nbsp; &nbsp; &nbsp; &nbsp; if(PrevLoginTime=="")<br />
&nbsp; &nbsp; &nbsp; &nbsp; PrevLoginTime=CurrTime<br />
&nbsp; &nbsp; &nbsp; &nbsp; LastLoginTime=CurrTime<br />
&nbsp; &nbsp; &nbsp; &nbsp; next<br />
&nbsp; &nbsp; &nbsp; } # LoginsNum<br />
&nbsp; &nbsp; &nbsp; if(Startup=="yes") {<br />
&nbsp; &nbsp; &nbsp; &nbsp; if(Params=="yes")&nbsp; print<br />
&nbsp; &nbsp; &nbsp; &nbsp; next<br />
&nbsp; &nbsp; &nbsp; } # if Startup<br />
<br />
&nbsp; &nbsp; &nbsp; RemainsCount++<br />
&nbsp; &nbsp; &nbsp; if(Remains=="yes") print<br />
&nbsp; &nbsp; &nbsp; next<br />
&nbsp; &nbsp; } # Numbered messages<br />
<br />
&nbsp; &nbsp; END {<br />
&nbsp; &nbsp; &nbsp; if(Logins=="yes")<br />
&nbsp; &nbsp; &nbsp; for(Num in LoginNumCount) if(LoginNumCount[Num]&gt;0)<br />
&nbsp; &nbsp; &nbsp; &nbsp; printf"%10s %8s %8s %4d %7s %s\n",\<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(PrevLoginTime,1,10),\<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(PrevLoginTime,12),\<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; substr(LastLoginTime,12),\<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginNumCount[Num],\<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Num,\<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LoginsNum[Num]<br />
&nbsp; &nbsp; &nbsp; # if Logins<br />
<br />
&nbsp; &nbsp; &nbsp; Count=0<br />
&nbsp; &nbsp; &nbsp; NumTypeCount=0<br />
&nbsp; &nbsp; &nbsp; MsgTypeCount=0<br />
&nbsp; &nbsp; &nbsp; for(Num in TotalNumCount) if(TotalNumCount[Num]&gt;0) {<br />
&nbsp; &nbsp; &nbsp; &nbsp; Count+=TotalNumCount[Num]<br />
&nbsp; &nbsp; &nbsp; &nbsp; NumTypeCount++<br />
&nbsp; &nbsp; &nbsp; } # for Num if<br />
&nbsp; &nbsp; &nbsp; for(Msg in TotalMsgCount) if(TotalMsgCount[Msg]&gt;0) {<br />
&nbsp; &nbsp; &nbsp; &nbsp; Count+=TotalMsgCount[Msg]<br />
&nbsp; &nbsp; &nbsp; &nbsp; MsgTypeCount++<br />
&nbsp; &nbsp; &nbsp; } # for Msg if<br />
<br />
&nbsp; &nbsp; &nbsp; printf"\nProcessed %d lines, %d messages with timestamps\n",NR,Count<br />
&nbsp; &nbsp; &nbsp; printf"from %s\n",InitTime<br />
&nbsp; &nbsp; &nbsp; printf"&nbsp; to %s\n",CurrTime<br />
&nbsp; &nbsp; &nbsp; printf"Numbered messages: %d, without numbers: %d\n",NumTypeCount,MsgTypeCount<br />
&nbsp; &nbsp; &nbsp; if(Fatal!="yes")&nbsp; RemainsCount-=FatalCount<br />
&nbsp; &nbsp; &nbsp; if(Errors!="yes") RemainsCount-=ErrorsCount<br />
&nbsp; &nbsp; &nbsp; printf"System errors: %d, fatal errors: %d, \"remains\": %d\n",ErrorsCount,FatalCount,RemainsCount<br />
<br />
&nbsp; &nbsp; &nbsp; if("'$Summary'"!="yes") exit<br />
#<br />
# Replace the examples by the known message descriptions:<br />
#<br />
&nbsp; &nbsp; &nbsp; for(Num in LoginsNum) Example[Num]=LoginsNum[Num]<br />
&nbsp; &nbsp; &nbsp; for(Num in IgnoreNum) Example[Num]=IgnoreNum[Num]<br />
<br />
&nbsp; &nbsp; &nbsp; printf"\nSummary per the message numbers:\n"<br />
&nbsp; &nbsp; &nbsp; for(Num in TotalNumCount) if(TotalNumCount[Num]&gt;0)<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; printf"%6d %7s %s\n",TotalNumCount[Num],Num,Example[Num] &gt;TmpFile<br />
&nbsp; &nbsp; &nbsp; for(Msg in TotalMsgCount) if(TotalMsgCount[Msg]&gt;0)<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; printf"%6d %7s %s\n",TotalMsgCount[Msg],NoNum,Msg &gt;TmpFile<br />
&nbsp; &nbsp; &nbsp; close(TmpFile)<br />
&nbsp; &nbsp; } # END<br />
&nbsp; ' -<br />
<br />
&nbsp; test -f $TmpFile &amp;&amp; \<br />
&nbsp; cat&nbsp; &nbsp; &nbsp;$TmpFile | sort -n -r &amp;&amp; \<br />
&nbsp; rm&nbsp; &nbsp;-f $TmpFile<br />
<br />
} # LogParser()<br />
<br />
<br />
#------------------------------------------------------------------------------<br />
#<br />
Msg()<br />
{<br />
&nbsp; Num=$1<br />
<br />
&nbsp; test -z "$DLC" &amp;&amp; \<br />
&nbsp; echo "Progress DLC environment variable variable is not set." &gt;&amp;2 &amp;&amp; \<br />
&nbsp; return<br />
<br />
&nbsp; if [ ! -f $DLC/prohelp/msgdata/msg1 ]<br />
&nbsp; then<br />
&nbsp; &nbsp; echo "Progress DLC environment variable may not be set correctly.<br />
Set DLC variable to Progress installation directory.<br />
Progress DLC setting: $DLC" &gt;&amp;2<br />
&nbsp; &nbsp; return<br />
&nbsp; fi<br />
<br />
&nbsp; test -z "$Num" &amp;&amp; \<br />
&nbsp; echo "You do't specify the message number." &gt;&amp;2 &amp;&amp; \<br />
&nbsp; return<br />
<br />
&nbsp; test $Num -gt 0 2&gt;/dev/null<br />
&nbsp; if [ $? -ne 0 ]<br />
&nbsp; then<br />
&nbsp; &nbsp; echo "Message number ($Num) should be an integer greater than 0." &gt;&amp;2<br />
&nbsp; &nbsp; return<br />
&nbsp; fi<br />
<br />
&nbsp; i=`expr $Num - 1`<br />
&nbsp; i=`expr $i / 50`<br />
&nbsp; i=`expr $i + 1`<br />
<br />
&nbsp; File=$DLC/prohelp/msgdata/msg$i<br />
<br />
&nbsp; if [ ! -f $File ]<br />
&nbsp; then<br />
&nbsp; &nbsp; echo "Failed to find $File"<br />
&nbsp; &nbsp; echo "$Num seemed too large for current Progress version"<br />
&nbsp; &nbsp; cat $DLC/version<br />
&nbsp; &nbsp; return<br />
&nbsp; fi &gt;&amp;2<br />
<br />
&nbsp; test ! -r $File &amp;&amp; \<br />
&nbsp; echo "You don't have the permissions to read $File" &gt;&amp;2 &amp;&amp; \<br />
&nbsp; return<br />
<br />
&nbsp; awk '$1=='$Num' {<br />
&nbsp; &nbsp; i=length($1)+3<br />
&nbsp; &nbsp; Text=substr($0,i)<br />
&nbsp; &nbsp; i=index(Text,"\" \"")<br />
&nbsp; &nbsp; Desc=substr(Text,i+3)<br />
&nbsp; &nbsp; Text=substr(Text,1,i-1)<br />
&nbsp; &nbsp; i=index(Desc,"\" \"")<br />
&nbsp; &nbsp; Desc=substr(Desc,1,i-1)<br />
<br />
&nbsp; &nbsp; print Text<br />
&nbsp; &nbsp; print Desc<br />
&nbsp; &nbsp; exit<br />
&nbsp; }' $File | \<br />
&nbsp; sed -e 's/\"\"/\"/'<br />
} # Msg()<br />
<br />
#------------------------------------------------------------------------------<br />
#<br />
<br />
# Set the default interval for login/logout statistics:<br />
#<br />
Options=6&nbsp; # per hour<br />
<br />
FileList=""<br />
while [ $# -gt 0 ]<br />
do<br />
&nbsp; case $1 in<br />
&nbsp; &nbsp; -m) Msg $2; exit;;<br />
&nbsp; &nbsp; -h*|-help|--help) Usage;;<br />
&nbsp; &nbsp; [0-9]*|-*) Options="$Options $1";;<br />
&nbsp; &nbsp; *) test ! -f "$1" &amp;&amp; echo "Input file $1 does not exist!" &amp;&amp; exit 1<br />
&nbsp; &nbsp; &nbsp; &nbsp;FileList="$FileList $1"<br />
&nbsp; &nbsp; ;;<br />
&nbsp; esac # case $1<br />
&nbsp; shift<br />
done&nbsp; # while [ $# -gt 0 ]<br />
<br />
# Trim the spaces:<br />
FileList=`echo $FileList`<br />
test "$Options" || \<br />
Options="-prs" # = Params Remains Summary<br />
<br />
echo "$THIS Release $Release"<br />
<br />
test -z "$FileList" &amp;&amp; \<br />
LogParser $Options || \<br />
for File in $FileList<br />
do<br />
&nbsp; Size=`ls -l $File | awk '{print $5}' 2&gt;/dev/null`<br />
&nbsp; echo "<br />
Log File: $File<br />
Log Size: $Size"<br />
&nbsp; test $Size -gt 20000000 &amp;&amp; \<br />
&nbsp; echo "Wait..."<br />
&nbsp; cat $File | LogParser $Options<br />
done 2&gt;&amp;1<br />
<br />
#<br />
#------------------------------------------------------------------------------<br />
<br />
<div>
<br /></div>
<br /></div>

  </div><a class="u-url" href="/shell-script-progress-log-parsing/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">VR Exploring</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">VR Exploring</li><li><a class="u-email" href="mailto:vrexploring@gmail.com">vrexploring@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/vemarahub"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">vemarahub</span></a></li><li><a href="https://www.twitter.com/vrexploring"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">vrexploring</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>A space where i share my thoughts and experiences about technology , science, life, family and everything in between.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
